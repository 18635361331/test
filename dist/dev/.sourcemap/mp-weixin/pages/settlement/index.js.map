{"version":3,"sources":["uni-app:///src/main.js",null,"webpack:///./src/pages/settlement/index.vue?affc","webpack:///./src/pages/settlement/index.vue?58f3","webpack:///./src/pages/settlement/index.vue?7458","uni-app:///src/pages/settlement/index.vue","webpack:///./src/pages/settlement/index.vue?2ee7","webpack:///./src/pages/settlement/index.vue?aa46"],"names":["createPage","Page"],"mappings":";;;;;;;;;;;;AAAA;;AACA;;AACA;;;;AACAA,UAAU,CAACC,cAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;AACqC;;;AAGzF;AACmI;AACnI,gBAAgB,gJAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AChEA;AAAA;AAAA;AAAA;AAAkc,CAAgB,8dAAG,EAAC,C;;;;;;;;;;;;;;;;;;;AC+Ktd;;AACA;;AAUA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAlBA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eAqBA;AAEA,4BAFA;AAIA,MAJA,kBAIA;AACA;AACA,2BADA;AACA;AACA,mBAFA;AAGA,oBAHA;AAIA,qBAJA;AAKA;AAAA;AACA,sBADA;AACA;AACA,uBAFA,CAEA;;AAFA,OALA;AASA;AAAA,OATA;AAWA;AAAA,OAXA;AAaA;AAAA,OAbA;AAeA;AAAA,OAfA;AAiBA;AAAA;AACA,qBADA;AAEA,qBAFA;AAGA;AAHA,OAjBA;AAsBA,4BAtBA;AAsBA;AACA;AAAA;AACA,0BADA;AACA;AACA,iBAFA,CAEA;;AAFA,OAvBA;AA2BA,0BA3BA;AA2BA;AACA;AAAA;AACA,oBADA;AACA;AACA,kBAFA,CAEA;;AAFA,OA5BA;AAgCA;AAAA,OAhCA;AAmCA;AAAA,OAnCA;AAsCA;AAAA,OAtCA;AAyCA;AAAA,OAzCA;AA4CA;AAAA,OA5CA;AA+CA;AAAA,OA/CA;AAkDA,sBAlDA;AAkDA;AACA,2GAnDA;AAoDA;AACA,gBADA;AAEA,gBAFA;AAGA;AAHA,OApDA;AAyDA;AACA,qBADA;AAEA,sBAFA;AAGA;AAHA;AAzDA;AA+DA,GApEA;AAqEA,QArEA,oBAqEA;AAEA;AAGA;;AACA;AACA;AACA;;AACA;AACA;AACA;AACA,GAjFA;AAkFA,kBAlFA,4BAkFA,EAlFA,EAkFA,IAlFA,EAkFA,IAlFA,EAkFA;AAAA;AACA;AACA;AACA,GArFA;AAsFA;AACA,8BADA;AAEA,oCAFA;AAGA,0CAHA;AAIA,wBAJA;AAKA,8BALA;AAMA,sCANA;AAOA;AAPA,GAtFA;AA+FA;AACA,kBADA,0BACA,QADA,EACA;AACA;;AACA;AACA;AACA,4CADA;AAEA,oEAFA;AAGA,sDAHA;AAIA,6GAJA;AAKA,uEALA;AAMA,2GANA;AAOA;AAPA;AASA;AACA,OAXA,MAWA;AACA;AACA,uDADA;AAEA;AAFA;AAIA;AACA;AACA,KArBA;AAsBA,YAtBA,oBAsBA,MAtBA,EAsBA;AAAA;;AAAA;AACA;AACA;AADA;;AAGA;AACA;AACA;;AACA,yCAFA,CAEA;;;AACA,mCAHA,CAGA;;;AACA,iCAJA,CAIA;;;AACA,oCALA,CAKA;;;AACA;AACA;AACA;AACA,SATA,MASA;AACA;AACA,mCADA;AAEA;AAFA;;AAIA;AACA;AACA,OAjBA;AAkBA,KA5CA;AA6CA,oBA7CA,8BA6CA;AAAA;AACA;;AACA;AACA;;AACA;AACA;AAAA;AACA;AACA;;AACA,8CAJA,CAKA;;AACA;AACA;AACA;AACA,KA1DA;AA2DA,eA3DA,uBA2DA,IA3DA,EA2DA;AAAA;AACA;AACA;;AACA;AACA;AACA;;AACA;AACA,KAlEA;AAmEA,kBAnEA,4BAmEA;AAAA;AACA;AACA;AACA;AACA;AACA,WAFA,MAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA/EA;AAgFA,qBAhFA,+BAgFA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;;AACA;AACA;AACA,WAFA,MAEA;AACA;AACA;;AACA;AAAA;AACA;AACA,WAFA,MAEA;AAAA;AACA;AACA;;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA,KA7GA;AA8GA,0BA9GA,oCA8GA;AAAA;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA,SAJA,MAIA;AACA;AACA,mCADA;AAEA;AAFA;AAIA;AACA,OAXA;AAYA,KA3HA;AA4HA,mBA5HA,2BA4HA,OA5HA,EA4HA;AAAA;;AAAA;AACA;AACA;AACA;;AACA;;AACA,4DAHA,CAGA;;AACA,SAJA,MAIA;AACA;AACA,mCADA;AAEA;AAFA;AAIA;AACA,OAXA;AAYA,KAzIA;AA0IA,oBA1IA,4BA0IA,OA1IA,EA0IA,IA1IA,EA0IA;AAAA;AACA;AACA;AACA;;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KAnJA;AAoJA,gBApJA,wBAoJA,OApJA,EAoJA;AAAA;;AAAA;AACA;AACA;AACA;;AACA;;AACA;AACA,SAJA,MAIA;AACA;AACA,mCADA;AAEA;AAFA;AAIA;AACA,OAXA;AAYA,KAjKA;AAkKA,qBAlKA,6BAkKA,OAlKA,EAkKA,IAlKA,EAkKA;AAAA;AACA;AACA;;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;;AACA;AACA,KA3KA;AA4KA,qBA5KA,6BA4KA,OA5KA,EA4KA;AAAA;;AAAA;AACA;;AACA;AACA;AACA;;AACA;AACA,SAHA,MAGA;AACA;AACA,mCADA;AAEA;AAFA;AAIA;AACA,OAVA;AAWA,KAzLA;AA0LA,yBA1LA,iCA0LA,OA1LA,EA0LA,IA1LA,EA0LA;AAAA;AACA;AACA;AACA;;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KAnMA;AAoMA,oBApMA,4BAoMA,OApMA,EAoMA;AAAA;;AAAA;AACA;;AACA;AACA;AACA;;AACA;;AACA;;AACA;AACA;AACA;AACA,SAPA,MAOA;AACA;AACA,mCADA;AAEA;AAFA;AAIA;AACA,OAdA;AAeA,KArNA;AAsNA,6BAtNA,qCAsNA,OAtNA,EAsNA;AAAA;AACA;;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KA7NA;AA8NA,QA9NA,gBA8NA,OA9NA,EA8NA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA,KArOA;AAsOA,sBAtOA,8BAsOA,MAtOA,EAsOA;AAAA;;AAAA;AACA;AACA;AACA;;AACA;;AACA;AACA,SAJA,MAIA;AACA;AACA,mCADA;AAEA;AAFA;AAIA;AACA,OAXA;AAYA,KAnPA;AAoPA,0BApPA,kCAoPA,IApPA,EAoPA;AAAA;AACA;AACA;AACA,6CAHA,CAIA;;AACA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA;AACA,KAhQA;AAiQA,aAjQA,qBAiQA,MAjQA,EAiQA;AAAA;;AAAA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA,WAFA,MAEA;AACA;AACA;;AACA;AACA,SATA,MASA;AACA;AACA,mCADA;AAEA;AAFA;AAIA;AACA,OAhBA;AAiBA,KAnRA;AAoRA,cApRA,wBAoRA;AAAA;;AAAA;AACA;AACA;AACA;;AACA;AACA,SAHA,MAGA;AACA;AACA,mCADA;AAEA;AAFA;AAIA;AACA,OAVA;AAWA,KAhSA;AAiSA,gBAjSA,0BAiSA;AAAA;;AAAA;AACA;AACA;;AACA;AACA;;AACA;AACA;AACA;AACA,SALA,MAKA;AACA;AACA,mCADA;AAEA;AAFA;AAIA;AACA,OAbA;AAcA,KAhTA;AAiTA,sBAjTA,gCAiTA;AACA;AACA;;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA,WAJA,MAIA;AACA;AACA;AACA;AACA,WAJA,MAIA;AACA;AACA;AACA;AACA,aAHA,MAGA;AACA;AACA;AACA;AACA;AACA;AACA,OAjCA,CAiCA,WAEA;AACA,KAxVA;AAyVA,aAzVA,uBAyVA;AAAA;AACA;AACA,sCADA;AAEA;AACA;AADA;AAFA;AAMA,KAhWA;AAiWA,eAjWA,yBAiWA;AAAA;AAEA;AACA;AACA,0BADA;AAEA;AAFA;AAIA;AACA;;AACA;AACA;AACA,wBADA;AAEA;AAFA;AAIA;AACA;;AACA;AACA;AACA,sCADA;AAEA;AAFA;AAIA;AACA;;AACA;AACA;AACA;AACA,wEADA;AAEA;AAFA;AAIA,SALA,MAKA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA,WAFA,MAEA;AACA,gCADA,CACA;AACA;AACA;AACA,OAfA,MAeA;AACA;AACA;AACA,KA1YA;AA2YA,gBA3YA,0BA2YA;AAAA;AACA;AACA;AACA,OAFA,MAEA;AAAA;AACA;AACA;AACA,KAjZA;AAkZA,cAlZA,sBAkZA,IAlZA,EAkZA;AAAA;AACA;AACA;AACA,KArZA;AAsZA,UAtZA,oBAsZA;AAAA;;AAAA;AACA;AACA;AACA;AACA;;AACA;AACA;;AACA;AACA;AACA;;AACA;;AACA;AACA;;AACA;AACA;;AACA;AACA;AACA,0CADA;AAEA;AACA,0CADA;AAEA;AAFA;AAFA;AAOA,WARA,MAQA;AACA;AACA,sCADA;AAEA;AACA,0CADA;AAEA;AAFA;AAFA;AAOA;AACA,SAnBA,MAmBA;AACA;AACA,mCADA;AAEA;AAFA;AAIA;AACA,OA3BA;AA4BA,KA7bA;AA8bA,cA9bA,sBA8bA,CA9bA,EA8bA;AAAA;AACA;;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;;AACA;AACA,KAtcA;AAucA,eAvcA,uBAucA,CAvcA,EAucA;AAAA;AACA;;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;;AACA;AACA,KA/cA;AAgdA,qBAhdA,6BAgdA,OAhdA,EAgdA,EAhdA,EAgdA;AAAA;AACA;AACA;AACA,KAndA;AAodA,yBApdA,iCAodA,EApdA,EAodA;AAAA;AACA;AACA;AACA,KAvdA;AAwdA,yBAxdA,iCAwdA,OAxdA,EAwdA,EAxdA,EAwdA;AACA;AACA;AAEA,KA5dA;AA6dA,sBA7dA,8BA6dA,OA7dA,EA6dA,IA7dA,EA6dA;AAAA;AACA,kDADA,CACA;;AACA;AACA,KAheA;AAieA,mBAjeA,6BAieA;AAAA;AACA;AACA,KAneA;AAoeA,gBApeA,wBAoeA,QApeA,EAoeA;AAAA;AACA;AACA;AACA,KAveA;AAweA,gBAxeA,wBAweA,CAxeA,EAweA,IAxeA,EAweA;AAAA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA,SAHA,MAGA;AACA;AACA;AACA;AACA,WAHA,MAGA;AACA;AACA;AACA;AACA;AACA,OAhBA,MAgBA;AACA;AACA;AACA,KA5fA;AA6fA,kBA7fA,0BA6fA,IA7fA,EA6fA,IA7fA,EA6fA;AACA;AACA;AACA;AACA;AACA;AACA,OALA,MAKA;AACA;AACA;AACA;AACA;AACA;AACA,KAzgBA;AA0gBA;AACA,kBA3gBA,0BA2gBA,QA3gBA,EA2gBA;AAAA;;AACA;AACA;AACA;;AACA;AACA;AACA;AACA,SAFA,EAEA,GAFA;AAGA,OAJA;AAKA;AAphBA;AA/FA,C;;;;;;;;;;;;;;AC7LA;AAAA;AAAA;AAAA;AAAyuB,CAAgB,2uBAAG,EAAC,C;;;;;;;;;;;ACA7vB;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/settlement/index.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/settlement/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=60591ae5&scoped=true&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=60591ae5&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"60591ae5\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/settlement/index.vue\"\nexport default component.exports","export * from \"-!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--14-0!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=60591ae5&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l1 = _vm.__map(_vm.orderInfo.stores, function(item, index) {\n    var $orig = _vm.__get_orig(item)\n\n    var l0 = _vm.__map(item.goodsList, function(v, i) {\n      var $orig = _vm.__get_orig(v)\n\n      var g0 = v.presaleFlag\n        ? _vm.$utils.formatDate(\n            v.itemPresaleInfoDTO.deliveryStartTime,\n            \"yyyy年MM月dd日hh:mm\"\n          )\n        : null\n      var g1 = v.presaleFlag\n        ? _vm.$utils.formatDate(\n            v.itemPresaleInfoDTO.deliveryEndTime,\n            \"yyyy年MM月dd日hh:mm\"\n          )\n        : null\n      return {\n        $orig: $orig,\n        g0: g0,\n        g1: g1\n      }\n    })\n\n    return {\n      $orig: $orig,\n      l0: l0\n    }\n  })\n\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      return _vm.$Router.push({\n        path: \"/pages/address/index\",\n        query: {\n          id: _vm.orderInfo.address.id\n        }\n      })\n    }\n\n    _vm.e1 = function($event) {\n      return _vm.$Router.push({\n        path: \"/pages/createAddress/index\"\n      })\n    }\n  }\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l1: l1\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"page settlement\" :class=\"(memberType!=4 && memberPriceInfo.type && orderSummaryInfo.achievementAmount!=0)?'active':''\">\r\n\t\t<defaultTitle :dto=\"{title:'填写订单',bottomColor:'#E6E6E6'}\"></defaultTitle>\r\n\t\t<view class=\"settlementAddress\">\r\n\t\t\t<view v-if=\"orderInfo.address\" @click=\"$Router.push({path:'/pages/address/index',query:{id:orderInfo.address.id}})\">\r\n\t\t\t\t<view class=\"settlementTitle\">\r\n\t\t\t\t\t<text>{{orderInfo.address.name}}</text>\r\n\t\t\t\t\t<text class=\"telephone\">{{orderInfo.address.telephone}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"addressMain\" v-if='orderInfo.address'>\r\n\t\t\t\t\t{{orderInfo.address.provinceName+orderInfo.address.cityName+orderInfo.address.districtName+(orderInfo.address.townName?orderInfo.address.townName:\"\")+orderInfo.address.address}}\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"nullAddress\" v-if=\"!orderInfo.address\" @click=\"$Router.push({path:'/pages/createAddress/index'})\">\r\n\t\t\t\t请填写收货地址\r\n\t\t\t</view>\r\n\t\t\t<view class=\"arrow\"></view>\r\n\t\t</view>\r\n\t\t<view class=\"settlementLine\"></view>\n\t\t<view class='addressChange' v-if='orderInfo.address && orderInfo.address.checkStatus==\"2\"'>*由于邮政地址升级，请填写街道地址</view>\r\n\t\t<view class=\"orderMain\" v-for=\"item,index in orderInfo.stores\" :key='index'>\r\n\t\t\t<view class=\"shopName\">\r\n\t\t\t\t{{item.storeName}}\r\n\t\t\t</view>\r\n\t\t\t<view v-for=\"v,i in item.goodsList\" :key='v.goodsId'>\r\n\t\t\t\t<view class=\"goodsCont\">\r\n\t\t\t\t\t<image :src=\"imgBaseUrls+v.goodsImg\" mode=\"\"></image>\r\n\t\t\t\t\t<view class=\"goodsInfo\">\r\n\t\t\t\t\t\t<view class=\"goodsText ellipsis-two\">\r\n\t\t\t\t\t\t\t{{v.goodsName}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"goodSpce\">\r\n\t\t\t\t\t\t\t{{v.saleFieldValue}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"goodsPrice\">\r\n\t\t\t\t\t\t\t<text>¥{{v.originPrice}}</text>\r\n\t\t\t\t\t\t\t<view class=\"goodsNum\" :class=\"limitSettle.isCart?'active':''\">\n\t\t\t\t\t\t\t\t<block v-if=\"!limitSettle.isCart\">\n\t\t\t\t\t\t\t\t\t<view class=\"jian\" @click=\"goodsNumChange(v,false)\">-</view>\n\t\t\t\t\t\t\t\t\t<input type=\"number\" v-model=\"v.goodsNum\" @blur='goodsNumBlur($event,v)'/>\n\t\t\t\t\t\t\t\t\t<view class=\"jia\" @click=\"goodsNumChange(v,true)\">+</view>\n\t\t\t\t\t\t\t\t</block>\n\t\t\t\t\t\t\t\t<block v-else>\n\t\t\t\t\t\t\t\t\tx{{v.goodsNum}}\n\t\t\t\t\t\t\t\t</block>\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\n\t\t\t\t<view class=\"deliveryTime\" v-if=\"v.presaleFlag\">\n\t\t\t\t\t<image :src=\"imgBaseUrls+'appletsImages/openBookingIcon.png'\" mode=\"\"></image>\n\t\t\t\t\t发货时间：{{$utils.formatDate(v.itemPresaleInfoDTO.deliveryStartTime,\"yyyy年MM月dd日hh:mm\")}} ~ {{$utils.formatDate(v.itemPresaleInfoDTO.deliveryEndTime,\"yyyy年MM月dd日hh:mm\")}}\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"separatePromotion\" v-if=\"v.separatePromotion\">\r\n\t\t\t\t\t<text>{{v.separatePromotion.name}}</text>\r\n\t\t\t\t\t<text class=\"marking_plus\">{{v.separatePromotion.typeName}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"\">\r\n\t\t\t\t\t<view class=\"fmGoodsMsg\" v-for=\"l,o in v.promotions\" :key='o' v-if=\"l.typeCode==19\">\r\n\t\t\t\t\t\t<text class=\"promotionsActivityBox\">{{l.typeName}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"fmGoodsMsg\" v-for=\"l,o in v.promotions\" :key='o' v-else>\r\n\t\t\t\t\t\t{{l.name?l.name:\"\"}}\r\n\t\t\t\t\t\t<text class=\"activityBox\">{{l.typeName}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view class=\"fmGoodsMsg\">\r\n\t\t\t\t<text>运费</text>\r\n\t\t\t\t<text class=\"colorChange\">{{freightData[item.storeId]?\"￥\"+freightData[item.storeId]:\"包邮\"}}</text>\r\n\t\t\t</view>\r\n\t\t\t<!-- 促销活动 -->\r\n\t\t\t<storePromotionView v-if='storePromotion[item.storeId] && storePromotion[item.storeId].length' :choosePromotionId='couponParams[item.storeId].promotionId' :storePromotion='storePromotion'  :storeId='item.storeId' :storeName='item.storeName' @promotionChange='promotionCouponChange'></storePromotionView>\r\n\t\t\t<!-- 店铺优惠券 -->\r\n\t\t\t<storeCoupons v-if='storeCouponsInfo[item.storeId] && storeCouponsInfo[item.storeId].availableList&&storeCouponsInfo[item.storeId].availableList.length' :storeCouponsInfo='storeCouponsInfo' :chooseStoreId='freightParams[item.storeId].couponId' :storeId='item.storeId' :storeName='item.storeName' @couponChange='storeCouponChange'></storeCoupons>\r\n\t\t\t<view class=\"fmGoodsMsg\">\r\n\t\t\t\t留言<input type=\"text\" v-model=\"orderMessage[item.storeId].orderMessage\" maxlength=\"40\" placeholder=\"选填,限40字以内\" />\r\n\t\t\t</view>\r\n\t\t\t<view class=\"fmGoodsMsg\">\r\n\t\t\t\t<view></view>\r\n\t\t\t\t<view class=\"price\">共{{item.goodsNum}}件商品 合计：<text class=\"priceSymbol\">￥</text> <text class=\"symbolPrice\">{{storeAmountData[item.storeId]}}</text>\r\n\t\t\t\t\t(含运费¥{{freightData[item.storeId]}})</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 平台优惠券 -->\r\n\t\t<platformCoupons v-if='platforCouponsInfo.availableList && platforCouponsInfo.availableList.length' :platforCouponsInfo='platforCouponsInfo' :choosePlatfromId='orderSummaryParams.platformPromotionId' @couponChange='plateformCouponChange'></platformCoupons>\r\n\t\t<view class=\"integralMain \" v-if=\"memberType==4\">\n\t\t\t<text class=\"partnerPref\">合伙人优惠</text>\n\t\t\t<text class=\"intergalInfo partnerPrefNum\">-¥{{orderSummaryInfo.distributorDiscount}}</text>\n\t\t</view>\n\t\t<view class=\"integralMain\">\r\n\t\t\t<text>使用库豆</text>\r\n\t\t\t<text class=\"intergalInfo\" v-if=\"orderGoldCount.accountGold>0 && orderGoldCount.canUseGold\">库豆{{orderGoldCount.accountGold}},本次可抵用￥{{orderGoldCount.canUseGold}}</text>\r\n\t\t\t<text class=\"intergalInfo\" v-if=\"orderGoldCount.accountGold>0 && !orderGoldCount.canUseGold\">购买的商品不支持使用库豆支付</text>\r\n\t\t\t<text class=\"intergalInfo\" v-if=\"orderGoldCount.accountGold<=0\">本次无可用库豆</text>\r\n\t\t\t<view class=\"intergalBtn\">\r\n\t\t\t\t<switch style=\"transform: scale(0.7,0.7);\" :disabled='orderGoldCount.canUseGold<=0'  :checked=\"deductionFlag.gold\" color='#FF1558' @change=\"goldChange\" />\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"integralMain scoreBox\">\r\n\t\t\t<text>使用积分</text>\r\n\t\t\t<text class=\"intergalInfo\" v-if=\"orderScoreCount.usefulScoreNum>0\">本次可用{{orderScoreCount.usefulScoreNum}},本次可抵用￥{{orderScoreCount.score}}</text>\r\n\t\t\t<text class=\"intergalInfo\" v-if=\"orderScoreCount.usefulScoreNum<=0\">本次无可用积分</text>\r\n\t\t\t<view class=\"intergalBtn\">\r\n\t\t\t\t<switch style=\"transform: scale(0.7,0.7);\" :disabled='orderScoreCount.score<=0' :checked=\"deductionFlag.score\" color='#FF1558' @change=\"scoreChange\" />\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class='deduction'>\r\n\t\t\t<text>商品金额</text>\r\n\t\t\t<text>￥{{orderSummaryInfo.goodsFinalAmount}}</text>\r\n\t\t</view>\r\n\t\t<view class='deduction' v-if=\"orderSummaryInfo.freightAmount>0\">\r\n\t\t\t<text>运费</text>\r\n\t\t\t<text>￥{{orderSummaryInfo.freightAmount}}</text>\r\n\t\t</view>\r\n\t\t<view class='deduction' v-if='orderSummaryInfo.couponAmount>0'>\r\n\t\t\t<text>优惠券</text>\r\n\t\t\t<text>-￥{{orderSummaryInfo.couponAmount}}</text>\r\n\t\t</view>\r\n\t\t<view class='deduction' v-if='orderSummaryInfo.socreAmount>0'>\r\n\t\t\t<text>积分抵扣</text>\r\n\t\t\t<text>-￥{{orderSummaryInfo.socreAmount}}</text>\r\n\t\t</view>\r\n\t\t<view class='deduction' v-if=\"orderSummaryInfo.goldAmount>0\">\r\n\t\t\t<text>库豆抵扣</text>\r\n\t\t\t<text>-￥{{orderSummaryInfo.goldAmount}}</text>\r\n\t\t</view>\r\n\t\t<view class='deduction performance' v-if=\"memberType==4\">\r\n\t\t\t<text>本单商品计有效业绩</text>\r\n\t\t\t<text>￥{{orderSummaryInfo.performanceAmount}}</text>\r\n\t\t</view>\n\t\t<view class=\"cartHint\" v-if=\"orderSummaryInfo.achievementAmount!=0 && memberType!=4 && (memberPriceInfo.type || memberPriceInfo.arriveType)\">\n\t\t\t<view class=\"cartPrice\">\n\t\t\t\t<view v-if=\"memberPriceInfo.arriveType\">\n\t\t\t\t\t当前结算金额已满足<text>{{memberPriceInfo.arriveType}}</text>升级条件\n\t\t\t\t</view>\n\t\t\t\t<block v-if=\"memberPriceInfo.price\">\n\t\t\t\t\t还差<text class=\"memberGoodsPrice\">{{memberPriceInfo.price}}</text>元，\n\t\t\t\t</block>\n\t\t\t\t<block v-if=\"!memberPriceInfo.price\">下单</block>\n\t\t\t\t即可升级为{{memberPriceInfo.type}}\n\t\t\t</view>\n\t\t\t<view class=\"goBuyBtn\" @click=\"gotoGoods\" v-if=\"memberPriceInfo.price\">\n\t\t\t\t去凑单&nbsp;›\n\t\t\t</view>\n\t\t</view>\r\n\t\t<view class=\"goPayBox\">\r\n\t\t\t<view class=\"payText\">实付款：<text class=\"symbol\">￥</text><text class=\"payAmount\">{{orderSummaryInfo.payAmount?orderSummaryInfo.payAmount:0}}</text></view>\r\n\t\t\t<view class=\"submitBtn\" @click=\"submitOrder\">提交订单</view>\r\n\t\t</view>\r\n\t\t<!-- 输入密码 -->\r\n\t\t<pswPopup ref='pswPopup' @openForgetPopup='openForgetPopup' @submitPay='setSubmitPsw'></pswPopup>\r\n\t\t<!-- 设置支付密码 -->\r\n\t\t<setPayPwd ref='setPayPwd' :payInfo='orderInfo' @openPswPopup='openPswPopup' @submitPay='setSubmitPsw'></setPayPwd>\r\n\t\t<!-- 忘记密码 -->\r\n\t\t<forgetPayPsw ref='forgetPayPsw' :payInfo='orderInfo' @openPswPopup='openPswPopup' @submitPay='setSubmitPsw'></forgetPayPsw>\r\n\t\t<!-- 输入支付验证码 -->\r\n\t\t<verificationCode ref='verificationCode' :payInfo='orderInfo' @codeSubmit='codeSubmit'></verificationCode>\r\n\t\t<!-- #ifdef MP-WEIXIN -->\r\n\t\t\t<view v-if=\"(hideFMCanvas != undefined) && !hideFMCanvas\">\r\n\t\t\t\t<canvas canvas-id='tdcanvas' style='margin-top:200rpx'></canvas>\r\n\t\t\t</view>\r\n\t\t<!-- #endif  -->\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\t/* \r\n\t订单逻辑\r\n\t\t初始化信息时需判断购物车还是商品详情的入口：通过地址栏的goodsNum  为真商品详情入口   否则为购物车\r\n\t\t初始化信息成功后  获取实名认证\tgetDefaultRealnameInfo  \r\n\t\t计算店铺下的商品总数 并且标记是否存在无货商品  goodStockState\r\n\t\t整合店铺商品数据 为接下来的接口做准备  initShopGoodsInfo  data中新建对象storeInfo  将每个店铺的id作为key  \r\n\t */\r\n\timport tradeApi from '@/api/trade/index.js';\r\n\timport memberApi from '@/api/member/index.js'\r\n\timport storeCoupons from './storeDiscount.vue'\t//店铺优惠券\r\n\timport platformCoupons from './platformCoupons.vue'\t//平台优惠券\r\n\timport storePromotionView from './storePromotionView.vue'\t//促销活动\r\n\timport setPayPwd from '@/pages/pay/setPayPsw/index.vue'\r\n\timport forgetPayPsw from '@/pages/pay/forgetPayPsw/index.vue'\r\n\timport pswPopup from '@/pages/pay/passwordPopup/index.vue'\r\n\timport verificationCode from '@/pages/pay/verificationCode/index.vue'\r\n\t\r\n\t// #ifdef MP-WEIXIN\r\n\timport fmagent from '@/common/js/fmagent.js'\r\n\t// #endif\r\n\t\r\n\texport default {\r\n\t\t//  #ifdef MP-WEIXIN\r\n\t\tmixins:[fmagent],\r\n\t\t// #endif\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tgoodStockState:false,\t//标记是否存在无货商品   true为存在  false为不存在\r\n\t\t\t\torderInfo: {},\r\n\t\t\t\thaitaoInfo: {},\r\n\t\t\t\timgBaseUrls: \"\",\r\n\t\t\t\torderGoldCount: { //库豆\r\n\t\t\t\t\tcanUseGold: \"\", //可抵用金额\r\n\t\t\t\t\taccountGold: \"\", //库豆总额\r\n\t\t\t\t},\r\n\t\t\t\tstoreInfo:{\t//保存每个店铺下的商品数据  id为key   值为数据\r\n\t\t\t\t},\r\n\t\t\t\tcouponParams:{\t//店铺优惠券请求参数\r\n\t\t\t\t},\r\n\t\t\t\tfreightParams:{\t\t//运费包邮请求参数\r\n\t\t\t\t},\r\n\t\t\t\tstoreAmountParams:{\t//订单金额请求参数\r\n\t\t\t\t},\r\n\t\t\t\tplatformPromotsParams:{\t//平台优惠券请求参数\r\n\t\t\t\t\tlotteryId:'',\r\n\t\t\t\t\taddressId:'',\r\n\t\t\t\t\torders:[]\r\n\t\t\t\t},\r\n\t\t\t\torderSummaryParams:{},//请求总订单价格参数\r\n\t\t\t\torderScoreCount: { //积分\r\n\t\t\t\t\tusefulScoreNum: \"\", //可用积分\r\n\t\t\t\t\tscore: \"\" //抵扣金额\r\n\t\t\t\t},\r\n\t\t\t\torderSummaryInfo:{},\t//实付金额信息\r\n\t\t\t\tdeductionFlag:{\t//所有抵扣的开关\r\n\t\t\t\t\tscore:false,\t//积分开关\r\n\t\t\t\t\tgold:true,\t//库豆\r\n\t\t\t\t},\r\n\t\t\t\torderMessage:{\t//留言信息\r\n\t\t\t\t\t\r\n\t\t\t\t},\r\n\t\t\t\tstoreCouponsInfo:{\t//店铺优惠券数据\r\n\t\t\t\t\t\r\n\t\t\t\t},\r\n\t\t\t\tplatforCouponsInfo:{\t//平台优惠券\r\n\t\t\t\t\t\r\n\t\t\t\t},\r\n\t\t\t\tstorePromotion:{\t//店铺促销活动展示\r\n\t\t\t\t\t\r\n\t\t\t\t},\r\n\t\t\t\tstoreAmountData:{\t//店铺金额\r\n\t\t\t\t\t\r\n\t\t\t\t},\r\n\t\t\t\tfreightData:{\t//运费金额\r\n\t\t\t\t\t\r\n\t\t\t\t},\n\t\t\t\tsubmitFlag:true,\t//提交开关、做防抖\r\n\t\t\t\tmemberType:uni.getStorageSync(\"userInfo\")?JSON.parse(uni.getStorageSync(\"userInfo\")).plusFlag:\"\",\r\n\t\t\t\tmemberPriceInfo:{\n\t\t\t\t\tprice:0,\n\t\t\t\t\ttype:\"\",\n\t\t\t\t\tarriveType:\"\"\n\t\t\t\t},\n\t\t\t\tlimitSettle:{\n\t\t\t\t\tisCart:false,\n\t\t\t\t\tstockNumber:0,\n\t\t\t\t\ttime:\"\"\n\t\t\t\t}\n\t\t\t}\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\t//#ifdef MP-WEIXIN\r\n\t\t\t\tthis.fmagentInit()\r\n\t\t\t//#endif\r\n\t\t\t\r\n\t\t\tthis.zhuge.track(\"填写订单-落地页\")\r\n\t\t\tfor(let i in this.deductionFlag){\r\n\t\t\t\tthis.deductionFlag[i]=false\r\n\t\t\t}\n\t\t\tthis.limitSettle.stockNumber = this.$Route.query.stockNumber\r\n\t\t\tthis.imgBaseUrls = this.$config.imgBaseUrl;\r\n\t\t\tthis.pageInitParams()\r\n\t\t},\r\n\t\tbeforeRouteLeave(to, from, next){\t//页面销毁时清除地址\r\n\t\t\tuni.removeStorageSync(\"addressInfo\");\r\n\t\t\tnext()\r\n\t\t},\r\n\t\tcomponents:{\r\n\t\t\tstoreCoupons,\r\n\t\t\tplatformCoupons,\r\n\t\t\tstorePromotionView,\r\n\t\t\tsetPayPwd,\r\n\t\t\tforgetPayPsw,\r\n\t\t\tverificationCode,\r\n\t\t\tpswPopup\r\n\t\t},\r\n\t\tmethods: {\n\t\t\tpageInitParams(goodsNum){\n\t\t\t\tlet addressInfo = uni.getStorageSync(\"addressInfo\")?JSON.parse(uni.getStorageSync(\"addressInfo\")):\"\"\n\t\t\t\tif (this.$Route.query.goodsNum) {\n\t\t\t\t\tthis.pageInit({\n\t\t\t\t\t\tgoodsId: this.$Route.query.cartIds,\n\t\t\t\t\t\tgoodsNum: goodsNum?goodsNum:this.$Route.query.goodsNum,\n\t\t\t\t\t\taddressId:addressInfo?addressInfo.id:\"\",\n\t\t\t\t\t\tinviterCode:uni.getStorageSync(\"routerShareNumber\")?uni.getStorageSync(\"routerShareNumber\"):\"\",\n\t\t\t\t\t\tinviterType:uni.getStorageSync(\"routerShareNumber\")?1:\"\",\n\t\t\t\t\t\tsinglePromotionId:this.$Route.query.singlePromotionId?this.$Route.query.singlePromotionId:\"\",\n\t\t\t\t\t\ttransferOrderId:this.$Route.query.transferOrderId\n\t\t\t\t\t})\n\t\t\t\t\tthis.limitSettle.isCart = false\n\t\t\t\t} else {\n\t\t\t\t\tthis.pageInit({\n\t\t\t\t\t\tcartIds: this.$Route.query.cartIds.split(\",\"),\n\t\t\t\t\t\taddressId:addressInfo?addressInfo.id:\"\",\n\t\t\t\t\t})\n\t\t\t\t\tthis.limitSettle.isCart = true\n\t\t\t\t}\n\t\t\t},\r\n\t\t\tpageInit(params) { //初始化订单信息\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle:\"加载中...\"\r\n\t\t\t\t})\r\n\t\t\t\ttradeApi.pageInit(params).then(res => {\r\n\t\t\t\t\tif (res.data.code == 200) {\r\n\t\t\t\t\t\tthis.orderInfo = res.data.data;\r\n\t\t\t\t\t\tthis.getDefaultRealnameInfo();\t//实名认证\r\n\t\t\t\t\t\tthis.initshopGoodsNum() //计算各个店铺下的商品总数 \r\n\t\t\t\t\t\tthis.initGoodsPrice();\t//计算各个商品的价格\r\n\t\t\t\t\t\tthis.initShopGoodsInfo() //将店铺中的商品数据整合  为下一个接口做准备 \r\n\t\t\t\t\t\tfor(let i=0;i<this.orderInfo.stores.length;i++){\r\n\t\t\t\t\t\t\tthis.storePromotions(this.orderInfo.stores[i].storeId);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle:res.data.message,\n\t\t\t\t\t\t\ticon:\"none\"\n\t\t\t\t\t\t})\n\t\t\t\t\t\tthis.pageInitParams()\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tinitshopGoodsNum() { //初始化每个店铺下有多少个商品  \r\n\t\t\t\tthis.goodStockState = false\r\n\t\t\t\tfor (let i = 0; i < this.orderInfo.stores.length; i++) {\r\n\t\t\t\t\tthis.orderInfo.stores[i].goodsNum = 0;\r\n\t\t\t\t\tfor (let j = 0; j < this.orderInfo.stores[i].goodsList.length; j++) {\r\n\t\t\t\t\t\tif(!this.orderInfo.stores[i].goodsList[j].stockState){\t//是否为无库存商品  false为无货\r\n\t\t\t\t\t\t\tthis.goodStockState = true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.orderInfo.stores[i].goodsNum++;\r\n\t\t\t\t\t\t//初始化属性规格\r\n\t\t\t\t\t\tthis.orderInfo.stores[i].goodsList[j].saleFieldValue = this.compileSpec(this.orderInfo.stores[i].goodsList[j].saleFieldValue)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcompileSpec(spce) { //编译默认规格例如  颜色：红色，尺码：40 -> 红色 40\r\n\t\t\t\tvar newSpec = '';\r\n\t\t\t\tvar specArr = spce.split(',');\r\n\t\t\t\tfor (let i in specArr) {\r\n\t\t\t\t\tnewSpec += specArr[i].split(':')[1] + ' ';\r\n\t\t\t\t}\r\n\t\t\t\treturn newSpec;\r\n\t\t\t},\r\n\t\t\tinitGoodsPrice(){\t//计算商品价格\r\n\t\t\t\tfor (let i = 0; i < this.orderInfo.stores.length; i++) {\r\n\t\t\t\t\tfor (let j = 0; j < this.orderInfo.stores[i].goodsList.length; j++) {\r\n\t\t\t\t\t\tif(this.orderInfo.stores[i].goodsList[j].promotions && this.orderInfo.stores[i].goodsList[j].promotions.length){\r\n\t\t\t\t\t\t\tthis.orderInfo.stores[i].goodsList[j].originPrice = this.orderInfo.stores[i].goodsList[j].promotions[0].goodsPrice\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tif(this.orderInfo.stores[i].goodsList[j].separatePromotion && this.orderInfo.stores[i].goodsList[j].separatePromotion.id){\r\n\t\t\t\t\t\t\t\tthis.orderInfo.stores[i].goodsList[j].originPrice = this.orderInfo.stores[i].goodsList[j].separatePromotion.goodsPrice\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tinitShopGoodsInfo() { //初始化店铺下的商品信息 做整合\r\n\t\t\t\tfor (let i = 0; i < this.orderInfo.stores.length; i++) {\r\n\t\t\t\t\tthis.$set(this.orderMessage, this.orderInfo.stores[i].storeId, {})\r\n\t\t\t\t\tthis.$set(this.orderMessage[this.orderInfo.stores[i].storeId],\"orderMessage\", \"\")\r\n\t\t\t\t\tthis.$set(this.storeInfo, this.orderInfo.stores[i].storeId, {})\r\n\t\t\t\t\tthis.$set(this.storeInfo[this.orderInfo.stores[i].storeId], \"storeId\", this.orderInfo.stores[i].storeId)\r\n\t\t\t\t\tthis.$set(this.storeInfo[this.orderInfo.stores[i].storeId], \"goodsList\", [])\r\n\t\t\t\t\tthis.$set(this.storeInfo[this.orderInfo.stores[i].storeId], \"lotteryId\", \"\")\r\n\t\t\t\t\tfor (let j = 0; j < this.orderInfo.stores[i].goodsList.length; j++) {\r\n\t\t\t\t\t\tlet obj = {};\r\n\t\t\t\t\t\tobj.inviterType = this.orderInfo.stores[i].goodsList[j].inviterType;\r\n\t\t\t\t\t\tobj.inviterId = this.orderInfo.stores[i].goodsList[j].inviterId;\r\n\t\t\t\t\t\tif (this.orderInfo.stores[i].goodsList[j].promotions && this.orderInfo.stores[i].goodsList[j].promotions.length > 0) {\r\n\t\t\t\t\t\t\tobj.promotionId = this.orderInfo.stores[i].goodsList[j].promotions[0].id;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tobj.promotionId = \"\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!this.$Route.query.goodsNum) {\t//购物车\r\n\t\t\t\t\t\t\tobj.cartId = this.orderInfo.stores[i].goodsList[j].cartId;\r\n\t\t\t\t\t\t} else if (this.$Route.query.goodsNum) {\t//商品详情页\r\n\t\t\t\t\t\t\tobj.goodsId = this.orderInfo.stores[i].goodsList[j].goodsId;\r\n\t\t\t\t\t\t\tobj.goodsNum = this.orderInfo.stores[i].goodsList[j].goodsNum;\r\n\t\t\t\t\t\t\tif(this.$Route.query.singlePromotionId){\r\n\t\t\t\t\t\t\t\tobj.singlePromotionId = this.$Route.query.singlePromotionId\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.storeInfo[this.orderInfo.stores[i].storeId].goodsList.push(obj)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgetDefaultRealnameInfo() { //实名认证获取窗口\r\n\t\t\t\tmemberApi.getDefaultRealnameInfo().then(res => {\r\n\t\t\t\t\tif (res.data.code == 200) {\r\n\t\t\t\t\t\tif (res.data.data && res.data.data.realname) {\r\n\t\t\t\t\t\t\tthis.haitaoInfo = res.data.data\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: res.data.message,\r\n\t\t\t\t\t\t\ticon: \"none\"\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tstorePromotions(storeId) { //获取店铺促销信息\r\n\t\t\t\ttradeApi.storePromotions(this.storeInfo[storeId]).then(res => {\r\n\t\t\t\t\tif (res.data.code == 200) {\r\n\t\t\t\t\t\tthis.initCouponParams(storeId,res.data.data);\r\n\t\t\t\t\t\tthis.storeCoupons(storeId);\r\n\t\t\t\t\t\tthis.initStorePromotion(storeId,res.data.data)\t//初始化店铺促销活动展示信息\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: res.data.message,\r\n\t\t\t\t\t\t\ticon: \"none\"\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tinitCouponParams(storeId,data) {\t//初始化店铺优惠券请求参数数据\r\n\t\t\t\tlet params = JSON.stringify(this.storeInfo);\r\n\t\t\t\tthis.$set(this.couponParams,storeId,JSON.parse(params)[storeId]);\r\n\t\t\t\tthis.$set(this.couponParams[storeId],'lotteryId',\"\");\r\n\t\t\t\tif(data.length>0){\r\n\t\t\t\t\tthis.$set(this.couponParams[storeId],'promotionId',data[0].id)\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.$set(this.couponParams[storeId],'promotionId',\"\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tstoreCoupons(storeId) { //获取店铺优惠券信息\r\n\t\t\t\ttradeApi.storeCoupons(this.couponParams[storeId]).then(res => {\r\n\t\t\t\t\tif (res.data.code == 200) {\r\n\t\t\t\t\t\tthis.$set(this.storeCouponsInfo,storeId,res.data.data)\r\n\t\t\t\t\t\tthis.initFreightParams(storeId,res.data.data.availableList);\r\n\t\t\t\t\t\tthis.freightPromotions(storeId);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: res.data.message,\r\n\t\t\t\t\t\t\ticon: \"none\"\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tinitFreightParams(storeId,data){\t//初始化包邮活动参数\r\n\t\t\t\tlet params = JSON.stringify(this.couponParams);\r\n\t\t\t\tthis.$set(this.freightParams,storeId,JSON.parse(params)[storeId])\r\n\t\t\t\tif(data.length>0){\r\n\t\t\t\t\tthis.$set(this.freightParams[storeId],'couponId',data[0].id);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.$set(this.freightParams[storeId],'couponId',\"\");\r\n\t\t\t\t}\r\n\t\t\t\tthis.$set(this.freightParams[storeId],'lotteryId','');\r\n\t\t\t},\r\n\t\t\tfreightPromotions(storeId){\t//获取店铺包邮活动信息\r\n\t\t\t\tthis.freightParams[storeId].addressId = this.orderInfo.address?this.orderInfo.address.id:\"\"\r\n\t\t\t\ttradeApi.freightPromotions(this.freightParams[storeId]).then(res=>{\r\n\t\t\t\t\tif(res.data.code==200){\r\n\t\t\t\t\t\tthis.initStoreAmountParams(storeId,res.data.data);\r\n\t\t\t\t\t\tthis.storeOrderAmount(storeId)\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle:res.data.message,\r\n\t\t\t\t\t\t\ticon:\"none\"\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tinitStoreAmountParams(storeId,data){//初始化店铺订单金额请求参数\r\n\t\t\t\tlet params = JSON.stringify(this.freightParams);\r\n\t\t\t\tthis.$set(this.storeAmountParams,storeId,JSON.parse(params)[storeId])\r\n\t\t\t\tthis.$set(this.storeAmountParams[storeId],'lotteryId','')\r\n\t\t\t\tif(data){\r\n\t\t\t\t\tthis.$set(this.storeAmountParams[storeId],'freightPromotionId',data.id);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.$set(this.storeAmountParams[storeId],'freightPromotionId',\"\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tstoreOrderAmount(storeId) { //获取店铺订单金额\r\n\t\t\t\tthis.storeAmountParams[storeId].addressId = this.orderInfo.address?this.orderInfo.address.id:\"\"\r\n\t\t\t\ttradeApi.storeOrderAmount(this.storeAmountParams[storeId]).then(res => {\r\n\t\t\t\t\tif (res.data.code == 200) {\r\n\t\t\t\t\t\tthis.$set(this.storeAmountData,storeId,res.data.data.payPrice)\r\n\t\t\t\t\t\tthis.$set(this.freightData,storeId,res.data.data.freightAmount)\r\n\t\t\t\t\t\tthis.initPlatformPromotsParams(storeId);\r\n\t\t\t\t\t\tif(this.platformPromotsParams.orders.length == this.orderInfo.stores.length){\r\n\t\t\t\t\t\t\tthis.platformPromotions(this.platformPromotsParams)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: res.data.message,\r\n\t\t\t\t\t\t\ticon: \"none\"\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tinitPlatformPromotsParams(storeId){\t//初始化平台优惠券请求参数\r\n\t\t\t\tthis.platformPromotsParams.addressId = this.orderInfo.address?this.orderInfo.address.id:\"\"\r\n\t\t\t\t if(!this.isCF(storeId)){\r\n\t\t\t\t\tthis.platformPromotsParams.orders.push(this.storeAmountParams[storeId])\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.$set(this.platformPromotsParams.orders,this.isCF(storeId),this.storeAmountParams[storeId]);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tisCF(storeId){\r\n\t\t\t\tfor(let v in this.platformPromotsParams.orders){\r\n\t\t\t\t\tif(this.platformPromotsParams.orders[v].storeId == storeId){\r\n\t\t\t\t\t\treturn v;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tplatformPromotions(params) { //获取平台优惠券信息\r\n\t\t\t\ttradeApi.platformPromotions(params).then(res => {\r\n\t\t\t\t\tif (res.data.code == 200) {\r\n\t\t\t\t\t\tthis.platforCouponsInfo = res.data.data\r\n\t\t\t\t\t\tthis.initOrderSummaryParams(res.data.data.availableList);\r\n\t\t\t\t\t\tthis.orderGold(this.orderSummaryParams)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: res.data.message,\r\n\t\t\t\t\t\t\ticon: \"none\"\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tinitOrderSummaryParams(data){\t//订单总价格请求参数\r\n\t\t\t\tlet params = JSON.stringify(this.platformPromotsParams);\r\n\t\t\t\tthis.orderSummaryParams = JSON.parse(params);\r\n\t\t\t\tthis.orderSummaryParams.lotteryId =  '';\r\n\t\t\t\t// this.PtCPrice.num=data.length\r\n\t\t\t\tif(data.length>0){\r\n\t\t\t\t\tthis.$set(this.orderSummaryParams,'platformPromotionId',data[0].id);\n\t\t\t\t\tthis.$set(this.orderSummaryParams,'transferOrderId',this.$Route.query.transferOrderId);\n\t\t\t\t}else{\n\t\t\t\t\tthis.$set(this.orderSummaryParams,'transferOrderId',this.$Route.query.transferOrderId);\r\n\t\t\t\t\tthis.$set(this.orderSummaryParams,'platformPromotionId','');\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\torderGold(params) { //获取权益金\r\n\t\t\t\ttradeApi.orderGold(params).then(res => {\r\n\t\t\t\t\tif (res.data.code == 200) {\r\n\t\t\t\t\t\tthis.orderSummaryParams.goldAmount=res.data.data.canUseGold\r\n\t\t\t\t\t\tthis.orderGoldCount = res.data.data;\r\n\t\t\t\t\t\tif(!this.orderGoldCount.canUseGold){\r\n\t\t\t\t\t\t\tthis.deductionFlag.gold = false\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tthis.deductionFlag.gold = true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.orderScore()\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: res.data.message,\r\n\t\t\t\t\t\t\ticon: \"none\"\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\torderScore() { //获取积分信息\r\n\t\t\t\ttradeApi.orderScore(this.orderSummaryParams).then(res => {\r\n\t\t\t\t\tif (res.data.code == 200) {\r\n\t\t\t\t\t\tthis.orderScoreCount = res.data.data;\r\n\t\t\t\t\t\tthis.orderSummary()\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: res.data.message,\r\n\t\t\t\t\t\t\ticon: \"none\"\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\torderSummary() { //获取总订单价格\r\n\t\t\t\ttradeApi.orderSummary(this.orderSummaryParams).then(res => {\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\tif (res.data.code == 200) {\r\n\t\t\t\t\t\tthis.orderSummaryInfo = res.data.data;\n\t\t\t\t\t\tif(this.memberType != 4){\n\t\t\t\t\t\t\tthis.getMemberPriceInfo()\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: res.data.message,\r\n\t\t\t\t\t\t\ticon: \"none\"\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\n\t\t\tgetMemberPriceInfo(){\n\t\t\t\tthis.memberPriceInfo.arriveType=\"\"\n\t\t\t\tthis.memberPriceInfo.type = \"\"\n\t\t\t\ttry{\n\t\t\t\t\tlet memberConfig = JSON.parse(uni.getStorageSync(\"memberConfig\"));\n\t\t\t\t\tlet userInfo = JSON.parse(uni.getStorageSync(\"userInfo\"))\n\t\t\t\t\tlet memberPrie = 0;\n\t\t\t\t\tif(userInfo.plusFlag==memberConfig[memberConfig.length-1].type){\n\t\t\t\t\t\treturn false\n\t\t\t\t\t}\n\t\t\t\t\tfor(let i=0;i<memberConfig.length;i++){\n\t\t\t\t\t\tif(memberConfig[i].type == userInfo.plusFlag){\n\t\t\t\t\t\t\tif(memberConfig[i].price>userInfo.totalAmountDuring){\n\t\t\t\t\t\t\t\tmemberPrie = memberConfig[i].price - userInfo.totalAmountDuring\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfor(let i=1;i<memberConfig.length;i++){\n\t\t\t\t\t\tif((this.orderSummaryInfo.achievementAmount+userInfo.totalAmountDuring+memberPrie)<memberConfig[i].price){\n\t\t\t\t\t\t\tthis.memberPriceInfo.price = (memberConfig[i].price - this.orderSummaryInfo.achievementAmount - userInfo.totalAmountDuring).toFixed(2)\n\t\t\t\t\t\t\tthis.memberPriceInfo.type = memberConfig[i].name;\n\t\t\t\t\t\t\treturn true\n\t\t\t\t\t\t}else if(i>0 && memberPrie==0){\n\t\t\t\t\t\t\tthis.memberPriceInfo.arriveType = memberConfig[i].name\n\t\t\t\t\t\t\tthis.memberPriceInfo.type = memberConfig[i].name;\n\t\t\t\t\t\t\tthis.memberPriceInfo.price = \"\"\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tif(memberConfig[i].price - this.orderSummaryInfo.achievementAmount - userInfo.totalAmountDuring<=0){\n\t\t\t\t\t\t\t\tthis.memberPriceInfo.arriveType = memberConfig[i].name;\n\t\t\t\t\t\t\t\tthis.memberPriceInfo.price = \"\"\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tthis.memberPriceInfo.price = (memberConfig[i].price - this.orderSummaryInfo.achievementAmount - userInfo.totalAmountDuring).toFixed(2)\n\t\t\t\t\t\t\t\tthis.memberPriceInfo.type = memberConfig[i].name;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}catch(e){\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t},\n\t\t\tgotoGoods(){\t//去凑单\n\t\t\t\tthis.$Router.push({\n\t\t\t\t\tpath:\"/pages/goodsList/index\",\n\t\t\t\t\tquery:{\n\t\t\t\t\t\tpriceRangeLeft:this.memberPriceInfo.price\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\r\n\t\t\tsubmitOrder() { //提交订单判断\n\t\t\t\t\r\n\t\t\t\tif(!this.orderInfo.address){\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle:\"请设置收货地址\",\r\n\t\t\t\t\t\ticon:\"none\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif(this.orderInfo.address && this.orderInfo.address.checkStatus==2){\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle:\"请修改地址\",\r\n\t\t\t\t\t\ticon:\"none\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif(this.goodStockState){\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle:\"下单商品存在无货商品，请重新选择后下单\",\r\n\t\t\t\t\t\ticon:\"none\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif(this.orderSummaryInfo.payAmount==0 && this.deductionFlag.score){\r\n\t\t\t\t\tif(this.orderInfo.riskCheck.riskLevel == \"HIGH\"){\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle:\"抱歉检测到本次交易异常，为了您的账号安全，请稍后再试或联系客服处理，联系方式：400-100-8246\",\r\n\t\t\t\t\t\t\ticon:\"none\"\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}else if(this.orderInfo.riskCheck.riskLevel == \"MID\"){\r\n\t\t\t\t\t\tthis.$refs.verificationCode.openVerificationCode();\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tif(this.orderInfo.riskCheck.firstAddrMobile && !this.orderInfo.riskCheck.monthNewMember && this.orderScoreCount.score>this.orderInfo.riskCheck.unsafeAmt){\r\n\t\t\t\t\t\t\tthis.$refs.verificationCode.openVerificationCode();\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tthis.openPswPopup()//打开密码弹窗\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.submit()\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\topenPswPopup(){\t//判断是否已设置过密码\r\n\t\t\t\tif (this.orderInfo.hasPayPwd) {\r\n\t\t\t\t\tthis.$refs.pswPopup.openPswPopup();\r\n\t\t\t\t} else { //没有设置过密码  打开设置密码\r\n\t\t\t\t\tthis.$refs.setPayPwd.openNoPswPopup()\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcodeSubmit(code){\t//用户安全等级过低时 触发验证码  点击确定  提交订单\r\n\t\t\t\tthis.$set(this.orderSummaryParams,\"code\",code);\r\n\t\t\t\tthis.submit()\r\n\t\t\t},\r\n\t\t\tsubmit(){\t//提交订单\r\n\t\t\t\tfor(let o in this.orderSummaryParams.orders){\r\n\t\t\t\t\tfor(let i=0;i<this.orderSummaryParams.orders[o].goodsList.length;i++){\r\n\t\t\t\t\t\tthis.orderSummaryParams.orders[o].goodsList[i].inviterCode = uni.getStorageSync(\"routerShareNumber\")?uni.getStorageSync(\"routerShareNumber\"):\"\"\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.orderSummaryParams.orders[o].orderMessage = this.orderMessage[this.orderSummaryParams.orders[o].storeId].orderMessage;\r\n\t\t\t\t}\n\t\t\t\tif(!this.submitFlag){\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tthis.submitFlag = false\r\n\t\t\t\ttradeApi.submitOrder(this.orderSummaryParams).then(res => {\n\t\t\t\t\tthis.submitFlag = true\r\n\t\t\t\t\tif (res.data.code == 200) {\n\t\t\t\t\t\tthis.$refs.verificationCode.closeVerificationCode()\r\n\t\t\t\t\t\tif(this.orderSummaryInfo.payAmount==0){\r\n\t\t\t\t\t\t\tthis.$Router.replace({\r\n\t\t\t\t\t\t\t\tpath:\"/pages/payment/index\",\r\n\t\t\t\t\t\t\t\tquery:{\r\n\t\t\t\t\t\t\t\t\tpayId:res.data.data.payId,\r\n\t\t\t\t\t\t\t\t\tnewtype:this.$Route.query.newtype||\"\"\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tthis.$Router.replace({\r\n\t\t\t\t\t\t\t\tpath:\"/pages/pay/index\",\r\n\t\t\t\t\t\t\t\tquery:{\r\n\t\t\t\t\t\t\t\t\tpayId:res.data.data.payId,\r\n\t\t\t\t\t\t\t\t\tnewtype:this.$Route.query.newtype || \"\"\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: res.data.message,\r\n\t\t\t\t\t\t\ticon: \"none\"\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgoldChange(e) { //库豆开关变化时触发\r\n\t\t\t\tthis.deductionFlag.gold = e.detail.value\r\n\t\t\t\tif(e.detail.value){\r\n\t\t\t\t\tthis.orderSummaryParams[\"goldAmount\"] = this.orderGoldCount.canUseGold\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.orderSummaryParams[\"goldAmount\"] = 0\r\n\t\t\t\t}\r\n\t\t\t\tthis.orderSummary()\r\n\t\t\t},\r\n\t\t\tscoreChange(e){\t//积分开关变化时触发\r\n\t\t\t\tthis.deductionFlag.score = e.detail.value\r\n\t\t\t\tif(e.detail.value){\r\n\t\t\t\t\tthis.orderSummaryParams[\"scoreNum\"] = this.orderScoreCount.usefulScoreNum\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.orderSummaryParams[\"scoreNum\"] = 0\r\n\t\t\t\t}\r\n\t\t\t\tthis.orderSummary()\r\n\t\t\t},\r\n\t\t\tstoreCouponChange(storeId,id){\t//店铺优惠券发生变化时触发\r\n\t\t\t\tthis.$set(this.freightParams[storeId],'couponId',id);\r\n\t\t\t\tthis.freightPromotions(storeId)\r\n\t\t\t},\r\n\t\t\tplateformCouponChange(id){\t//平台优惠券发生变化时触发\r\n\t\t\t\tthis.$set(this.orderSummaryParams,'platformPromotionId',id);\r\n\t\t\t\tthis.orderGold(this.orderSummaryParams)\r\n\t\t\t},\r\n\t\t\tpromotionCouponChange(storeId,id){\r\n\t\t\t\tthis.$set(this.couponParams[storeId],'promotionId',id);\r\n\t\t\t\tthis.storeCoupons(storeId)\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tinitStorePromotion(storeId,data){\t//初始化店铺促销活动信息\r\n\t\t\t\tthis.$set(this.storePromotion,storeId,[]);\t//获取促销活动信息\r\n\t\t\t\tthis.storePromotion[storeId] = data\r\n\t\t\t},\r\n\t\t\topenForgetPopup() { //打开忘记支付密码弹窗\r\n\t\t\t\tthis.$refs.forgetPayPsw.openForgetPopup();\r\n\t\t\t},\r\n\t\t\tsetSubmitPsw(password) { //子集修改密码/重置密码/输入密码后点击确定触发  赋值支付密码\r\n\t\t\t\tthis.$set(this.orderSummaryParams,\"password\",password)\r\n\t\t\t\tthis.submit()\r\n\t\t\t},\n\t\t\tgoodsNumBlur(e,item) { //购物车商品数量变化时触发\n\t\t\t\tif (e.target.value) {\n\t\t\t\t\tconsole.log(e.target.value)\n\t\t\t\t\tconsole.log(this.limitSettle.stockNumber)\n\t\t\t\t\tconsole.log(e.target.value<=this.limitSettle.stockNumber)\n\t\t\t\t\tif (Number(e.target.value) < 1) {\n\t\t\t\t\t\tthis.debounceHandle(1);\n\t\t\t\t\t\tthis.$set(item,\"goodsNum\",1)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif(Number(e.target.value)<=this.limitSettle.stockNumber){\n\t\t\t\t\t\t\tthis.debounceHandle(parseInt(e.target.value));\n\t\t\t\t\t\t\tthis.$set(item,\"goodsNum\",parseInt(e.target.value))\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.debounceHandle(parseInt(this.limitSettle.stockNumber));\n\t\t\t\t\t\t\tthis.$set(item,\"goodsNum\",parseInt(this.limitSettle.stockNumber))\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.debounceHandle(1)\n\t\t\t\t}\n\t\t\t},\n\t\t\tgoodsNumChange(item,flag){\n\t\t\t\tif(flag){\n\t\t\t\t\tif((Number(item.goodsNum)+1)<=this.limitSettle.stockNumber){\n\t\t\t\t\t\tthis.debounceHandle(Number(item.goodsNum)+1);\n\t\t\t\t\t\tthis.$set(item,\"goodsNum\",Number(item.goodsNum)+1)\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tif(item.goodsNum>1){\n\t\t\t\t\t\tthis.debounceHandle(Number(item.goodsNum)-1);\n\t\t\t\t\t\tthis.$set(item,\"goodsNum\",Number(item.goodsNum)-1)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t// 防抖\n\t\t\tdebounceHandle(goodsNum){\n\t\t\t\tif(this.limitSettle.time){\n\t\t\t\t\tclearTimeout(this.limitSettle.time);\n\t\t\t\t}\n\t\t\t\treturn (()=>{\n\t\t\t\t\tthis.limitSettle.time = setTimeout(()=>{\n\t\t\t\t\t\tthis.pageInitParams(goodsNum)\n\t\t\t\t\t},500)\n\t\t\t\t})()\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n\t.settlement {\r\n\t\t/* #ifndef MP-WEIXIN */\r\n\t\tpadding-top: 88rpx;\r\n\t\t/* #endif */\r\n\t\tpadding-bottom: calc(120rpx + constant(safe-area-inset-bottom));\r\n\t\tpadding-bottom: calc(120rpx + env(safe-area-inset-bottom));\r\n\t}\r\n\r\n\t.settlement.active{\n\t\tpadding-bottom: calc(210rpx + constant(safe-area-inset-bottom));\n\t\tpadding-bottom: calc(210rpx + env(safe-area-inset-bottom));\n\t}\r\n\r\n\t.settlementAddress {\r\n\t\twidth: 100%;\r\n\t\tpadding: 60rpx 24rpx;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.settlementTitle {\r\n\t\twidth: 100%;\r\n\t\tline-height: 40rpx;\r\n\t\tcolor: #333;\r\n\t\tdisplay: flex;\r\n\t\tfont-size: 34rpx;\r\n\t\tfont-weight: 700;\r\n\t}\r\n\r\n\t.telephone {\r\n\t\tmargin-left: 20rpx;\r\n\t}\r\n\r\n\t.addressMain {\r\n\t\twidth: 90%;\r\n\t\tcolor: #333333;\r\n\t\tline-height: 36rpx;\r\n\t\tmargin-top: 24rpx;\r\n\t}\r\n\r\n\t.arrow {\r\n\t\twidth: 10rpx;\r\n\t\theight: 20rpx;\r\n\t\tbackground: url(http://beifa-mall.oss-cn-shanghai.aliyuncs.com/appletsImages/rightArrow.png) no-repeat 50%;\r\n\t\tbackground-size: 10rpx 20rpx;\r\n\t\tposition: absolute;\r\n\t\tright: 24rpx;\r\n\t\ttop: 50%;\r\n\t\tmargin-top: -10rpx;\r\n\t}\r\n\r\n\t.settlementLine {\r\n\t\theight: 8rpx;\r\n\t\twidth: 100%;\r\n\t\tbackground: url(http://beifa-mall.oss-cn-shanghai.aliyuncs.com/appletsImages/pic_ct.png) no-repeat 50%;\r\n\t\tbackground-size: 100% 8rpx;\r\n\t}\r\n\r\n\t.addressChange {\r\n\t\twidth: 100%;\r\n\t\tmargin-bottom: 0.2rem;\r\n\t\tpadding-left: 0.24rem;\r\n\t\tcolor: #FF1558\r\n\t}\r\n\r\n\t.orderMain {\r\n\t\twidth: 100%;\r\n\t\tmargin-bottom: 60rpx;\r\n\t}\r\n\t\r\n\t.shopName {\r\n\t\twidth: 100%;\r\n\t\tline-height: 42rpx;\r\n\t\tpadding: 34rpx 24rpx 12rpx;\r\n\t\tfont-size: 30rpx;\r\n\t\tcolor: #333333;\r\n\t\tfont-weight: 700;\r\n\t}\r\n\r\n\t.goodsCont {\r\n\t\tposition: relative;\r\n\t\twidth: 100%;\r\n\t\tdisplay: flex;\r\n\t\tpadding: 10rpx 24rpx;\r\n\t}\r\n\r\n\t.goodsCont image {\r\n\t\twidth: 220rpx;\r\n\t\theight: 220rpx;\r\n\t}\r\n\r\n\t.goodsInfo {\r\n\t\tpadding: 20rpx 0;\r\n\t\tmargin-left: 24rpx;\r\n\t\tflex: 1;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.goodsText {\r\n\t\twidth: 100%;\r\n\t\tmax-height: 80rpx;\r\n\t\tcolor: #333333;\r\n\t}\r\n\r\n\t.goodSpce {\r\n\t\twidth: 100%;\r\n\t\theight: 28rpx;\r\n\t\tline-height: 28rpx;\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #999999;\r\n\t\tmargin-top: 12rpx;\r\n\t}\r\n\r\n\t.goodsPrice {\r\n\t\theight: 44rpx;\r\n\t\tline-height: 44rpx;\r\n\t\tposition: absolute;\r\n\t\tbottom: 20rpx;\r\n\t\tcolor: #FF1558;\r\n\t\twidth: 100%;\r\n\t\tfont-size: 30rpx;\r\n\t}\r\n\r\n\t.goodsNum {\r\n\t\tposition: absolute;\r\n\t\tright: 0;\r\n\t\ttop: 0;\r\n\t\t\r\n\t}\r\n\r\n\t.fmGoodsMsg {\r\n\t\twidth: calc(100% - 48rpx);\r\n\t\theight: 88rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\tmargin: 0 auto;\r\n\t\talign-items: center;\r\n\t\tdisplay: flex;\r\n\t\tborder-bottom: 1px solid #E6E6E6;\r\n\t}\r\n\r\n\t.colorChange {\r\n\t\tcolor: rgba(153, 153, 153);\r\n\t\tline-height: 44rpx;\r\n\t\theight: 44rpx;\r\n\t\ttext-align: right;\r\n\t\tfont-size: 28rpx;\r\n\t}\r\n\t\r\n\t.activityBox{\r\n\t\tdisplay: inline-block;\r\n\t\theight: 32rpx;\r\n\t\tline-height: 32rpx;\r\n\t\tfont-size: 22rpx;\r\n\t\ttext-align: center;\r\n\t\tpadding: 0 14rpx;\r\n\t\tborder-radius: 100rpx;\r\n\t\tcolor: #ff7e18;\r\n\t\tbackground: #ffeee1;\r\n\t}\r\n\t.promotionsActivityBox{\r\n\t\tdisplay: inline-block;\r\n\t\theight: 32rpx;\r\n\t\tline-height: 32rpx;\r\n\t\tfont-size: 20rpx;\r\n\t\ttext-align: center;\r\n\t\tpadding: 0 14rpx;\r\n\t\tborder-radius: 100rpx;\r\n\t\tbackground: #242424;\r\n\t\tcolor: #ffdf8c;\r\n\t}\r\n\t.fmGoodsMsg input {\r\n\t\tfont-size: 24rpx;\r\n\t\tflex: 1;\r\n\t\tmargin-left: 20rpx;\r\n\t\theight: 100%;\r\n\t\tline-height: 88rpx;\r\n\t}\r\n\r\n\t.price {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #333333;\r\n\t}\r\n\r\n\t.goPayBox {\r\n\t\twidth: 100%;\r\n\t\theight: 100rpx;\r\n\t\tline-height: 100rpx;\r\n\t\tbackground-color: #FFFFFF;\r\n\t\tdisplay: flex;\r\n\t\tposition: fixed;\r\n\t\tleft: 0;\r\n\t\tbottom: 0;\r\n\t\tbottom: calc(0rpx + constant(safe-area-inset-bottom));\r\n\t\tbottom: calc(0rpx + env(safe-area-inset-bottom));\r\n\t\tborder-top: 1rpx solid #E6E6E6;\n\t\tz-index: 9;\r\n\t}\r\n\r\n\t.payText {\r\n\t\tflex: 1;\r\n\t\tcolor: #4a4a4a;\r\n\t\ttext-align: right;\r\n\t\tmargin-right: 48rpx;\r\n\t\tline-height: 100rpx;\r\n\t}\r\n\r\n\t.submitBtn {\r\n\t\twidth: 252rpx;\r\n\t\theight: 100rpx;\r\n\t\tline-height: 100rpx;\r\n\t\ttext-align: center;\r\n\t\tline-height: 100rpx;\r\n\t\tcolor: #FFFFFF;\r\n\t\tfont-size: 32rpx;\r\n\t\tbackground-color: #FF1558;\r\n\t}\r\n\r\n\t.nullAddress {\r\n\t\tline-height: 40rpx;\r\n\t\tfont-size: 34rpx;\r\n\t\tfont-weight: 700;\r\n\t}\r\n\r\n\t.integralMain {\r\n\t\theight: 88rpx;\r\n\t\twidth: 100%;\r\n\t\tdisplay: flex;\r\n\t\tmargin-left: 24rpx;\r\n\t\talign-items: center;\r\n\t\tborder-bottom: 1rpx solid #E4E4E4;\r\n\t\tpadding-right: 24rpx;\r\n\t}\r\n\t.separatePromotion {\r\n\t\tpadding: 0 24rpx;\r\n\t}\r\n\t.marking_plus{\r\n\t\tdisplay: inline-block;\r\n\t\tbackground: #080f23;\r\n\t\tborder-radius: 8px 8px 8px 2px;\r\n\t\tfont-size: 11px;\r\n\t\tcolor: #ffe9d3;\r\n\t\tpadding: 0 7px;\r\n\t\tmargin-left: 20rpx;\r\n\t}\r\n\t.intergalInfo {\r\n\t\tfont-size: 22rpx;\r\n\t\tcolor: #999999;\r\n\t\tflex: 1;\r\n\t\ttext-align: right;\r\n\t}\r\n\r\n\t.intergalBtn {\r\n\t\twidth: 89rpx;\r\n\t\tmargin-left: 24rpx;\r\n\t\tmargin-right: 24rpx;\r\n\t}\r\n\r\n\t.discountPrice {\r\n\t\tdisplay: flex;\r\n\t\twidth: 100%;\r\n\t\tjustify-content: space-between;\r\n\t\tpadding: 24rpx;\r\n\t}\r\n\r\n\t.priceSymbol {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #FF1558;\r\n\t}\r\n\r\n\t.symbolPrice {\r\n\t\tfont-size: 32rpx;\r\n\t\tcolor: #FF1558;\r\n\t\tmargin-right: 12rpx;\r\n\t}\r\n\t.symbol{\r\n\t\tfont-size: 22rpx;\r\n\t\tcolor: #FF1558;\r\n\t}\r\n\t.payAmount{\r\n\t\tcolor: #FF1558;\r\n\t\tfont-size: 32rpx;\r\n\t}\r\n\t.deduction{\r\n\t\twidth: 100%;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\tpadding: 0 24rpx;\r\n\t\tcolor: #333333;\r\n\t\theight: 40rpx;\r\n\t\tline-height: 40rpx;\r\n\t}\r\n\t.performance{\r\n\t\tfont-size: 28rpx;\r\n\t\tfont-weight: 400;\r\n\t\tcolor: #663F0A;\r\n\t\tmargin-top: 20rpx;\r\n\t\tpadding-top: 20rpx;\r\n\t\tborder-top: 1px solid #E4E4E4;\r\n\t}\r\n\t.scoreBox{\r\n\t\tmargin-bottom: 40rpx;\r\n\t}\r\n\t.member_identification{\r\n\t\theight: 26rpx;\r\n\t\twidth: calc(100% - 48rpx);\r\n\t\tmargin: 20rpx auto 10rpx;\r\n\t}\n\t.cartHint{\n\t\twidth: 100%;\n\t\theight: 90rpx;\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tpadding: 0 20rpx;\n\t\tposition: fixed;\n\t\tcolor: #8E5B17;\n\t\tbackground-color: #fbf4ea;\n\t\tfont-size: 24rpx;\n\t\tfont-weight: 400;\n\t\tbottom: calc(100rpx + constant(safe-area-inset-bottom));\r\n\t\tbottom: calc(100rpx + env(safe-area-inset-bottom));\n\t\tz-index: 9;\n\t}\n\t.cartHint text{\n\t\tcolor: #333;\n\t\tfont-weight: 500;\n\t}\n\t.goBuyBtn{\n\t\tcolor: #8E5B17;\n\t\tfont-weight: 500;\n\t}\n\t.cartHint .memberGoodsPrice{\n\t\tcolor: #FF1558;\n\t}\n\t.deliveryTime{\n\t\twidth: calc(100% - 40rpx);\n\t\theight: 58rpx;\n\t\tbackground-color: #FEE5EB;\n\t\tmargin: 5rpx auto;\n\t\tborder-radius: 20rpx;\n\t\tcolor: #FE325C;\n\t\tfont-size: 24rpx;\n\t\tpadding: 0 20rpx;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\n\t.deliveryTime image{\n\t\twidth: 20rpx;\n\t\theight: 20rpx;\n\t\tmargin-right: 12rpx;\n\t}\n\t.partnerPref{\n\t\tfont-weight: 700;\n\t}\n\t.partnerPrefNum{\n\t\tpadding-right: 40rpx;\n\t\tcolor: #000000;\n\t\tfont-size: 28rpx;\n\t}\n\t\n\t\n\t.goodsNum {\n\t\tposition: absolute;\n\t\ttop: 0rpx;\n\t\tright: 0rpx;\n\t\tbackground-color: #FFFFFF;\n\t\twidth: 188rpx;\n\t\theight: 50rpx;\n\t\tdisplay: flex;\n\t\tcolor: #999999;\n\t\tfont-size: 30rpx;\n\t}\n\t\n\t.goodsNum .jia,\n\t.goodsNum .jian {\n\t\twidth: 50rpx;\n\t\theight: 50rpx;\n\t\ttext-align: center;\n\t\tline-height: 48rpx;\n\t\tborder: 1px solid #E6E6E6;\n\t}\n\t\n\t.goodsNum input {\n\t\twidth: 88rpx;\n\t\theight: 100%;\n\t\ttext-align: center;\n\t\tborder-top: 1px solid #E6E6E6;\n\t\tborder-bottom: 1px solid #E6E6E6;\n\t\tfont-size: 24rpx;\n\t}\n\t.goodsNum.active{\n\t\twidth: auto;\n\t}\r\n</style>\r\n","import mod from \"-!../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=60591ae5&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=60591ae5&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1639368758054\n      var cssReload = require(\"/Users/guojunqiang/Documents/project-bf/new-mall-mobile/node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}