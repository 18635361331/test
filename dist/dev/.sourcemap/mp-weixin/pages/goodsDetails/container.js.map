{"version":3,"sources":["webpack:///./src/pages/goodsDetails/container.vue?fa33","webpack:///./src/pages/goodsDetails/container.vue?bdeb","webpack:///./src/pages/goodsDetails/container.vue?b6bd","webpack:///./src/pages/goodsDetails/container.vue?73db","uni-app:///src/pages/goodsDetails/container.vue","webpack:///./src/pages/goodsDetails/container.vue?8559","webpack:///./src/pages/goodsDetails/container.vue?b8bd"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkI;AAClI;AAC6D;AACL;AACqC;;;AAG7F;AACmI;AACnI,gBAAgB,gJAAU;AAC1B,EAAE,+EAAM;AACR,EAAE,gGAAM;AACR,EAAE,yGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA,WAAW,qPAEN;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACzBA;AAAA;AAAA;AAAA;AAAsc,CAAgB,keAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;ACwC1d;;AACA;;AAGA;;;;;;;;;;;;;;;;;;;;eACA;AACA,qHADA;AAEA,MAFA,kBAEA;AACA;AACA,sBACA;AACA;AADA,OADA,EAIA;AACA;AADA,OAJA,EAOA;AACA;AADA,OAPA,EAUA;AACA;AADA,OAVA,CADA;AAeA,uBAfA;AAeA;AACA,qBAhBA;AAgBA;AACA,4BAjBA;AAiBA;AACA,uBAlBA,CAkBA;;AAlBA;AAoBA,GAvBA;AAwBA;AACA,oBADA,8BACA;AAAA;;AAAA;AACA;AACA,iDADA;AAEA,yCAFA;AAGA,6CAHA;AAIA,yCAJA;AAKA,gCALA;AAMA,wCANA;AAOA;AAPA;;AASA;AACA;AACA;AACA;;AACA;AACA,SAJA,MAIA;AACA;AACA,mCADA;AAEA;AAFA;AAIA;AACA,OAXA;AAYA,KAvBA;AAwBA,kBAxBA,4BAwBA;AAAA;;AAAA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAVA,MAUA;AACA;AACA,mCADA;AAEA;AAFA;AAIA;AACA,OAjBA;AAkBA,KA3CA;AA4CA,gBA5CA,0BA4CA;AAAA;AACA;;AACA;AACA;AACA;;AACA;AACA;AACA,yBADA;AAEA;AAFA;AAIA;AACA;;AACA;AACA;AACA,KA1DA;AA2DA,WA3DA,qBA2DA;AACA;AACA,KA7DA;AA8DA,iBA9DA,2BA8DA;AAAA;AACA;AACA,KAhEA;AAiEA,iBAjEA,2BAiEA;AAAA;AACA;AACA,KAnEA;AAoEA,iBApEA,yBAoEA,IApEA,EAoEA;AAAA;AACA;AACA;AACA;AACA,KAxEA;AAyEA,eAzEA,yBAyEA;AAAA;;AAAA;AACA;;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA,aAJA,MAIA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA,SAbA,MAaA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA,OAFA;AAGA,KAjGA;AAkGA,eAlGA,yBAkGA;AAAA;;AAAA;AACA;;AACA;AACA;AACA,OAFA,MAEA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;;AACA;AACA;AACA,OAFA;AAGA,KArHA;AAsHA,aAtHA,uBAsHA;AAAA;AACA;AACA;AACA;AADA;AAEA;AACA,KA3HA;AA4HA,gBA5HA,0BA4HA;AAAA;;AAAA;AACA;AACA;;AACA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA;;AACA;AACA;AACA;;AACA;AACA;;AACA;AACA;AAAA;AACA;AACA;AACA,eAFA;;AAGA;AAAA;AAAA;AACA;AAAA;AACA;;AACA;AACA;;AACA;AACA;AACA,iBANA,MAMA;AACA;AACA;AACA;AAdA;AAeA;AACA;AACA;AACA,KA9JA;AA+JA,iBA/JA,yBA+JA,KA/JA,EA+JA;AAAA;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAFA;AAGA,KA3KA;AA4KA,oBA5KA,4BA4KA,SA5KA,EA4KA,aA5KA,EA4KA;AAAA;;AAAA;AACA;AACA;AAAA,cAKA,CALA;AAAA,cAOA,CAPA;;AAAA;AACA;AACA;AACA,aAFA;;AAGA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhBA;AAiBA;AACA;;AACA;AACA,KAlMA;AAmMA,cAnMA,sBAmMA,KAnMA,EAmMA;AAAA;AACA;AACA;;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA,SANA,MAMA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;;AACA;AACA,KAtOA;AAuOA,kBAvOA,0BAuOA,WAvOA,EAuOA;AAAA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;;AACA;AACA,KA1PA;AA2PA,iBA3PA,yBA2PA,SA3PA,EA2PA;AAAA;AACA;;AACA;AACA;AACA;AACA;AACA;;AACA;AACA,KAnQA;AAoQA,aApQA,qBAoQA,SApQA,EAoQA,cApQA,EAoQA;AAAA;AACA;AACA;AACA,KAvQA;AAwQA,WAxQA,qBAwQA;AACA;AACA,KA1QA;AA2QA,UA3QA,oBA2QA;AACA;AACA;AA7QA,GAxBA;AAuSA,SAvSA,qBAuSA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;AACA;AACA;AACA;;AACA;AACA,wCADA,CACA;;AACA,eAPA,CASA;;;AACA;AACA;AACA,eAFA,MAEA;AACA;AACA;;AAdA;AAAA,qBAeA,+BAfA;;AAAA;AAgBA,2BAhBA,GAgBA,0DAhBA;AAiBA;;AAjBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAkBA,GAzTA;AA0TA;AACA,wBADA;AAEA;AAFA;AA1TA,C;;;;;;;;;;;;;;AC7CA;AAAA;AAAA;AAAA;AAA6uB,CAAgB,+uBAAG,EAAC,C;;;;;;;;;;;ACAjwB;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/goodsDetails/container.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./container.vue?vue&type=template&id=2a4118f7&scoped=true&\"\nvar renderjs\nimport script from \"./container.vue?vue&type=script&lang=js&\"\nexport * from \"./container.vue?vue&type=script&lang=js&\"\nimport style0 from \"./container.vue?vue&type=style&index=0&id=2a4118f7&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2a4118f7\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/goodsDetails/container.vue\"\nexport default component.exports","export * from \"-!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--14-0!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./container.vue?vue&type=template&id=2a4118f7&scoped=true&\"","var components = {\n  uniPopup: function() {\n    return import(\n      /* webpackChunkName: \"components/uni-popup/uni-popup\" */ \"@/components/uni-popup/uni-popup.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = !(_vm.goodsInfo.freight.amount > 0)\n    ? _vm.freightString.indexOf(_vm.goodsInfoId)\n    : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./container.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./container.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"page\">\n\t\t<view class=\"skuPage\" @click=\"openSkuPopup\">\r\n\t\t\t<text class=\"skuChoose\">选择</text>\r\n\t\t\t<text class=\"skuText\">{{chooseSpceData.name?chooseSpceData.name:\"已选：\"+chooseSpceData.number+\"件\"}}</text>\r\n\t\t\t<text class=\"arrowIcon\"></text>\r\n\t\t</view>\n\t\t<view class=\"skuPage\" @click=\"openAddrPopup\">\r\n\t\t\t<text class=\"skuChoose\">送至</text>\r\n\t\t\t<view class=\"skuText\"> <image src=\"http://beifa-mall.oss-cn-shanghai.aliyuncs.com/appletsImages/adress_step@2x.png\" mode=\"\"></image> \r\n\t\t\t\t<text v-if=\"chooseAddress.provinceName\">{{chooseAddress.provinceName+chooseAddress.cityName+chooseAddress.districtName+(chooseAddress.townName?chooseAddress.townName:\"\")+(chooseAddress.address?chooseAddress.address:\"\")}}</text> \r\n\t\t\t\t<text v-else>请选择收货地址</text>\r\n\t\t\t</view>\r\n\t\t\t<text class=\"arrowIcon\"></text>\r\n\t\t</view>\r\n\t\t<view class=\"skuPage\">\r\n\t\t\t<view class=\"skuChoose freight\">运费</view>\r\n\t\t\t<view class=\"skuText\">\n\t\t\t\t<text v-if=\"goodsInfo.freight.amount>0\">{{goodsInfo.freight.amount}}元</text>\n\t\t\t\t<text v-else>{{(freightString && freightString.indexOf(goodsInfoId)!=-1)?\"自提\":\"包邮\"}}</text>\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"skuPage guarantee\">\r\n\t\t\t<view class=\"everyContainer\" v-for=\"item,index in guaranteeList\" :key='index'>\r\n\t\t\t\t<image src=\"http://beifa-mall.oss-cn-shanghai.aliyuncs.com/appletsImages/guarantee.png\" mode=\"\"></image>\r\n\t\t\t\t{{item.name}}\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- sku选择 -->\r\n\t\t<uni-popup ref=\"skuPopup\" type=\"bottom\">\r\n\t\t\t<skuChoose :goodsInfo='goodsInfo' :increaseFlag='increaseFlag' :chooseSpceData='chooseSpceData' :singleProduct='singleProduct' :seckillInfo='seckillInfo' :memberInfo='memberInfo' :goodsInfoId='goodsInfoId' @cancelSetSpce='cancelSetSpce' @setSpceName='setSpceName' @checkStockNumber='checkStockNumber' @closeSkuPopup='closeSkuPopup' @setSkuInfo='setSkuInfo' @stcokFlagSet='stcokFlagSet' @addCart='addCart' @bugNow='bugNow' @updataMsg='updateMsg'></skuChoose>\r\n\t\t</uni-popup>\r\n\t\t<!-- 配送地址 -->\r\n\t\t<uni-popup ref=\"addressPopup\" type=\"bottom\">\r\n\t\t\t<addressListTemp :addressList='addressList' :chooseAddress='chooseAddress' @addressChange='addressChange'></addressListTemp>\r\n\t\t</uni-popup>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport appApi from '@/api/app/index.js';\r\n\timport memberApi from '@/api/member/index.js';\r\n\timport skuChoose from './skuChoose.vue';\r\n\timport addressListTemp from './addressList.vue';\n\timport vipConfig from '@/common/js/vipConfig.js'\r\n\texport default{\r\n\t\tprops:['goodsInfo','chooseSpceData','seckillInfo','memberInfo','singleProduct','goodsInfoId','increaseFlag'],\r\n\t\tdata(){\r\n\t\t\treturn{\r\n\t\t\t\tguaranteeList:[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname:\"正品保障\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname:\"极速发货\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname:\"售后无忧\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname:\"闪电退款\"\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tchooseAddress:{},\t//选中的地址\r\n\t\t\t\taddressList:[],\t//地址列表\n\t\t\t\tincreaseReceive:false,\t//是否是他人转增的商品\n\t\t\t\tfreightString:\"\",\t//是否有显示自提的商品\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\tcalcGoodsFreight(){\t//计算运费\r\n\t\t\t\tlet params = {\r\n\t\t\t\t\tprovinceId:this.chooseAddress.provinceId,\r\n\t\t\t\t\tcityId:this.chooseAddress.cityId,\r\n\t\t\t\t\tcountyId:this.chooseAddress.countyId,\r\n\t\t\t\t\ttownId:this.chooseAddress.townId,\r\n\t\t\t\t\titemId:this.goodsInfoId,\r\n\t\t\t\t\tskuId:this.chooseSpceData.skuId,\r\n\t\t\t\t\tnumber:this.chooseSpceData.number\r\n\t\t\t\t}\r\n\t\t\t\tappApi.calcGoodsFreight(params).then(res=>{\r\n\t\t\t\t\tif(res.data.code==200){\r\n\t\t\t\t\t\tthis.goodsInfo.freight.amount = res.data.data.amount;\r\n\t\t\t\t\t\tthis.goodsInfo.freight.canBuy = res.data.data.canBuy;\r\n\t\t\t\t\t\tthis.updateMsg(this.goodsInfo,this.chooseSpceData)\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle:res.data.message,\r\n\t\t\t\t\t\t\ticon:\"none\"\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetAddressList(){\t//获取地址列表\r\n\t\t\t\tmemberApi.addressList().then(res=>{\r\n\t\t\t\t\tif(res.data.code==200){\r\n\t\t\t\t\t\tif(res.data.data){\r\n\t\t\t\t\t\t\tthis.addressList = res.data.data;\r\n\t\t\t\t\t\t\tfor(let i=0;i<this.addressList.length;i++){\r\n\t\t\t\t\t\t\t\tif(this.addressList[i].isDefault){\r\n\t\t\t\t\t\t\t\t\tthis.chooseAddress = this.addressList[i];\r\n\t\t\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle:res.data.message,\r\n\t\t\t\t\t\t\ticon:\"none\"\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\topenSkuPopup(){\t//打开sku选择框\n\t\t\t\tthis.increaseReceive = false;\n\t\t\t\tif(this.$Route.query.transferOrderId){\n\t\t\t\t\tthis.increaseReceive = true;\n\t\t\t\t}\n\t\t\t\tif(this.goodsInfo.status==2 && this.goodsInfo.stockNumber<=0 && !this.goodsInfo.frozenFlag && !this.increaseReceive){\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle:\"商品暂时缺货\",\n\t\t\t\t\t\ticon:\"none\"\n\t\t\t\t\t})\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tthis.$emit(\"changeIncreaseFlag\",true)\n\t\t\t\tthis.$refs.skuPopup.open()\r\n\t\t\t},\n\t\t\topenSku(){\n\t\t\t\tthis.$refs.skuPopup.open()\n\t\t\t},\r\n\t\t\topenAddrPopup(){\t//打开地址选择弹窗\r\n\t\t\t\tthis.$refs.addressPopup.open();\r\n\t\t\t},\r\n\t\t\tcloseSkuPopup(){\t//关闭sku选择框\r\n\t\t\t\tthis.$refs.skuPopup.close();\r\n\t\t\t},\r\n\t\t\taddressChange(item){\t//地址变化时触发\r\n\t\t\t\tthis.chooseAddress = item;\r\n\t\t\t\tthis.$refs.addressPopup.close();\r\n\t\t\t\tthis.calcGoodsFreight()\r\n\t\t\t},\r\n\t\t\tinitSpecVal(){\t//选择规格属性展示内容\n\t\t\t\tthis.chooseSpceData.stockNumber = this.goodsInfo.stockNumber;\r\n\t\t\t\tif(this.goodsInfo.stockNumber != 0){\n\t\t\t\t\tif(this.goodsInfo.attrSpecList.length){//当有多个规格时\n\t\t\t\t\t\tfor(let i=0;i<this.goodsInfo.attrSpecList.length;i++){\n\t\t\t\t\t\t\tif(this.goodsInfo.attrSpecList[i].valueDTOList.length==1){ //循环遍历  当只有下面只有一个属性时默认选中\n\t\t\t\t\t\t\t\tthis.$set(this.goodsInfo.attrSpecList[i],\"chooseAttrValueId\",this.goodsInfo.attrSpecList[i].valueDTOList[0].attrValueId)\n\t\t\t\t\t\t\t\tthis.$set(this.goodsInfo.attrSpecList[i],\"chooseAttrValue\",this.goodsInfo.attrSpecList[i].valueDTOList[0].attrValue)\n\t\t\t\t\t\t\t\tthis.chooseSpceData.checkList.push(this.goodsInfo.attrSpecList[i].valueDTOList[0].attrValue)\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tthis.$set(this.goodsInfo.attrSpecList[i],\"chooseAttrValueId\",null)\n\t\t\t\t\t\t\t\tthis.$set(this.goodsInfo.attrSpecList[i],\"chooseAttrValue\",null)\n\t\t\t\t\t\t\t\tthis.chooseSpceData.checkList.push(null)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.setSpceName()\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.setSkuInfo(0);\n\t\t\t\t\t\tthis.chooseSpceData.skuId = this.goodsInfo.skuList[0].skuId\n\t\t\t\t\t}\n\t\t\t\t}\r\n\t\t\t\tthis.$nextTick(()=>{\n\t\t\t\t\tthis.updateMsg(this.goodsInfo,this.chooseSpceData)\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tsetSpceName(){\t//用来判断 展示 已选择还是请选择\r\n\t\t\t\tlet num = this.skuArrNullNum(this.chooseSpceData.checkList);\r\n\t\t\t\tif(num==0){\r\n\t\t\t\t\tthis.$set(this.chooseSpceData,\"name\",\"已选：\" + this.chooseSpceData.checkList.join(' '))\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.$set(this.chooseSpceData,\"name\",\"请选择\")\r\n\t\t\t\t\tfor(let i=0;i<this.goodsInfo.attrSpecList.length;i++){\r\n\t\t\t\t\t\tif(!this.goodsInfo.attrSpecList[i].chooseAttrValue){\r\n\t\t\t\t\t\t\tthis.$set(this.chooseSpceData,\"name\",this.chooseSpceData.name+this.goodsInfo.attrSpecList[i].attrName)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(this.goodsInfo.skuList.length){\r\n\t\t\t\t\tthis.resetFlag();\r\n\t\t\t\t\tthis.stcokFlagSet();\r\n\t\t\t\t}\r\n\t\t\t\tthis.$nextTick(()=>{\n\t\t\t\t\tthis.updateMsg(this.goodsInfo,this.chooseSpceData)\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tresetFlag(){\t//将所有sku都变为可选状态\r\n\t\t\t\tfor(let p in this.goodsInfo.attrSpecList){\r\n\t\t\t        for(let k in this.goodsInfo.attrSpecList[p].valueDTOList)\r\n\t\t\t          this.$set(this.goodsInfo.attrSpecList[p].valueDTOList[k],'flag',false);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tstcokFlagSet(){\t//规格变化时判断库存\r\n\t\t\t\tlet activeArr = [];\r\n\t\t\t\tlet noActiveIndex = -1;\r\n\t\t\t\tfor(let i=0;i<this.goodsInfo.attrSpecList.length;i++){\r\n\t\t\t\t\tif(this.goodsInfo.attrSpecList[i].chooseAttrValueId){\r\n\t\t\t\t\t\tactiveArr.push(this.goodsInfo.attrSpecList[i].chooseAttrValueId);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tnoActiveIndex = i;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(this.skuArrNullNum(this.chooseSpceData.checkList)==1){\r\n\t\t\t\t\tthis.checkStockNumber(activeArr,noActiveIndex)\r\n\t\t\t\t}\r\n\t\t\t\tif(this.skuArrNullNum(this.chooseSpceData.checkList)==0){\r\n\t\t\t\t\tlet newArr = JSON.parse(JSON.stringify(activeArr))\r\n\t\t\t\t\tfor(let index=0;index<this.goodsInfo.skuList.length;index++){\r\n\t\t\t\t\t\tif(this.goodsInfo.skuList[index].attrValueDTOList){\r\n\t\t\t\t\t\t\tlet skuListValueIdArr = this.goodsInfo.skuList[index].attrValueDTOList.map((item)=>{\r\n\t\t\t\t\t\t\t\treturn item.attrValueId;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tif(activeArr.filter(v => skuListValueIdArr.indexOf(v)>-1).length  == activeArr.length){\r\n\t\t\t\t\t\t\t\tif(parseInt(this.goodsInfo.skuList[index].stockNumber) > 0  && this.goodsInfo.skuList[index].status == 1){//库存大于零且状态为上架\r\n\t\t\t\t\t\t\t\t\tthis.setSkuInfo(index)\r\n\t\t\t\t\t\t\t\t\tif(activeArr.length > 0){\r\n\t\t\t\t\t\t\t\t\t\tnewArr.splice(noActiveIndex,1);\r\n\t\t\t\t\t\t\t\t\t\tthis.checkStockNumber(newArr,this.goodsInfo.attrSpecList.length - 1)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\tthis.cancelSetSpce(this.goodsInfo.attrSpecList.length - 1)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\n\t\t\t},\r\n\t\t\tcancelSetSpce(index){\t//取消选择属性\r\n\t\t\t\tthis.goodsInfo.attrSpecList[index].chooseAttrValueId = \"\"\r\n\t\t\t\tthis.goodsInfo.attrSpecList[index].chooseAttrValue = \"\"\r\n\t\t\t\tthis.chooseSpceData.checkList[index] = null;\r\n\t\t\t\tthis.chooseSpceData.stockNumber = this.goodsInfo.stockNumber;\r\n\t\t\t\tthis.chooseSpceData.price = 0;\r\n\t\t\t\tthis.chooseSpceData.skuId = \"\"\r\n\t\t\t\tthis.setSpceName();\r\n\t\t\t\tthis.stcokFlagSet();\r\n\t\t\t\tthis.$nextTick(()=>{\n\t\t\t\t\tthis.updateMsg(this.goodsInfo,this.chooseSpceData)\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tcheckStockNumber(activeArr,noActiveIndex){\t//还有一个未选中时  判断是否有库存\r\n\t\t\t\tfor(let i=0;i<this.goodsInfo.skuList.length;i++){\r\n\t\t\t\t\tif(this.goodsInfo.skuList[i].attrValueDTOList){\r\n\t\t\t\t\t\tlet skuListValueIdArr = this.goodsInfo.skuList[i].attrValueDTOList.map((item)=>{\r\n\t\t\t\t\t\t\treturn item.attrValueId;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tif(activeArr.filter(v => skuListValueIdArr.indexOf(v)>-1).length == activeArr.length || activeArr.length == 0){\r\n\t\t\t\t\t\t\tfor(var p in this.goodsInfo.skuList[i].attrValueDTOList){\r\n\t\t\t\t\t\t\t\tif(this.goodsInfo.skuList[i].attrValueDTOList[p].attrId == this.goodsInfo.attrSpecList[noActiveIndex].attrId){\r\n\t\t\t\t\t\t\t\t\tfor(var k in this.goodsInfo.attrSpecList[noActiveIndex].valueDTOList){\r\n\t\t\t\t\t\t\t\t\t\tif(this.goodsInfo.attrSpecList[noActiveIndex].valueDTOList[k].attrValueId == this.goodsInfo.skuList[i].attrValueDTOList[p].attrValueId){\r\n\t\t\t\t\t\t\t\t\t\t\tif(this.goodsInfo.skuList[i].stockNumber <= 0 || this.goodsInfo.skuList[i].status == 0){\n\t\t\t\t\t\t\t\t\t\t\t\tthis.$set(this.goodsInfo.attrSpecList[noActiveIndex].valueDTOList[k],'flag',true);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.updateMsg(this.goodsInfo,this.chooseSpceData)\n\t\t\t},\r\n\t\t\tsetSkuInfo(index){//设置选中规格信息\r\n\t\t\t\tif(this.goodsInfo.skuList[index]){\n\t\t\t\t\tthis.$set(this.chooseSpceData,'price',this.goodsInfo.skuList[index].price);\n\t\t\t\t\tif(this.memberInfo.plusFlag==4){ //分销商\n\t\t\t\t\t\tfor(let i=0;i<this.goodsInfo.skuList[index].distributorPriceList.length;i++){\n\t\t\t\t\t\t\tif(this.goodsInfo.skuList[index].distributorPriceList[i].type == this.memberInfo.distributorType){\n\t\t\t\t\t\t\t\tthis.$set(this.chooseSpceData,'memberPrice',this.goodsInfo.skuList[index].distributorPriceList[i].price);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}else if(this.memberInfo.plusFlag){\t//个人会员\n\t\t\t\t\t\tfor(let i=0;i<this.goodsInfo.skuList[index].newtypePriceList.length;i++){\n\t\t\t\t\t\t\tif(this.goodsInfo.skuList[index].newtypePriceList[i].type == this.memberInfo.plusFlag){\n\t\t\t\t\t\t\t\tthis.$set(this.chooseSpceData,'memberPrice',this.goodsInfo.skuList[index].newtypePriceList[i].price);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t        this.$set(this.chooseSpceData,'marketPrice',this.goodsInfo.skuList[index].marketPrice);\r\n\t\t\t        this.$set(this.chooseSpceData,'skuId',this.goodsInfo.skuList[index].skuId);\n\t\t\t        this.$set(this.chooseSpceData,'stockNumber',parseInt(this.goodsInfo.skuList[index].stockNumber));\r\n\t\t\t\t\tif(this.goodsInfo.showAttrId){\n\t\t\t\t\t\tfor(let i=0;i<this.goodsInfo.attrSpecList.length;i++){\n\t\t\t\t\t\t\tif(this.goodsInfo.attrSpecList[i].attrId == this.goodsInfo.showAttrId){\n\t\t\t\t\t\t\t\tfor(let j=0;j<this.goodsInfo.attrSpecList[i].valueDTOList.length;j++){\n\t\t\t\t\t\t\t\t\tfor(let k=0;k<this.chooseSpceData.checkList.length;k++){\n\t\t\t\t\t\t\t\t\t\tif(this.goodsInfo.attrSpecList[i].valueDTOList[j].attrValue == this.chooseSpceData.checkList[k]){\n\t\t\t\t\t\t\t\t\t\t\tthis.$set(this.chooseSpceData,'saleImage',this.goodsInfo.attrSpecList[i].valueDTOList[j].picUrl);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\r\n\t\t\t        }\r\n\t\t\t\t}\r\n\t\t\t\tthis.updateMsg(this.goodsInfo,this.chooseSpceData)\n\t\t\t},\r\n\t\t\tsetDefaultSpec(chooseSkuId){\t//设置默认选中skuId\r\n\t\t\t\tfor(let i=0;i<this.goodsInfo.skuList.length;i++){\r\n\t\t\t\t\tif(this.goodsInfo.skuList[i].skuId == chooseSkuId){\r\n\t\t\t\t\t\tthis.setSkuInfo(i);\r\n\t\t\t\t\t\tfor(let j=0;j<this.goodsInfo.skuList[i].attrValueDTOList.length;j++){\r\n\t\t\t\t\t\t\tfor(let k=0;k<this.goodsInfo.attrSpecList.length;k++){\r\n\t\t\t\t\t\t\t\tif(this.goodsInfo.attrSpecList[k].attrId == this.goodsInfo.skuList[i].attrValueDTOList[j].attrId){\r\n\t\t\t\t\t\t\t\t\tthis.$set(this.goodsInfo.attrSpecList[k],\"chooseAttrValueId\",this.goodsInfo.skuList[i].attrValueDTOList[j].attrValueId)\r\n\t\t\t\t\t\t\t\t\tthis.$set(this.goodsInfo.attrSpecList[k],\"chooseAttrValue\",this.goodsInfo.skuList[i].attrValueDTOList[j].attrValue)\r\n\t\t\t\t\t\t\t\t\tthis.chooseSpceData.checkList[k] = this.goodsInfo.skuList[i].attrValueDTOList[j].attrValue\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(!this.goodsInfo.attrSpecList.length){\r\n\t\t\t\t\tthis.setSkuInfo(0)\r\n\t\t\t\t}\r\n\t\t\t\tthis.setSpceName()\r\n\t\t\t},\r\n\t\t\tskuArrNullNum(selectArr){//检索选中数组中有几个是空的；\r\n\t\t\t\tlet num = 0\r\n\t\t\t\tfor(let n in selectArr){\r\n\t\t\t        if(!selectArr[n]){\r\n\t\t\t          num ++\r\n\t\t\t        }\r\n\t\t\t\t}\r\n\t\t\t\treturn num;\r\n\t\t\t},\r\n\t\t\tupdateMsg(goodsInfo,chooseSpceData){\t//更新数据\n\t\t\t\tthis.$emit(\"updateSku\",chooseSpceData)\r\n\t\t\t\tthis.$emit(\"UpdateGoodsInfo\",goodsInfo)\r\n\t\t\t},\r\n\t\t\taddCart(){\r\n\t\t\t\tthis.$emit(\"addCart\")\r\n\t\t\t},\r\n\t\t\tbugNow(){\r\n\t\t\t\tthis.$emit(\"bugNow\")\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync mounted() {\n\t\t\tthis.increaseReceive = false;\n\t\t\tif(this.$Route.query.transferOrderId){\n\t\t\t\tthis.increaseReceive = true;\n\t\t\t}\r\n\t\t\tif(uni.getStorageSync('sessionId')){\r\n\t\t\t\tthis.getAddressList()\t//获取默认地址\r\n\t\t\t}\n\t\t\t\n\t\t\t// this.goodsInfo.savePromotionSkuId || \r\n\t\t\tif(this.$Route.query.skuId){\r\n\t\t\t\tthis.setDefaultSpec(this.goodsInfo.savePromotionSkuId?this.goodsInfo.savePromotionSkuId:this.$Route.query.skuId)\r\n\t\t\t}else{\r\n\t\t\t\tthis.initSpecVal()\r\n\t\t\t}\n\t\t\tawait vipConfig.getUserVip();\n\t\t\tlet freightString = JSON.parse(uni.getStorageSync(\"miniRouter\")).freightString;\n\t\t\tthis.freightString = freightString?freightString:\"\"\r\n\t\t},\r\n\t\tcomponents:{\r\n\t\t\tskuChoose,\r\n\t\t\taddressListTemp\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t.skuPage{\r\n\t\twidth: 100%;\r\n\t\tmin-height: 110rpx;\r\n\t\tbackground-color: #FFFFFF;\r\n\t\tdisplay: flex;\r\n\t\tpadding-left: 24rpx;\r\n\t}\r\n\t.skuChoose{\r\n\t\tmargin: 0 24rpx 0 0;\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #999;\r\n\t\tline-height: 110rpx;\r\n\t\tdisplay: inline-block\r\n\t}\r\n\t.skuText{\r\n\t\tdisplay: inline-block;\r\n\t\tmin-height: 110rpx;\r\n\t\tline-height: 26rpx;\r\n\t\tfont-size: 26rpx;\r\n\t\tpadding: 41rpx 30rpx 41rpx 0;\r\n\t\tflex: 1;\r\n\t\tcolor: #000000;\r\n\t}\r\n\t.skuText image{\r\n\t\twidth: 20rpx;\r\n\t\theight: 28rpx;\r\n\t\tmargin-right: 10rpx;\r\n\t\tvertical-align: middle;\r\n\t}\r\n\t.arrowIcon{\r\n\t\tdisplay: inline-block;\r\n\t\twidth: 48rpx;\r\n\t\tmargin-right: 20rpx;\r\n\t\theight: 110rpx;\r\n\t\tbackground: url(http://beifa-mall.oss-cn-shanghai.aliyuncs.com/appletsImages/more_fx2@2x.png) no-repeat 50%; \r\n\t\tbackground-size: 40rpx 40rpx;\r\n\t}\r\n\t.guarantee{\r\n\t\theight: 88rpx;\r\n\t\talign-items: center;\r\n\t}\r\n\t.everyContainer{\r\n\t\twidth: 25%;\r\n\t\theight:100%;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tcolor: #FF1558;\r\n\t\tfont-size: 22rpx;\r\n\t}\r\n\t.everyContainer image{\r\n\t\twidth: 20rpx;\r\n\t\theight: 20rpx;\r\n\t\tmargin-right: 12rpx;\r\n\t}\r\n\t\r\n</style>\r\n","import mod from \"-!../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./container.vue?vue&type=style&index=0&id=2a4118f7&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./container.vue?vue&type=style&index=0&id=2a4118f7&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1639368371755\n      var cssReload = require(\"/Users/guojunqiang/Documents/project-bf/new-mall-mobile/node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}