<view class="page cart data-v-457cfe48"><view class="goodsTitle data-v-457cfe48"><view data-event-opts="{{[['tap',[['goBack',[1]]]]]}}" class="goBackBtn data-v-457cfe48" style="{{'opacity:'+(titleTransparent)+';'}}" bindtap="__e"></view><view class="cartTitle data-v-457cfe48" style="{{'opacity:'+(titleTransparent)+';'}}">购物车</view><block wx:if="{{cartList.activityGoods.length||cartList.shops.length||cartList.unusefulGoods.length}}"><view data-event-opts="{{[['tap',[['editClick',['$event']]]]]}}" class="goodsOperate data-v-457cfe48" bindtap="__e">{{''+(editFlag?"完成":"编辑")+''}}</view></block></view><scroll-view class="{{['cartContent data-v-457cfe48',memberPriceInfo.choosePrice&&memberType!=4&&(memberPriceInfo.type||memberPriceInfo.arriveType)?'active':'']}}" scroll-y="true" data-event-opts="{{[['scroll',[['scroll',['$event']]]]]}}" bindscroll="__e"><view class="cartTitleDef data-v-457cfe48">购物车</view><block wx:for="{{$root.l2}}" wx:for-item="item" wx:for-index="key" wx:key="key"><block wx:if="{{key!='unusefulGoods'}}"><view class="cartList data-v-457cfe48"><block wx:for="{{item.l1}}" wx:for-item="list" wx:for-index="i" wx:key="storeId"><view class="everyCart data-v-457cfe48"><view class="everyShop data-v-457cfe48"><view data-event-opts="{{[['tap',[['shopChooseChange',['$0'],[[['cartList','',key],['','storeId',list.$orig.storeId]]]]]]]}}" class="{{['chooseCartIcon data-v-457cfe48',list.$orig.chooseFlag?'active':'']}}" bindtap="__e"></view><view data-event-opts="{{[['tap',[['goToShop',['$0'],[[['cartList','',key],['','storeId',list.$orig.storeId]]]]]]]}}" class="cartShopName data-v-457cfe48" bindtap="__e">{{''+list.$orig.storeName+''}}</view><block wx:if="{{list.$orig.hasCoupons}}"><view data-event-opts="{{[['tap',[['getCartStoreCoupons',['$0'],[[['cartList','',key],['','storeId',list.$orig.storeId]]]]]]]}}" class="couponBtn data-v-457cfe48" bindtap="__e">领券</view></block></view><block wx:if="{{list.$orig.freightPromotion}}"><view class="shopActive data-v-457cfe48"><view class="shopactiveSign data-v-457cfe48">包邮</view><view class="shopactiveName data-v-457cfe48">{{'已享“'+list.$orig.freightPromotion.name+'”'}}</view></view></block><view class="cartLine line data-v-457cfe48"></view><view class="cartGoods data-v-457cfe48"><view class="data-v-457cfe48"><block wx:for="{{list.l0}}" wx:for-item="v" wx:for-index="l" wx:key="cartId"><view class="data-v-457cfe48"><uni-swipe-action vue-id="{{'6a21c8ac-1-'+key+'-'+i+'-'+l}}" class="data-v-457cfe48" bind:__l="__l" vue-slots="{{['default']}}"><uni-swipe-action-item vue-id="{{('6a21c8ac-2-'+key+'-'+i+'-'+l)+','+('6a21c8ac-1-'+key+'-'+i+'-'+l)}}" class="data-v-457cfe48" bind:__l="__l" vue-slots="{{['default','right']}}"><view slot="right"><view data-event-opts="{{[['tap',[['removeGoods',['$0','$1','$2'],[[['cartList','',key]],[['cartList','',key],['','storeId',list.$orig.storeId]],[['cartList','',key],['','storeId',list.$orig.storeId],['goodsList','cartId',v.$orig.cartId]]]]]]]}}" class="delGoods data-v-457cfe48" bindtap="__e"><text class="data-v-457cfe48">刪除</text></view></view><view class="everyGoods data-v-457cfe48"><view data-event-opts="{{[['tap',[['goodsChooseChange',['$0','$1'],[[['cartList','',key],['','storeId',list.$orig.storeId],['goodsList','cartId',v.$orig.cartId]],[['cartList','',key],['','storeId',list.$orig.storeId]]]]]]]}}" class="{{['goodsSelectBtn data-v-457cfe48',v.$orig.chooseFlag?'active':'']}}" bindtap="__e"></view><view class="goodsInfoMsg data-v-457cfe48"><view class="goodsInfoTop data-v-457cfe48"><view class="goodsImage data-v-457cfe48"><image src="{{imgBaseUrls+v.$orig.goodsImg}}" mode="aspectFill" data-event-opts="{{[['tap',[['goToGoodsDetail',['$0'],[[['cartList','',key],['','storeId',list.$orig.storeId],['goodsList','cartId',v.$orig.cartId]]]]]]]}}" bindtap="__e" class="data-v-457cfe48"></image><block wx:if="{{v.$orig.storage<=3}}"><view class="goodsNumWarning data-v-457cfe48">{{"仅剩"+v.$orig.storage+"件"}}</view></block></view><view class="goodInfo data-v-457cfe48"><view data-event-opts="{{[['tap',[['goToGoodsDetail',['$0'],[[['cartList','',key],['','storeId',list.$orig.storeId],['goodsList','cartId',v.$orig.cartId]]]]]]]}}" class="ellipsis-two goodsName data-v-457cfe48" bindtap="__e">{{v.$orig.goodsName}}</view><view class="goodsSpce data-v-457cfe48"><block wx:if="{{v.g0}}"><text data-event-opts="{{[['tap',[['findCartGoods',['$0',key,i,l],[[['cartList','',key],['','storeId',list.$orig.storeId],['goodsList','cartId',v.$orig.cartId]]]]]]]}}" class="ellipsis-one data-v-457cfe48" bindtap="__e">{{v.$orig.saleFieldValue}}</text></block></view><view class="goodsTips data-v-457cfe48"><block wx:if="{{v.$orig.decreasePrice}}"><text class="data-v-457cfe48">{{"比加入时降"+v.$orig.decreasePrice+"元"}}</text></block></view><view class="goodsPrice data-v-457cfe48"><text class="data-v-457cfe48">￥</text>{{v.$orig.price}}</view><view class="goodsNum data-v-457cfe48"><view data-event-opts="{{[['tap',[['jian',['$0'],[[['cartList','',key],['','storeId',list.$orig.storeId],['goodsList','cartId',v.$orig.cartId]]]]]]]}}" class="jian data-v-457cfe48" bindtap="__e">-</view><input type="number" data-event-opts="{{[['blur',[['goodsNumBlur',['$0'],[[['cartList','',key],['','storeId',list.$orig.storeId],['goodsList','cartId',v.$orig.cartId]]]]]],['input',[['__set_model',['$0','num','$event',[]],[[['cartList','',key],['','storeId',list.$orig.storeId],['goodsList','cartId',v.$orig.cartId]]]]]]]}}" value="{{v.$orig.num}}" bindblur="__e" bindinput="__e" class="data-v-457cfe48"/><view data-event-opts="{{[['tap',[['jia',['$0'],[[['cartList','',key],['','storeId',list.$orig.storeId],['goodsList','cartId',v.$orig.cartId]]]]]]]}}" class="jia data-v-457cfe48" bindtap="__e">+</view></view></view></view><block wx:if="{{v.$orig.goodsPromotion}}"><view class="activeBox data-v-457cfe48"><block wx:if="{{v.$orig.goodsPromotion.typeCode==1}}"><text class="activeBtn data-v-457cfe48">折扣</text></block><block wx:if="{{v.$orig.goodsPromotion.typeCode==2}}"><text class="activeBtn data-v-457cfe48">一口价</text></block><block wx:if="{{v.$orig.goodsPromotion.typeCode==6}}"><text class="activeBtn data-v-457cfe48">秒杀</text></block><block wx:if="{{v.$orig.goodsPromotion.typeCode==24}}"><text class="activeBtn data-v-457cfe48">新人价</text></block><block wx:if="{{v.$orig.goodsPromotion.typeCode==19}}"><text class="activeBtn distributionBtn data-v-457cfe48">自省分赚</text></block><block wx:if="{{v.$orig.goodsPromotion.name}}"><view class="activity data-v-457cfe48">{{v.$orig.goodsPromotion.name+''}}<block wx:if="{{v.$orig.confineNum>0}}"><text class="data-v-457cfe48">{{",每人限购"+v.$orig.confineNum+"件,超出数量以结算价为准"}}</text></block></view></block></view></block><block wx:if="{{!v.$orig.goodsPromotion&&memberType}}"><view class="member_identification data-v-457cfe48"><block wx:if="{{memberType==1}}"><image src="http://beifa-mall.oss-cn-shanghai.aliyuncs.com/appletsImages/vip_identification.png" mode="heightFix" class="data-v-457cfe48"></image></block><block wx:if="{{memberType==2}}"><image src="http://beifa-mall.oss-cn-shanghai.aliyuncs.com/appletsImages/member_identification.png" mode="heightFix" class="data-v-457cfe48"></image></block></view></block></view></view></uni-swipe-action-item></uni-swipe-action></view></block></view></view><view class="cartLine data-v-457cfe48"></view></view></block></view></block></block><block wx:if="{{cartList.unusefulGoods&&cartList.unusefulGoods.length}}"><view class="unusefulGoods data-v-457cfe48"><view class="unusefulTitle data-v-457cfe48"><text class="unusefu data-v-457cfe48">失效商品</text><text data-event-opts="{{[['tap',[['removeCarts',['$event']]]]]}}" class="removeUnusefuList data-v-457cfe48" bindtap="__e">清空失效商品</text></view><block wx:for="{{cartList.unusefulGoods}}" wx:for-item="v" wx:for-index="i" wx:key="cartId"><view class="everyGoods data-v-457cfe48"><view class="invalid data-v-457cfe48"><text class="data-v-457cfe48">失效</text></view><view class="goodsImage data-v-457cfe48"><image src="{{imgBaseUrls+v.goodsImg}}" mode="aspectFill" class="data-v-457cfe48"></image></view><view class="goodInfo data-v-457cfe48"><view class="ellipsis-two goodsName data-v-457cfe48">{{v.goodsName}}</view><view class="goodsStatus data-v-457cfe48"><block wx:if="{{v.status==1}}"><text class="data-v-457cfe48">已下架</text></block><block wx:if="{{v.status==2}}"><text class="data-v-457cfe48">暂时无货</text></block><block wx:if="{{v.status==3}}"><text class="data-v-457cfe48">已失效</text></block><block wx:if="{{v.status==4}}"><text class="data-v-457cfe48">不存在</text></block></view><view data-event-opts="{{[['tap',[['moveToFavorite',['$0',i],[[['cartList.unusefulGoods','cartId',v.cartId,'cartId']]]]]]]}}" class="removeCollection data-v-457cfe48" bindtap="__e">移入收藏夹</view></view></view></block></view></block><block wx:if="{{!cartList.activityGoods.length&&!cartList.shops.length&&!cartList.unusefulGoods.length}}"><view class="cartNoMsg data-v-457cfe48"><image src="http://beifa-mall.oss-cn-shanghai.aliyuncs.com/appletsImages/cart_empty.png" mode class="data-v-457cfe48"></image><view class="cartNoMsgText data-v-457cfe48">购物车里怎能不囤点好货？</view><view data-event-opts="{{[['tap',[['goHome',['$event']]]]]}}" class="goHomeBtn data-v-457cfe48" bindtap="__e">马上囤货</view></view></block><renovation vue-id="6a21c8ac-3" url="cart/0" class="data-v-457cfe48" bind:__l="__l"></renovation></scroll-view><block wx:if="{{memberPriceInfo.choosePrice&&memberType!=4&&(memberPriceInfo.type||memberPriceInfo.arriveType)}}"><view class="cartHint data-v-457cfe48"><view class="cartPrice data-v-457cfe48"><block wx:if="{{memberPriceInfo.arriveType}}"><view class="data-v-457cfe48">当前结算金额已满足<text class="data-v-457cfe48">{{memberPriceInfo.arriveType}}</text>升级条件</view></block><block wx:if="{{memberPriceInfo.price}}"><block class="data-v-457cfe48">还差<text class="memberGoodsPrice data-v-457cfe48">{{memberPriceInfo.price}}</text>元，</block></block><block wx:if="{{!memberPriceInfo.price}}"><block class="data-v-457cfe48">下单</block></block>{{'即可升级为'+memberPriceInfo.type+''}}</view><block wx:if="{{memberPriceInfo.price}}"><view data-event-opts="{{[['tap',[['gotoGoods']]]]}}" class="goBuyBtn data-v-457cfe48" bindtap="__e">去凑单 ›</view></block></view></block><view class="cartFooterParent data-v-457cfe48"><block wx:if="{{cartList.activityGoods.length||cartList.shops.length||cartList.unusefulGoods.length}}"><view class="cartFoot data-v-457cfe48"><view data-event-opts="{{[['tap',[['selectAll',['$event']]]]]}}" class="{{['chooseCartIcon data-v-457cfe48',chooseCart.selectAllFlag?'active':'']}}" bindtap="__e"></view><text class="data-v-457cfe48">全选</text><block wx:if="{{!editFlag}}"><view class="totalNum data-v-457cfe48">合计<text class="data-v-457cfe48">{{"¥"+$root.g1}}</text></view></block><block wx:if="{{!editFlag}}"><view data-event-opts="{{[['tap',[['pageInit',['$event']]]]]}}" class="settlementBtn data-v-457cfe48" bindtap="__e">{{"结算("+chooseCart.submitArr.length+")"}}</view></block><block wx:if="{{editFlag}}"><view data-event-opts="{{[['tap',[['moveToFavorites']]]]}}" class="removeCollectionBtn data-v-457cfe48" bindtap="__e">移入收藏</view></block><block wx:if="{{editFlag}}"><view data-event-opts="{{[['tap',[['removeCartsBtm',['$event']]]]]}}" class="deleteALlBtn data-v-457cfe48" bindtap="__e">删除</view></block></view></block></view><uni-popup vue-id="6a21c8ac-4" type="bottom" data-ref="couponPopup" class="data-v-457cfe48 vue-ref" bind:__l="__l" vue-slots="{{['default']}}"><coupon-template vue-id="{{('6a21c8ac-5')+','+('6a21c8ac-4')}}" goodsInfo="{{chooseInfo}}" couponInfo="{{couponInfo}}" data-event-opts="{{[['^getItemCoupons',[['getCartStoreCoupons']]],['^closeCouponPopup',[['closeCouponPopup']]]]}}" bind:getItemCoupons="__e" bind:closeCouponPopup="__e" class="data-v-457cfe48" bind:__l="__l"></coupon-template></uni-popup><cart-sku vue-id="6a21c8ac-6" chooseSpec="{{chooseSpec}}" data-ref="cartSku" data-event-opts="{{[['^changeCart',[['changeCart']]]]}}" bind:changeCart="__e" class="data-v-457cfe48 vue-ref" bind:__l="__l"></cart-sku></view>