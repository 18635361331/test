(global["webpackJsonp"] = global["webpackJsonp"] || []).push([["pages/goodsDetails/index"],{

/***/ 185:
/*!*************************************************************!*\
  !*** ./src/main.js?{"page":"pages%2FgoodsDetails%2Findex"} ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(createPage) {

__webpack_require__(/*! uni-pages */ 4);

var _vue = _interopRequireDefault(__webpack_require__(/*! vue */ 2));

var _index = _interopRequireDefault(__webpack_require__(/*! ./pages/goodsDetails/index.vue */ 186));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

createPage(_index.default);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */ 1)["createPage"]))

/***/ }),

/***/ 186:
/*!******************************************!*\
  !*** ./src/pages/goodsDetails/index.vue ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _index_vue_vue_type_template_id_472e43c8_scoped_true___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index.vue?vue&type=template&id=472e43c8&scoped=true& */ 187);
/* harmony import */ var _index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index.vue?vue&type=script&lang=js& */ 189);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__) if(["default"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__[key]; }) }(__WEBPACK_IMPORT_KEY__));
/* harmony import */ var _index_vue_vue_type_style_index_0_id_472e43c8_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./index.vue?vue&type=style&index=0&id=472e43c8&scoped=true&lang=css& */ 199);
/* harmony import */ var _node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */ 33);

var renderjs





/* normalize component */

var component = Object(_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__["default"])(
  _index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__["default"],
  _index_vue_vue_type_template_id_472e43c8_scoped_true___WEBPACK_IMPORTED_MODULE_0__["render"],
  _index_vue_vue_type_template_id_472e43c8_scoped_true___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"],
  false,
  null,
  "472e43c8",
  null,
  false,
  _index_vue_vue_type_template_id_472e43c8_scoped_true___WEBPACK_IMPORTED_MODULE_0__["components"],
  renderjs
)

component.options.__file = "pages/goodsDetails/index.vue"
/* harmony default export */ __webpack_exports__["default"] = (component.exports);

/***/ }),

/***/ 187:
/*!*************************************************************************************!*\
  !*** ./src/pages/goodsDetails/index.vue?vue&type=template&id=472e43c8&scoped=true& ***!
  \*************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_14_0_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_template_id_472e43c8_scoped_true___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--14-0!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=472e43c8&scoped=true& */ 188);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "render", function() { return _node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_14_0_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_template_id_472e43c8_scoped_true___WEBPACK_IMPORTED_MODULE_0__["render"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return _node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_14_0_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_template_id_472e43c8_scoped_true___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "recyclableRender", function() { return _node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_14_0_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_template_id_472e43c8_scoped_true___WEBPACK_IMPORTED_MODULE_0__["recyclableRender"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "components", function() { return _node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_14_0_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_template_id_472e43c8_scoped_true___WEBPACK_IMPORTED_MODULE_0__["components"]; });



/***/ }),

/***/ 188:
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--14-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./src/pages/goodsDetails/index.vue?vue&type=template&id=472e43c8&scoped=true& ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "render", function() { return render; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return staticRenderFns; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "recyclableRender", function() { return recyclableRender; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "components", function() { return components; });
var components
var render = function() {
  var _vm = this
  var _h = _vm.$createElement
  var _c = _vm._self._c || _h
  if (!_vm._isMounted) {
    _vm.e0 = function($event) {
      _vm.operateFlag = false
    }

    _vm.e1 = function($event) {
      _vm.isEvaluate ? (_vm.isEvaluate = false) : _vm.goBack(1)
    }

    _vm.e2 = function($event) {
      _vm.isCollectionFlag ? _vm.cancelGoodsFavorite() : _vm.saveGoodsFavorite()
    }

    _vm.e3 = function($event) {
      $event.stopPropagation()
      _vm.operateFlag = !_vm.operateFlag
    }

    _vm.e4 = function($event) {
      return _vm.$Router.push({
        path: "/pages/shop/index",
        query: {
          storeId: _vm.goodsInfo.belongStore
        }
      })
    }

    _vm.e5 = function($event) {
      _vm.isEvaluate = true
    }
  }
}
var recyclableRender = false
var staticRenderFns = []
render._withStripped = true



/***/ }),

/***/ 189:
/*!*******************************************************************!*\
  !*** ./src/pages/goodsDetails/index.vue?vue&type=script&lang=js& ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_babel_loader_lib_index_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../node_modules/babel-loader/lib!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js& */ 190);
/* harmony import */ var _node_modules_babel_loader_lib_index_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_babel_loader_lib_index_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _node_modules_babel_loader_lib_index_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__) if(["default"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _node_modules_babel_loader_lib_index_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
 /* harmony default export */ __webpack_exports__["default"] = (_node_modules_babel_loader_lib_index_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ 190:
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./src/pages/goodsDetails/index.vue?vue&type=script&lang=js& ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(uni) {

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _index = _interopRequireDefault(__webpack_require__(/*! @/api/goods/index.js */ 92));

var _index2 = _interopRequireDefault(__webpack_require__(/*! @/api/app/index.js */ 27));

var _index3 = _interopRequireDefault(__webpack_require__(/*! @/api/marketing/index.js */ 191));

var _index4 = _interopRequireDefault(__webpack_require__(/*! @/api/trade/index.js */ 102));

var _index5 = _interopRequireDefault(__webpack_require__(/*! @/api/achievement/index.js */ 193));

var _index6 = _interopRequireDefault(__webpack_require__(/*! @/api/lottery/index.js */ 195));

var _index7 = _interopRequireDefault(__webpack_require__(/*! @/api/member/index.js */ 23));

var _memberConfig = _interopRequireDefault(__webpack_require__(/*! @/common/js/memberConfig.js */ 197));

var _mixin = _interopRequireDefault(__webpack_require__(/*! ./mixin.js */ 198));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
var goodsBanner = function goodsBanner() {
  Promise.all(/*! require.ensure | pages/goodsDetails/goodsBanner */[__webpack_require__.e("common/vendor"), __webpack_require__.e("pages/goodsDetails/goodsBanner")]).then((function () {
    return resolve(__webpack_require__(/*! ./goodsBanner.vue */ 1132));
  }).bind(null, __webpack_require__)).catch(__webpack_require__.oe);
};

var coupon = function coupon() {
  Promise.all(/*! require.ensure | pages/goodsDetails/coupon */[__webpack_require__.e("common/vendor"), __webpack_require__.e("pages/goodsDetails/coupon")]).then((function () {
    return resolve(__webpack_require__(/*! ./coupon.vue */ 1141));
  }).bind(null, __webpack_require__)).catch(__webpack_require__.oe);
};

var activity = function activity() {
  __webpack_require__.e(/*! require.ensure | pages/goodsDetails/activity */ "pages/goodsDetails/activity").then((function () {
    return resolve(__webpack_require__(/*! ./activity.vue */ 1148));
  }).bind(null, __webpack_require__)).catch(__webpack_require__.oe);
};

var container = function container() {
  Promise.all(/*! require.ensure | pages/goodsDetails/container */[__webpack_require__.e("common/vendor"), __webpack_require__.e("pages/goodsDetails/container")]).then((function () {
    return resolve(__webpack_require__(/*! ./container.vue */ 1155));
  }).bind(null, __webpack_require__)).catch(__webpack_require__.oe);
};

var evaluate = function evaluate() {
  __webpack_require__.e(/*! require.ensure | pages/goodsDetails/evaluate */ "pages/goodsDetails/evaluate").then((function () {
    return resolve(__webpack_require__(/*! ./evaluate.vue */ 1162));
  }).bind(null, __webpack_require__)).catch(__webpack_require__.oe);
};

var shop = function shop() {
  Promise.all(/*! require.ensure | pages/goodsDetails/shop */[__webpack_require__.e("common/vendor"), __webpack_require__.e("pages/goodsDetails/shop")]).then((function () {
    return resolve(__webpack_require__(/*! ./shop.vue */ 1169));
  }).bind(null, __webpack_require__)).catch(__webpack_require__.oe);
};

var footNoMore = function footNoMore() {
  __webpack_require__.e(/*! require.ensure | components/footNoMore/index */ "components/footNoMore/index").then((function () {
    return resolve(__webpack_require__(/*! @/components/footNoMore/index.vue */ 1125));
  }).bind(null, __webpack_require__)).catch(__webpack_require__.oe);
};

var goodsDetails = function goodsDetails() {
  Promise.all(/*! require.ensure | pages/goodsDetails/details */[__webpack_require__.e("common/vendor"), __webpack_require__.e("pages/goodsDetails/details")]).then((function () {
    return resolve(__webpack_require__(/*! ./details.vue */ 1176));
  }).bind(null, __webpack_require__)).catch(__webpack_require__.oe);
};

var footOperate = function footOperate() {
  Promise.all(/*! require.ensure | pages/goodsDetails/footOperate */[__webpack_require__.e("common/vendor"), __webpack_require__.e("pages/goodsDetails/footOperate")]).then((function () {
    return resolve(__webpack_require__(/*! ./footOperate.vue */ 1183));
  }).bind(null, __webpack_require__)).catch(__webpack_require__.oe);
};

var evaluateDetail = function evaluateDetail() {
  __webpack_require__.e(/*! require.ensure | pages/goodsDetails/evaluateDetail */ "pages/goodsDetails/evaluateDetail").then((function () {
    return resolve(__webpack_require__(/*! ./evaluateDetail.vue */ 1190));
  }).bind(null, __webpack_require__)).catch(__webpack_require__.oe);
};

var openBooking = function openBooking() {
  __webpack_require__.e(/*! require.ensure | pages/goodsDetails/openBooking */ "pages/goodsDetails/openBooking").then((function () {
    return resolve(__webpack_require__(/*! ./openBooking.vue */ 1197));
  }).bind(null, __webpack_require__)).catch(__webpack_require__.oe);
};

var _default = {
  mixins: [_mixin.default],
  data: function data() {
    return {
      titleChooseIndex: 0,
      titleTransparent: 0,
      //头部透明度
      scrollTopNum: "",
      //滚动条距离
      operateFlag: false,
      //头部...操作按钮是否显示开关
      gobackFlag: false,
      //是否展示返回按钮
      isEvaluate: false,
      //是否进入到评价页面
      chooseSpceData: {
        name: "",
        //选中的名称
        checkList: [],
        //选中和未选中的sku列表  用来循环判断是否有未选中的
        number: 1,
        price: null
      },
      singleProduct: {//选中sku时若有对应的营销活动将对应展示其相关信息    initSingleProduct 
      },
      reducePromotions: [],
      //满减列表   获取详情后进行去重 拿到列表
      seckillInfo: {//秒杀相关信息
      },
      increaseFlag: true,
      //是否展示sku  true展示规格  false不展示   如果转增的话  sku弹窗不展示规格
      memberInfo: uni.getStorageSync("userInfo") ? JSON.parse(uni.getStorageSync("userInfo")) : {}
    };
  },
  onShow: function onShow() {
    this.increaseFlag = true;
    this.memberInfo = uni.getStorageSync("userInfo") ? JSON.parse(uni.getStorageSync("userInfo")) : {};

    if (this.goodsInfoId && Object.keys(this.goodsInfo).length) {
      this.isGetInfo = false; // 判断商品是否是秒杀

      this.marketingSessionItemFlag(); // 商品详情

      this.getGoodsDetail();

      if (uni.getStorageSync("sessionId")) {
        this.findGoodsFavorite(); //查看商品是否被收藏
      }
    }
  },
  onLoad: function onLoad(query) {
    //扫码进入该页面后获取分享码
    try {
      if (this.$Route.query.scene) {
        this.goodsInfoId = decodeURIComponent(this.$Route.query.scene).split(",")[0];

        if (decodeURIComponent(this.$Route.query.scene).split(",")[1]) {
          uni.setStorageSync("routerShareNumber", decodeURIComponent(this.$Route.query.scene).split(",")[1]);
        }
      }

      if (query && query.scene) {
        this.goodsInfoId = decodeURIComponent(query.scene).split(",")[0];

        if (decodeURIComponent(query.scene).split(",")[1]) {
          uni.setStorageSync("routerShareNumber", decodeURIComponent(query.scene).split(",")[1]);
        }
      }

      if (query && query.goodsId) {
        this.goodsInfoId = query.goodsId;

        if (query.shareNumber) {
          uni.setStorageSync("routerShareNumber", query.shareNumber);
        }
      }

      if (this.$Route.query.goodsId) {
        this.goodsInfoId = this.$Route.query.goodsId;

        if (this.$Route.query.shareNumber) {
          uni.setStorageSync("routerShareNumber", this.$Route.query.shareNumber);
        }
      }

      this.zhuge.track("商品详情页", {
        "商品id": this.goodsInfoId
      }); // 判断商品是否是秒杀

      this.marketingSessionItemFlag(); // 商品详情

      this.getGoodsDetail();

      if (uni.getStorageSync("sessionId")) {
        this.findGoodsFavorite(); //查看商品是否被收藏
      }
    } catch (err) {
      uni.showToast({
        title: "系统错误",
        icon: "none"
      });
      uni.switchTab({
        url: "/pages/index/index"
      });
    }
  },
  methods: {
    getGoodsDetail: function getGoodsDetail() {
      var _this = this;

      //获取商品详情
      uni.showLoading({
        title: "加载中..."
      });

      _index.default.getGoodsDetail(this.goodsInfoId).then(function (res) {
        uni.hideLoading();

        if (res.data.code == 200) {
          // 预售信息修改
          var params = res.data.data;

          if (params.presaleInfo && params.presaleFlag) {
            params.presaleInfo.deliveryStart = _this.getTime(params.presaleInfo.deliveryStartTime);
            res.data.data.presaleInfo.deliveryEnd = _this.getTime(params.presaleInfo.deliveryEndTime);
            res.data.data.presaleInfo.presaleStart = _this.getTime(params.presaleInfo.presaleStartTime);
            res.data.data.presaleInfo.presaleEnd = _this.getTime(params.presaleInfo.presaleEndTime);
            res.data.data.presaleInfo.deliveryStartTime = _this.$utils.formatDate(res.data.data.presaleInfo.deliveryStartTime, "yyyy年MM月dd日hh:mm");
            res.data.data.presaleInfo.deliveryEndTime = _this.$utils.formatDate(res.data.data.presaleInfo.deliveryEndTime, "yyyy年MM月dd日hh:mm");
          } // 预售信息修改结束


          if (res.data.data.videoInfo) {
            res.data.data.itemPictureDtos.unshift({
              isVideo: true,
              name: res.data.data.videoInfo
            });
          }

          _this.goodsInfo = res.data.data;
          _this.isGetInfo = true;
          _this.memberInfo = uni.getStorageSync("userInfo") ? JSON.parse(uni.getStorageSync("userInfo")) : {};

          _this.initReducePromotions(); //初始化满减活动列表


          _this.$nextTick(function () {
            if (_this.$Route.query.transferOrderId) {
              _this.$refs.container.openSkuPopup();
            }
          });
        } else {
          uni.showToast({
            title: res.data.message,
            icon: "none"
          });
        }
      });
    },
    getTime: function getTime(time) {
      return {
        year: this.$utils.formatDate(time, "yyyy"),
        month: this.$utils.formatDate(time, "MM"),
        day: this.$utils.formatDate(time, "dd"),
        hours: this.$utils.formatDate(time, "hh:mm")
      };
    },
    initReducePromotions: function initReducePromotions() {
      //初始化满减活动列表
      this.reducePromotions = [];

      if (this.goodsInfo.skuPromotionList) {
        for (var i = 0; i < this.goodsInfo.skuPromotionList.length; i++) {
          for (var j = 0; j < this.goodsInfo.skuPromotionList[i].reducePromotions.length; j++) {
            if (this.judgeReduce(this.goodsInfo.skuPromotionList[i].reducePromotions[j])) {
              this.reducePromotions.push(this.goodsInfo.skuPromotionList[i].reducePromotions[j]);
            }
          }
        }
      }
    },
    judgeReduce: function judgeReduce(reduce) {
      //满减券去重
      for (var i = 0; i < this.reducePromotions.length; i++) {
        if (this.reducePromotions[i].id == reduce.id) {
          return false;
        }
      }

      return true;
    },
    initSingleProduct: function initSingleProduct() {
      //选中规格属性后计算营销活动
      if (this.chooseSpceData.skuId) {
        if (this.goodsInfo.skuPromotionList) {
          for (var i = 0; i < this.goodsInfo.skuPromotionList.length; i++) {
            if (this.goodsInfo.skuPromotionList[i].skuId == this.chooseSpceData.skuId) {
              this.singleProduct = this.goodsInfo.skuPromotionList[i];
            }
          }
        }
      } else {
        this.singleProduct = {};
      }
    },
    marketingSessionItemFlag: function marketingSessionItemFlag() {
      var _this2 = this;

      //判断商品是否是秒杀
      _index3.default.marketingSessionItemFlag(this.goodsInfoId).then(function (res) {
        if (res.data.code == 200) {
          if (res.data.data) {
            _this2.seckillInfo = res.data.data;
          } else {
            _this2.seckillInfo = {};
          }
        } else {
          uni.showToast({
            title: res.data.message,
            icon: "none"
          });
        }
      });
    },
    addCart: function addCart() {
      //加入购物车
      if (this.addCartJudge()) {
        var params = {
          goodsId: this.chooseSpceData.skuId,
          goodsPrice: this.chooseSpceData.price,
          num: this.chooseSpceData.number
        };

        _index4.default.addCart(params).then(function (res) {
          if (res.data.code == 200) {
            uni.showToast({
              title: "添加购物车成功",
              icon: "none"
            });
          } else {
            uni.showToast({
              title: res.data.message,
              icon: "none"
            });
          }
        });
      }
    },
    addCartJudge: function addCartJudge() {
      //加入购物车前的判断
      if (!uni.getStorageSync("sessionId")) {
        this.$Router.push({
          path: "/pages/login/index"
        });
        return false;
      }

      if (!this.chooseSpceData.skuId) {
        uni.showToast({
          title: this.chooseSpceData.name,
          icon: "none"
        });
        this.increaseFlag = true;
        this.$refs.container.openSkuPopup();
        return false;
      } // 选择的数量大于库存数


      if (this.chooseSpceData.stockNumber <= 0) {
        uni.showToast({
          title: "该商品规格库存不足",
          icon: "none"
        });
        return false;
      }

      if (this.chooseSpceData.number > this.chooseSpceData.stockNumber) {
        uni.showToast({
          title: "选择的数量大于库存量",
          icon: "none"
        });
        return false;
      }

      return true;
    },
    bugNow: function bugNow() {
      var _this3 = this;

      //查看是否可以购买
      if (!this.addCartJudge()) {
        return;
      } // singlePromotionId   结算时是否展视活动价


      var singlePromotionId = "";

      if (this.goodsInfo.singlePromotionType == 22 && new Date().getTime() >= this.seckillInfo.marketingSessionStartTime) {
        //秒杀开始时才传递
        singlePromotionId = this.seckillInfo.marketingId;
      } else {
        singlePromotionId = "";
      }

      var newtype = "";

      if (this.goodsInfo.singlePromotionType > 50) {
        newtype = this.goodsInfo.singlePromotionType;
        singlePromotionId = this.goodsInfo.promotionId;
      }

      _index2.default.bugNow(this.chooseSpceData.skuId, this.chooseSpceData.number, this.$Route.query.transferOrderId ? 1 : 0).then(function (res) {
        if (res.data.code == 200) {
          _this3.$Router.push({
            path: "/pages/settlement/index",
            query: {
              cartIds: _this3.chooseSpceData.skuId || "",
              goodsNum: _this3.chooseSpceData.number || "",
              singlePromotionId: singlePromotionId || "",
              newtype: _this3.goodsInfo.singlePromotionType || "",
              transferOrderId: _this3.$Route.query.transferOrderId || "",
              stockNumber: _this3.chooseSpceData.stockNumber
            }
          });
        } else {
          uni.showToast({
            title: res.data.message,
            icon: "none"
          });
        }
      });
    },
    increaseBuy: function increaseBuy(flag) {
      //转增购买
      this.$set(this.$data, "increaseFlag", flag);
      this.$refs.container.openSku();
    },
    changeIncreaseFlag: function changeIncreaseFlag(flag) {
      this.increaseFlag = flag;
    },
    updateSku: function updateSku(item) {
      //更新sku信息
      for (var i in item) {
        this.$set(this.chooseSpceData, i, item[i]);
        this.initSingleProduct();
      }
    },
    UpdateGoodsInfo: function UpdateGoodsInfo(item) {
      //更新商品数据
      for (var i in item) {
        this.$set(this.goodsInfo, i, item[i]);
      }
    },
    evaluateJump: function evaluateJump(element) {
      var _this4 = this;

      //点击滚动位置变化
      var viewTop = uni.createSelectorQuery().select("." + element);
      var titleHeight = uni.createSelectorQuery().select(".goodsTitle");
      titleHeight.boundingClientRect(function (res) {
        viewTop.boundingClientRect(function (data) {
          uni.pageScrollTo({
            duration: 0,
            scrollTop: data.top + _this4.scrollTopNum - 40
          });
        }).exec();
      }).exec();
    },
    goHome: function goHome() {
      uni.switchTab({
        url: '/pages/index/index'
      });
    },
    goMyPage: function goMyPage() {
      uni.switchTab({
        url: "/pages/my/index"
      });
    }
  },
  onReachBottom: function onReachBottom() {
    //滚动到底部  如果是在评价详情页的话调用子组件加载更多评价
    if (this.isEvaluate) {
      this.$refs.evaluateDetails.getMoreComment();
    }
  },
  beforeRouteLeave: function beforeRouteLeave(to, from, next) {
    //监听页面卸载  关闭sku弹窗
    next();
    this.$refs.container.closeSkuPopup();
  },
  onPageScroll: function onPageScroll(params) {
    var _this5 = this;

    //头部透明度变化的数值
    this.titleTransparent = params.scrollTop / 200;
    this.scrollTopNum = params.scrollTop;
    var viewTop = uni.createSelectorQuery().selectAll(".Elevator");
    var height2 = 40;
    var titleHeight = uni.createSelectorQuery().select(".goodsTitle");
    titleHeight.boundingClientRect(function (res) {
      height2 = res.height;
    }).exec();
    viewTop.boundingClientRect(function (data) {
      for (var i = 0; i < data.length; i++) {
        if (data[i].top + params.scrollTop - height2 <= params.scrollTop) {
          _this5.titleChooseIndex = i;
        }
      }
    }).exec();
  },
  onShareAppMessage: function onShareAppMessage(res) {
    //发送给朋友
    return {
      title: this.goodsInfo.name,
      path: "/pages/goodsDetails/index?shareNumber=" + (uni.getStorageSync("shareNumber") ? uni.getStorageSync("shareNumber") : "") + "&goodsId=" + this.goodsInfoId,
      imageUrl: this.$config.imgBaseUrl + this.goodsInfo.itemPictureDtos[0].name
    };
  },
  onShareTimeline: function onShareTimeline(res) {
    //分享到朋友圈
    return {
      title: this.goodsInfo.name,
      path: "/pages/goodsDetails/index?shareNumber=" + (uni.getStorageSync("shareNumber") ? uni.getStorageSync("shareNumber") : "") + "&goodsId=" + this.goodsInfoId,
      imageUrl: this.$config.imgBaseUrl + this.goodsInfo.itemPictureDtos[0].name
    };
  },
  components: {
    goodsBanner: goodsBanner,
    coupon: coupon,
    activity: activity,
    goodsDetails: goodsDetails,
    shop: shop,
    footNoMore: footNoMore,
    evaluate: evaluate,
    footOperate: footOperate,
    evaluateDetail: evaluateDetail,
    container: container,
    openBooking: openBooking
  }
};
exports.default = _default;
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */ 1)["default"]))

/***/ }),

/***/ 199:
/*!***************************************************************************************************!*\
  !*** ./src/pages/goodsDetails/index.vue?vue&type=style&index=0&id=472e43c8&scoped=true&lang=css& ***!
  \***************************************************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_vue_cli_service_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_vue_cli_service_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_2_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_style_index_0_id_472e43c8_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-2!../../../node_modules/postcss-loader/src??ref--6-oneOf-1-3!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=472e43c8&scoped=true&lang=css& */ 200);
/* harmony import */ var _node_modules_vue_cli_service_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_vue_cli_service_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_2_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_style_index_0_id_472e43c8_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_vue_cli_service_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_vue_cli_service_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_2_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_style_index_0_id_472e43c8_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _node_modules_vue_cli_service_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_vue_cli_service_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_2_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_style_index_0_id_472e43c8_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__) if(["default"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _node_modules_vue_cli_service_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_vue_cli_service_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_2_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_style_index_0_id_472e43c8_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
 /* harmony default export */ __webpack_exports__["default"] = (_node_modules_vue_cli_service_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_vue_cli_service_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_2_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_style_index_0_id_472e43c8_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ 200:
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!./node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-2!./node_modules/postcss-loader/src??ref--6-oneOf-1-3!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./src/pages/goodsDetails/index.vue?vue&type=style&index=0&id=472e43c8&scoped=true&lang=css& ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
    if(false) { var cssReload; }
  

/***/ })

},[[185,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/goodsDetails/index.js.map