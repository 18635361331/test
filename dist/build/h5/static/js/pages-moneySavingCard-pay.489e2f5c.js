(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-moneySavingCard-pay"],{"2bdc":function(e,t,i){"use strict";i.r(t);var a=i("f1b5"),n=i("d038");for(var o in n)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(o);i("2e77");var c,r=i("f0c5"),d=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"e1bbc298",null,!1,a["a"],c);t["default"]=d.exports},"2c57":function(e,t,i){"use strict";var a=i("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(i("5e8a")),o=a(i("b775")),c={buildMiniPrepPaySign:function(e){return o.default.post(n.default.buildMiniPrepPaySign,e)},buildPrepPaySign:function(e){return o.default.post(n.default.buildPrepPaySign,e)}};t.default=c},"2e77":function(e,t,i){"use strict";var a=i("f537"),n=i.n(a);n.a},"5e8a":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={buildMiniPrepPaySign:"/payment/wechat/buildMiniPrepPaySign",buildPrepPaySign:"/payment/wechat/buildPrepPaySign"},n=a;t.default=n},"640c":function(e,t,i){"use strict";var a=i("4ea4");i("ac1f"),i("466d"),i("5319"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(i("2c57")),o=a(i("081b")),c={data:function(){return{payInfo:{orderPayId:1,orderType:"cycle"},payPrice:"",chooseType:"微信",isWxFlag:!0,defaultTitleDto:{title:"收银台"},wxCode:""}},methods:{chooseChange:function(e){this.chooseType=e},buyNow:function(){this.getH5Code()},getH5Code:function(){var e=this;o.default.wxPubAppId().then((function(t){if(200==t.data.code){var i="?orderPayId="+e.$Route.query.orderPayId+"&payPrice="+e.$Route.query.payPrice+"&goodsId="+e.$Route.query.goodsId,a="https://"+location.host+location.pathname+i;location.href=location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+t.data.data+"&redirect_uri="+encodeURIComponent(a)+"&response_type=code&scope=snsapi_userinfo"}else uni.showToast({title:t.data.message,icon:"none"})}))},buildPrepPaySign:function(){var e=this;n.default.buildPrepPaySign({code:this.wxCode,orderPayId:this.$Route.query.orderPayId,orderType:"cycle"}).then((function(t){200==t.data.code?e.requestH5Payment(t.data.data):uni.showToast({title:t.data.message,icon:"none"})}))},requestH5Payment:function(e){"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",this.WeixinJSBridgeH5,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",this.WeixinJSBridgeH5),document.attachEvent("onWeixinJSBridgeReady",this.WeixinJSBridgeH5)):this.WeixinJSBridgeH5(e)},WeixinJSBridgeH5:function(e){var t=this;WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:e.appId,timeStamp:e.timeStamp,nonceStr:e.nonceStr,package:e.package,signType:e.signType,paySign:e.paySign},(function(e){"get_brand_wcpay_request:ok"==e.err_msg?t.payCallBack(!0):(e.err_msg,t.payCallBack(!1))}))},buildMiniPrepPaySign:function(e){var t=this;n.default.buildMiniPrepPaySign({code:e,orderPayId:this.$Route.query.orderPayId,orderType:"cycle"}).then((function(e){200==e.data.code?t.requestpayment(e.data.data):uni.showToast({title:e.data.message,icon:"none"})}))},requestpayment:function(e){var t=this;uni.requestPayment({provider:"payment",timeStamp:e.timeStamp,nonceStr:e.nonceStr,package:e.package,paySign:e.paySign,signType:e.signType,success:function(e){t.payCallBack(!0)},fail:function(e){t.payCallBack(!1)}})},payCallBack:function(e){e?(uni.showToast({title:"支付成功",icon:"none"}),this.$Router.replace({path:"/pages/payment/index",query:{source:1,payId:this.$Route.query.orderPayId}})):uni.showToast({title:"用户已取消支付",icon:"none"})},closeAuthorize:function(){this.$refs.authorize.close()}},mounted:function(){var e=navigator.userAgent.toLowerCase();"micromessenger"==e.match(/MicroMessenger/i)?this.isWxFlag=!0:this.isWxFlag=!1,this.payPrice=this.$Route.query.payPrice},onLoad:function(e){e.code&&(this.wxCode=e.code,this.buildPrepPaySign())}};t.default=c},"963d":function(e,t,i){var a=i("4bad");t=a(!1),t.push([e.i,".commonPageTitle[data-v-e1bbc298]{background-color:#f5f5f5;padding-top:%?20?%;\npadding-top:%?88?%;\nmin-height:100vh}.payInfo[data-v-e1bbc298]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;width:%?678?%;height:%?180?%;background-color:#fff;border-radius:%?16?%;border:%?4?% solid #e4e4e4;margin:0 auto;padding:0 %?20?%;margin-top:16px;position:relative}.payInfo.active[data-v-e1bbc298]{border:%?2?% solid #fdc900}.payInfo.isEnterprise[data-v-e1bbc298]{border:%?2?% solid #f1bd9b}.payType[data-v-e1bbc298]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.payType uni-image[data-v-e1bbc298]{width:%?48?%;height:%?48?%;margin-right:%?17?%}.buyNow[data-v-e1bbc298]{position:fixed;bottom:0;left:0;height:%?100?%;background-color:#fff;width:100%;padding:0 %?30?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.buyNowBtn[data-v-e1bbc298]{width:100%;height:%?78?%;background-color:#fdc900;color:#000;border-radius:%?52?%;font-size:%?30?%;text-align:center;line-height:%?78?%}.buyNowBtn.active[data-v-e1bbc298]{background:-webkit-linear-gradient(left,#f1bd9b,#f8d8ca);background:linear-gradient(90deg,#f1bd9b,#f8d8ca)}.selectIcon[data-v-e1bbc298]{position:absolute;right:0;top:0;width:%?40?%;height:%?40?%;\n\t\t/* background: url() no-repeat; */background-size:100% 100%}.authorizeView[data-v-e1bbc298]{width:%?500?%;background-color:#fff;border-radius:%?8?%;padding:%?30?%}.authorizaImage[data-v-e1bbc298]{width:%?200?%;height:%?200?%;margin:0 auto;text-align:center;padding:%?20?% 0;position:relative}.authorBtnImage[data-v-e1bbc298]{width:100%;height:100%;background:url(http://beifa-mall.oss-cn-shanghai.aliyuncs.com/appletsImages/headBg2.png) no-repeat 50%;background-size:100%;position:absolute;left:0;top:0;z-index:1}.authorTopImage[data-v-e1bbc298]{width:100%;height:100%;background:url(http://beifa-mall.oss-cn-shanghai.aliyuncs.com/appletsImages/headBg1.png) no-repeat 50%;background-size:100%;position:absolute;left:0;top:0;z-index:20}.authUserImage[data-v-e1bbc298]{width:%?120?%;height:%?120?%;position:absolute;top:%?38?%;left:%?40?%;z-index:10;border-radius:50%;overflow:hidden}.noApplyInfoBtn[data-v-e1bbc298]{background-color:#fff ;border:1px solid #ccc;margin:%?20?% auto 0}.authorizaBtnBox[data-v-e1bbc298]{width:85%;height:%?80?%;line-height:%?80?%;font-size:%?36?%;border-radius:%?40?%;text-align:center}",""]),e.exports=t},d038:function(e,t,i){"use strict";i.r(t);var a=i("640c"),n=i.n(a);for(var o in a)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(o);t["default"]=n.a},f1b5:function(e,t,i){"use strict";var a;i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return o})),i.d(t,"a",(function(){return a}));var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"page commonPageTitle"},[i("defaultTitle",{attrs:{dto:e.defaultTitleDto}}),i("v-uni-view",{staticClass:"payInfo",class:{active:"微信"==e.chooseType},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.chooseChange("微信")}}},[i("v-uni-view",{staticClass:"payType"},[i("v-uni-image",{attrs:{src:"http://beifa-mall.oss-cn-shanghai.aliyuncs.com/appletsImages/icon_weixin.png",mode:""}}),e._v("微信")],1),i("v-uni-view",[e._v("￥"+e._s(e.payPrice))]),"微信"==e.chooseType?i("v-uni-view",{staticClass:"selectIcon"}):e._e()],1),e.isWxFlag?e._e():i("v-uni-view",{staticClass:"payInfo",class:{active:"支付宝"==e.chooseType},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.chooseChange("支付宝")}}},[i("v-uni-view",{staticClass:"payType"},[i("v-uni-image",{attrs:{src:"http://beifa-mall.oss-cn-shanghai.aliyuncs.com/appletsImages/icon_zhi.png",mode:""}}),e._v("支付宝")],1),i("v-uni-view",[e._v("￥"+e._s(e.payPrice))]),"支付宝"==e.chooseType?i("v-uni-view",{staticClass:"selectIcon"}):e._e()],1),i("v-uni-view",{staticClass:"buyNow"},[e.payPrice?i("v-uni-view",{staticClass:"buyNowBtn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.buyNow.apply(void 0,arguments)}}},[e._v(e._s(e.chooseType)+"支付￥"+e._s(e.payPrice))]):e._e()],1)],1)},o=[]},f537:function(e,t,i){var a=i("963d");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=i("4f06").default;n("acb516e0",a,!0,{sourceMap:!1,shadowMode:!1})}}]);