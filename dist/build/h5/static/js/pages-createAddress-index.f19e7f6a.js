(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-createAddress-index"],{"072e":function(e,t,a){"use strict";var s=a("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a("8fef")),n=s(a("b775")),d={provices:function(){return n.default.post(i.default.provices,{})},cities:function(e){return n.default.post(i.default.cities+e,{})},counties:function(e){return n.default.post(i.default.counties+e,{})},towns:function(e){return n.default.post(i.default.towns+e,{})}};t.default=d},"1e75":function(e,t,a){var s=a("4bad");t=s(!1),t.push([e.i,".address[data-v-17ec38f6]{background-color:#f5f5f5;height:100vh}.collectTitle[data-v-17ec38f6]{position:relative}.createAddress[data-v-17ec38f6]{width:100%;padding-bottom:%?24?%}.everyBox[data-v-17ec38f6]{width:100%;height:%?115?%;line-height:%?115?%;position:relative;padding-left:%?28?%;display:-webkit-box;display:-webkit-flex;display:flex;color:#686868;-webkit-box-align:center;-webkit-align-items:center;align-items:center;border-bottom:1px solid #e4e4e4;background-color:#fff}.everyBox uni-input[data-v-17ec38f6]{font-size:%?28?%}.whereAddress[data-v-17ec38f6]{-webkit-box-flex:1;-webkit-flex:1;flex:1;overflow:hidden}.arrow[data-v-17ec38f6]{width:%?76?%;height:%?32?%;background:url(http://beifa-mall.oss-cn-shanghai.aliyuncs.com/appletsImages/rightArrow.png) no-repeat 50%;background-size:%?12?% %?24?%}.defaultBtn[data-v-17ec38f6]{-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding-right:%?20?%}.addressHint[data-v-17ec38f6]{width:100%;height:%?24?%;color:#9b9b9b;padding-top:%?10?%;padding-left:%?31?%}.saveAddress[data-v-17ec38f6]{width:calc(100% - %?60?%);height:%?88?%;text-align:center;line-height:%?88?%;background-color:#ff1558;margin:%?20?% auto;border-radius:%?71?%;margin-top:%?100?%;color:#fff;font-size:%?36?%}.detailed[data-v-17ec38f6]{padding-right:%?30?%}.addressPopup[data-v-17ec38f6]{width:100%;height:%?840?%;background-color:#fff}.addressPopupTitle[data-v-17ec38f6]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding:0 %?20?%;height:%?88?%;-webkit-box-align:center;-webkit-align-items:center;align-items:center;border-bottom:1px solid #e6e6e6}.cancel[data-v-17ec38f6]{color:#999}.createAddressBox[data-v-17ec38f6]{height:calc(100% - %?88?%)}",""]),e.exports=t},"21c3":function(e,t,a){"use strict";a.r(t);var s=a("735ee"),i=a("d9d4");for(var n in i)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(n);a("232d");var d,r=a("f0c5"),o=Object(r["a"])(i["default"],s["b"],s["c"],!1,null,"17ec38f6",null,!1,s["a"],d);t["default"]=o.exports},"232d":function(e,t,a){"use strict";var s=a("f169"),i=a.n(s);i.a},"4d69":function(e,t,a){"use strict";var s=a("bead"),i=a.n(s);i.a},"67ef":function(e,t,a){"use strict";a.r(t);var s=a("9961"),i=a.n(s);for(var n in s)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return s[e]}))}(n);t["default"]=i.a},"735ee":function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return s}));var s={uniPopup:a("1c89").default},i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"page address"},[a("defaultTitle",{attrs:{dto:e.defaultTitleDto}}),a("v-uni-view",{staticClass:"createAddress"},[a("v-uni-view",{staticClass:"everyBox"},[a("v-uni-text",[e._v("收货人：")]),a("v-uni-input",{staticClass:"whereAddress",attrs:{type:"text"},model:{value:e.params.name,callback:function(t){e.$set(e.params,"name",t)},expression:"params.name"}})],1),a("v-uni-view",{staticClass:"everyBox"},[a("v-uni-text",[e._v("联系方式：")]),a("v-uni-input",{staticClass:"whereAddress",attrs:{type:"text"},model:{value:e.params.telephone,callback:function(t){e.$set(e.params,"telephone",t)},expression:"params.telephone"}})],1),a("v-uni-view",{staticClass:"everyBox",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.openAddress.apply(void 0,arguments)}}},[a("v-uni-text",[e._v("所在地区：")]),e.params.provinceName?a("v-uni-text",{staticClass:"whereAddress ellipsis-one"},[e._v(e._s(e.params.provinceName)+e._s(e.params.cityName)+e._s(e.params.districtName)+e._s(e.params.townName))]):a("v-uni-text",{staticClass:"whereAddress"},[e._v("选择所在区域")]),a("v-uni-view",{staticClass:"arrow"})],1),a("v-uni-view",{staticClass:"everyBox"},[a("v-uni-text",[e._v("详细地址：")]),a("v-uni-input",{staticClass:"whereAddress detailed",attrs:{placeholder:"请输入详细地址",placeholderClass:"placeholder",type:"text"},model:{value:e.params.address,callback:function(t){e.$set(e.params,"address",t)},expression:"params.address"}})],1),a("v-uni-view",{staticClass:"everyBox defaultBtn"},[a("v-uni-text",[e._v("设为默认地址")]),a("v-uni-switch",{attrs:{color:"#ff1558",checked:!!e.params.isDefault},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.switchChange.apply(void 0,arguments)}}})],1),a("v-uni-view",{staticClass:"addressHint"},[e._v("每次下单时会使用该地址")])],1),a("v-uni-view",{staticClass:"saveAddress",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.saveAddress.apply(void 0,arguments)}}},[e._v("保存地址")]),a("uni-popup",{ref:"addressPopup",attrs:{type:"bottom"}},[a("v-uni-view",{staticClass:"addressPopup"},[a("v-uni-view",{staticClass:"addressPopupTitle"},[a("v-uni-text",[e._v("请选择所在地区")]),a("v-uni-text",{staticClass:"cancel",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.closeAddPopup.apply(void 0,arguments)}}},[e._v("取消")])],1),a("v-uni-view",{staticClass:"createAddressBox"},[a("selectAddress",{attrs:{defaultAddress:e.params},on:{addressChange:function(t){arguments[0]=t=e.$handleEvent(t),e.addressChange.apply(void 0,arguments)}}})],1)],1)],1)],1)},n=[]},"8fef":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s={provices:"/system/district/provices",cities:"/system/district/cities/",counties:"/system/district/counties/",towns:"/system/district/towns/"},i=s;t.default=i},9961:function(e,t,a){"use strict";var s=a("4ea4");a("a434"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var i=s(a("1da1")),n=s(a("072e")),d={props:["defaultAddress"],data:function(){return{selectedItems:[],provinceList:[],cityList:[],districtList:[],townList:[],tabIndex:"",level:4}},methods:{setDefaultData:function(){var e=this;return(0,i.default)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.chooseAddr(0,{id:e.defaultAddress.provinceId,fullName:e.defaultAddress.provinceName},!0);case 2:return t.next=4,e.chooseAddr(1,{id:e.defaultAddress.cityId,fullName:e.defaultAddress.cityName},!0);case 4:return t.next=6,e.chooseAddr(2,{id:e.defaultAddress.districtId,fullName:e.defaultAddress.districtName},!0);case 6:if(!e.defaultAddress.townId){t.next=9;break}return t.next=9,e.chooseAddr(3,{id:e.defaultAddress.townId,fullName:e.defaultAddress.townName},!0);case 9:e.tabIndex=e.tabIndex-1;case 10:case"end":return t.stop()}}),t)})))()},provices:function(){var e=this;return(0,i.default)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n.default.provices().then((function(t){200==t.data.code?e.provinceList=t.data.data:uni.showToast({title:t.data.message,icon:"none"})}));case 2:case"end":return t.stop()}}),t)})))()},cities:function(e){var t=this;return(0,i.default)(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,n.default.cities(e).then((function(e){200==e.data.code?t.cityList=e.data.data:uni.showToast({title:e.data.message,icon:"none"})}));case 2:case"end":return a.stop()}}),a)})))()},counties:function(e){var t=this;return(0,i.default)(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,n.default.counties(e).then((function(e){200==e.data.code?t.districtList=e.data.data:uni.showToast({title:e.data.message,icon:"none"})}));case 2:case"end":return a.stop()}}),a)})))()},towns:function(e){var t=this;return(0,i.default)(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,n.default.towns(e).then((function(e){200==e.data.code?(t.townList=e.data.data,t.level=e.data.data.length?4:3):uni.showToast({title:e.data.message,icon:"none"})}));case 2:case"end":return a.stop()}}),a)})))()},chooseAddr:function(e,t,a){var s=this;return(0,i.default)(regeneratorRuntime.mark((function i(){var n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:i.t0=e,i.next=0===i.t0?3:1===i.t0?6:2===i.t0?9:12;break;case 3:return i.next=5,s.cities(t.id);case 5:return i.abrupt("break",12);case 6:return i.next=8,s.counties(t.id);case 8:return i.abrupt("break",12);case 9:return i.next=11,s.towns(t.id);case 11:return i.abrupt("break",12);case 12:s.selectedItems.splice(e,1,t),s.selectedItems.splice(e+1),s.tabIndex=e+1,e!=s.level-1||a||(n={provinceName:s.selectedItems[0].fullName,provinceId:s.selectedItems[0].id,cityName:s.selectedItems[1].fullName,cityId:s.selectedItems[1].id,districtName:s.selectedItems[2].fullName?s.selectedItems[2].fullName:"",districtId:s.selectedItems[2].id?s.selectedItems[2].id:"",townId:s.selectedItems[3].id?s.selectedItems[3].id:"",townName:s.selectedItems[3].fullName?s.selectedItems[3].fullName:""},s.$emit("addressChange",n));case 16:case"end":return i.stop()}}),i)})))()},tabChange:function(e){this.tabIndex=e}},computed:{defaultAddressa:function(){return this.defaultAddress.provinceId&&this.setDefaultData(),this.defaultAddress.provinceId}},mounted:function(){this.provices()}};t.default=d},ae2a:function(e,t,a){"use strict";var s;a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return s}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"page chooseAddress"},[a("v-uni-view",{staticClass:"opacity"},[e._v(e._s(e.defaultAddressa))]),a("v-uni-view",{staticClass:"selectTitle"},[e._l(e.selectedItems,(function(t,s){return a("v-uni-view",{key:t.id,staticClass:"everyChoose",class:e.tabIndex==s?"active":"",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.tabChange(s)}}},[e._v(e._s(t.fullName))])})),e.level>e.selectedItems.length?a("v-uni-view",{staticClass:"chooseBtn",class:e.tabIndex===e.selectedItems.length?"active":""},[e._v("请选择")]):e._e()],2),a("v-uni-scroll-view",{staticClass:"addrContainer",attrs:{"scroll-y":"true"}},[e._l(e.provinceList,(function(t,s){return 0==e.tabIndex?a("v-uni-view",{key:s,staticClass:"addressList",class:{active:e.selectedItems[e.tabIndex]&&e.selectedItems[e.tabIndex].fullName===t.fullName},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.chooseAddr(0,t)}}},[a("v-uni-view",[e._v(e._s(t.fullName))]),e.selectedItems[e.tabIndex]&&e.selectedItems[e.tabIndex].fullName===t.fullName?a("v-uni-view",{staticClass:"chooseIcon"}):e._e()],1):e._e()})),e._l(e.cityList,(function(t,s){return 1==e.tabIndex?a("v-uni-view",{key:s,staticClass:"addressList",class:{active:e.selectedItems[e.tabIndex]&&e.selectedItems[e.tabIndex].fullName===t.fullName},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.chooseAddr(1,t)}}},[a("v-uni-view",[e._v(e._s(t.fullName))]),e.selectedItems[e.tabIndex]&&e.selectedItems[e.tabIndex].fullName===t.fullName?a("v-uni-view",{staticClass:"chooseIcon"}):e._e()],1):e._e()})),e._l(e.districtList,(function(t,s){return 2==e.tabIndex?a("v-uni-view",{key:s,staticClass:"addressList",class:{active:e.selectedItems[e.tabIndex]&&e.selectedItems[e.tabIndex].fullName===t.fullName},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.chooseAddr(2,t)}}},[a("v-uni-view",[e._v(e._s(t.fullName))]),e.selectedItems[e.tabIndex]&&e.selectedItems[e.tabIndex].fullName===t.fullName?a("v-uni-view",{staticClass:"chooseIcon"}):e._e()],1):e._e()})),e._l(e.townList,(function(t,s){return 3==e.tabIndex?a("v-uni-view",{key:s,staticClass:"addressList",class:{active:e.selectedItems[e.tabIndex]&&e.selectedItems[e.tabIndex].fullName===t.fullName},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.chooseAddr(3,t)}}},[a("v-uni-view",[e._v(e._s(t.fullName))]),e.selectedItems[e.tabIndex]&&e.selectedItems[e.tabIndex].fullName===t.fullName?a("v-uni-view",{staticClass:"chooseIcon"}):e._e()],1):e._e()}))],2)],1)},n=[]},b48e:function(e,t,a){"use strict";var s=a("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(a("5315")),n=s(a("d5ef")),d={data:function(){return{params:{},defaultTitleDto:{title:"收货地址",bottomColor:"#E6E6E6"}}},onShow:function(){this.zhuge.track("创建地址"),uni.setNavigationBarTitle({title:this.$Route.query.id?"编辑收货地址":"新建收货地址"}),this.defaultTitleDto.title=this.$Route.query.id?"编辑收货地址":"新建收货地址",this.$Route.query.id&&this.addressDetails()},methods:{addressDetails:function(){var e=this;i.default.addressDetails(this.$Route.query.id).then((function(t){200==t.data.code?e.params=t.data.data:uni.showToast({title:t.data.message,icon:"none"})}))},saveAddress:function(){if(this.params.name)if(this.checkTextLength(this.params.name))if(/^\d{11}$/.test(this.params.telephone))if(this.params.address)if(this.params.address.length<5||this.params.address.length>100)uni.showToast({icon:"none",title:"详细地址信息需填写5-100个字符"});else{for(var e in this.params)this.params[e]||delete this.params[e];this.$Route.query.id?this.addressUpdate():this.addressCreate()}else uni.showToast({icon:"none",title:"请填写详细收货地址"});else uni.showToast({icon:"none",title:"请填写正确的手机号"});else uni.showToast({icon:"none",title:"收货人姓名长度最多为50位中文，100个字符"});else uni.showToast({icon:"none",title:"请填写收货人姓名"})},addressUpdate:function(){var e=this;i.default.addressUpdate(this.params).then((function(t){200==t.data.code?e.goBack(1):uni.showToast({icon:"none",title:t.data.message})}))},addressCreate:function(){var e=this;i.default.addressCreate(this.params).then((function(t){200==t.data.code?e.goBack(1):uni.showToast({title:t.data.message,icon:"none"})}))},checkTextLength:function(e){for(var t=0,a=0;a<e.length;a++,++t)e.charCodeAt(a)>255&&++t;return t},switchChange:function(e){this.params.isDefault=e.target.value?1:0},openAddress:function(){this.$refs.addressPopup.open()},closeAddPopup:function(){this.$refs.addressPopup.close()},addressChange:function(e){for(var t in e)this.$set(this.params,t,e[t]);this.$refs.addressPopup.close()}},components:{selectAddress:n.default}};t.default=d},bead:function(e,t,a){var s=a("e553");"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var i=a("4f06").default;i("1a022f1e",s,!0,{sourceMap:!1,shadowMode:!1})},d5ef:function(e,t,a){"use strict";a.r(t);var s=a("ae2a"),i=a("67ef");for(var n in i)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(n);a("4d69");var d,r=a("f0c5"),o=Object(r["a"])(i["default"],s["b"],s["c"],!1,null,"46e29260",null,!1,s["a"],d);t["default"]=o.exports},d9d4:function(e,t,a){"use strict";a.r(t);var s=a("b48e"),i=a.n(s);for(var n in s)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return s[e]}))}(n);t["default"]=i.a},e553:function(e,t,a){var s=a("4bad");t=s(!1),t.push([e.i,".chooseAddress[data-v-46e29260]{width:100%;height:100%;background-color:#fff;padding-left:%?24?%}.selectTitle[data-v-46e29260]{width:100%;height:%?98?%;border-bottom:1px solid #e6e6e6;display:-webkit-box;display:-webkit-flex;display:flex}.everyChoose[data-v-46e29260],.addressList[data-v-46e29260]{line-height:%?98?%;height:%?98?%;margin-right:%?34?%;overflow:hidden}.everyChoose[data-v-46e29260]{max-width:20%}.addressList[data-v-46e29260]{border-bottom:1px solid #e6e6e6;color:#999}.addressList.active[data-v-46e29260]{color:#ff1558;position:relative}.chooseBtn[data-v-46e29260]{line-height:%?98?%;color:#ff1558;height:%?98?%;margin-right:%?36?%}.chooseBtn.active[data-v-46e29260]{\n\t/* border-bottom: 2http://beifa-mall.oss-cn-shanghai.aliyuncs.com/appletsImages/558; */}.chooseIcon[data-v-46e29260]{background:url(http://beifa-mall.oss-cn-shanghai.aliyuncs.com/static/unfollow.png) no-repeat 50%;background-size:%?27?% %?18?%;width:%?27?%;height:%?18?%;position:absolute;right:%?20?%;top:0;bottom:0;margin:auto}.addrContainer[data-v-46e29260]{height:calc(100% - %?100?%)}.everyChoose.active[data-v-46e29260]{border-bottom:2px solid #ff1558}.opacity[data-v-46e29260]{width:0;height:0;opacity:0;font-size:0}",""]),e.exports=t},f169:function(e,t,a){var s=a("1e75");"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var i=a("4f06").default;i("4f3e2e13",s,!0,{sourceMap:!1,shadowMode:!1})}}]);