(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-settlement-index"],{"033f":function(t,e,o){"use strict";o.r(e);var i=o("fdc6"),a=o("b1b2");for(var n in a)["default"].indexOf(n)<0&&function(t){o.d(e,t,(function(){return a[t]}))}(n);o("bd8c");var s,r=o("f0c5"),d=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,"7ea5f717",null,!1,i["a"],s);e["default"]=d.exports},"0759":function(t,e,o){"use strict";var i;o.d(e,"b",(function(){return a})),o.d(e,"c",(function(){return n})),o.d(e,"a",(function(){return i}));var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-uni-view",{staticClass:"page settlement",class:4!=t.memberType&&t.memberPriceInfo.type&&0!=t.orderSummaryInfo.achievementAmount?"active":""},[o("defaultTitle",{attrs:{dto:{title:"填写订单",bottomColor:"#E6E6E6"}}}),o("v-uni-view",{staticClass:"settlementAddress"},[t.orderInfo.address?o("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.$Router.push({path:"/pages/address/index",query:{id:t.orderInfo.address.id}})}}},[o("v-uni-view",{staticClass:"settlementTitle"},[o("v-uni-text",[t._v(t._s(t.orderInfo.address.name))]),o("v-uni-text",{staticClass:"telephone"},[t._v(t._s(t.orderInfo.address.telephone))])],1),t.orderInfo.address?o("v-uni-view",{staticClass:"addressMain"},[t._v(t._s(t.orderInfo.address.provinceName+t.orderInfo.address.cityName+t.orderInfo.address.districtName+(t.orderInfo.address.townName?t.orderInfo.address.townName:"")+t.orderInfo.address.address))]):t._e()],1):t._e(),t.orderInfo.address?t._e():o("v-uni-view",{staticClass:"nullAddress",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.$Router.push({path:"/pages/createAddress/index"})}}},[t._v("请填写收货地址")]),o("v-uni-view",{staticClass:"arrow"})],1),o("v-uni-view",{staticClass:"settlementLine"}),t.orderInfo.address&&"2"==t.orderInfo.address.checkStatus?o("v-uni-view",{staticClass:"addressChange"},[t._v("*由于邮政地址升级，请填写街道地址")]):t._e(),t._l(t.orderInfo.stores,(function(e,i){return o("v-uni-view",{key:i,staticClass:"orderMain"},[o("v-uni-view",{staticClass:"shopName"},[t._v(t._s(e.storeName))]),t._l(e.goodsList,(function(e,i){return o("v-uni-view",{key:e.goodsId},[o("v-uni-view",{staticClass:"goodsCont"},[o("v-uni-image",{attrs:{src:t.imgBaseUrls+e.goodsImg,mode:""}}),o("v-uni-view",{staticClass:"goodsInfo"},[o("v-uni-view",{staticClass:"goodsText ellipsis-two"},[t._v(t._s(e.goodsName))]),o("v-uni-view",{staticClass:"goodSpce"},[t._v(t._s(e.saleFieldValue))]),o("v-uni-view",{staticClass:"goodsPrice"},[o("v-uni-text",[t._v("¥"+t._s(e.originPrice))]),o("v-uni-view",{staticClass:"goodsNum",class:t.limitSettle.isCart?"active":""},[t.limitSettle.isCart?[t._v("x"+t._s(e.goodsNum))]:[o("v-uni-view",{staticClass:"jian",on:{click:function(o){arguments[0]=o=t.$handleEvent(o),t.goodsNumChange(e,!1)}}},[t._v("-")]),o("v-uni-input",{attrs:{type:"number"},on:{blur:function(o){arguments[0]=o=t.$handleEvent(o),t.goodsNumBlur(o,e)}},model:{value:e.goodsNum,callback:function(o){t.$set(e,"goodsNum",o)},expression:"v.goodsNum"}}),o("v-uni-view",{staticClass:"jia",on:{click:function(o){arguments[0]=o=t.$handleEvent(o),t.goodsNumChange(e,!0)}}},[t._v("+")])]],2)],1)],1)],1),e.presaleFlag?o("v-uni-view",{staticClass:"deliveryTime"},[o("v-uni-image",{attrs:{src:t.imgBaseUrls+"appletsImages/openBookingIcon.png",mode:""}}),t._v("发货时间："+t._s(t.$utils.formatDate(e.itemPresaleInfoDTO.deliveryStartTime,"yyyy年MM月dd日hh:mm"))+" ~ "+t._s(t.$utils.formatDate(e.itemPresaleInfoDTO.deliveryEndTime,"yyyy年MM月dd日hh:mm")))],1):t._e(),e.separatePromotion?o("v-uni-view",{staticClass:"separatePromotion"},[o("v-uni-text",[t._v(t._s(e.separatePromotion.name))]),o("v-uni-text",{staticClass:"marking_plus"},[t._v(t._s(e.separatePromotion.typeName))])],1):t._e(),o("v-uni-view",{},t._l(e.promotions,(function(i,a){return 19==i.typeCode?o("v-uni-view",{key:a,staticClass:"fmGoodsMsg"},[o("v-uni-text",{staticClass:"promotionsActivityBox"},[t._v(t._s(i.typeName))])],1):t._l(e.promotions,(function(e,i){return o("v-uni-view",{key:i,staticClass:"fmGoodsMsg"},[t._v(t._s(e.name?e.name:"")),o("v-uni-text",{staticClass:"activityBox"},[t._v(t._s(e.typeName))])],1)}))})),1)],1)})),o("v-uni-view",{staticClass:"fmGoodsMsg"},[o("v-uni-text",[t._v("运费")]),o("v-uni-text",{staticClass:"colorChange"},[t._v(t._s(t.freightData[e.storeId]?"￥"+t.freightData[e.storeId]:"包邮"))])],1),t.storePromotion[e.storeId]&&t.storePromotion[e.storeId].length?o("storePromotionView",{attrs:{choosePromotionId:t.couponParams[e.storeId].promotionId,storePromotion:t.storePromotion,storeId:e.storeId,storeName:e.storeName},on:{promotionChange:function(e){arguments[0]=e=t.$handleEvent(e),t.promotionCouponChange.apply(void 0,arguments)}}}):t._e(),t.storeCouponsInfo[e.storeId]&&t.storeCouponsInfo[e.storeId].availableList&&t.storeCouponsInfo[e.storeId].availableList.length?o("storeCoupons",{attrs:{storeCouponsInfo:t.storeCouponsInfo,chooseStoreId:t.freightParams[e.storeId].couponId,storeId:e.storeId,storeName:e.storeName},on:{couponChange:function(e){arguments[0]=e=t.$handleEvent(e),t.storeCouponChange.apply(void 0,arguments)}}}):t._e(),o("v-uni-view",{staticClass:"fmGoodsMsg"},[t._v("留言"),o("v-uni-input",{attrs:{type:"text",maxlength:"40",placeholder:"选填,限40字以内"},model:{value:t.orderMessage[e.storeId].orderMessage,callback:function(o){t.$set(t.orderMessage[e.storeId],"orderMessage",o)},expression:"orderMessage[item.storeId].orderMessage"}})],1),o("v-uni-view",{staticClass:"fmGoodsMsg"},[o("v-uni-view"),o("v-uni-view",{staticClass:"price"},[t._v("共"+t._s(e.goodsNum)+"件商品 合计："),o("v-uni-text",{staticClass:"priceSymbol"},[t._v("￥")]),o("v-uni-text",{staticClass:"symbolPrice"},[t._v(t._s(t.storeAmountData[e.storeId]))]),t._v("(含运费¥"+t._s(t.freightData[e.storeId])+")")],1)],1)],2)})),t.platforCouponsInfo.availableList&&t.platforCouponsInfo.availableList.length?o("platformCoupons",{attrs:{platforCouponsInfo:t.platforCouponsInfo,choosePlatfromId:t.orderSummaryParams.platformPromotionId},on:{couponChange:function(e){arguments[0]=e=t.$handleEvent(e),t.plateformCouponChange.apply(void 0,arguments)}}}):t._e(),4==t.memberType?o("v-uni-view",{staticClass:"integralMain "},[o("v-uni-text",{staticClass:"partnerPref"},[t._v("合伙人优惠")]),o("v-uni-text",{staticClass:"intergalInfo partnerPrefNum"},[t._v("-¥"+t._s(t.orderSummaryInfo.distributorDiscount))])],1):t._e(),o("v-uni-view",{staticClass:"integralMain"},[o("v-uni-text",[t._v("使用库豆")]),t.orderGoldCount.accountGold>0&&t.orderGoldCount.canUseGold?o("v-uni-text",{staticClass:"intergalInfo"},[t._v("库豆"+t._s(t.orderGoldCount.accountGold)+",本次可抵用￥"+t._s(t.orderGoldCount.canUseGold))]):t._e(),t.orderGoldCount.accountGold>0&&!t.orderGoldCount.canUseGold?o("v-uni-text",{staticClass:"intergalInfo"},[t._v("购买的商品不支持使用库豆支付")]):t._e(),t.orderGoldCount.accountGold<=0?o("v-uni-text",{staticClass:"intergalInfo"},[t._v("本次无可用库豆")]):t._e(),o("v-uni-view",{staticClass:"intergalBtn"},[o("v-uni-switch",{staticStyle:{transform:"scale(0.7,0.7)"},attrs:{disabled:t.orderGoldCount.canUseGold<=0,checked:t.deductionFlag.gold,color:"#FF1558"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.goldChange.apply(void 0,arguments)}}})],1)],1),o("v-uni-view",{staticClass:"integralMain scoreBox"},[o("v-uni-text",[t._v("使用积分")]),t.orderScoreCount.usefulScoreNum>0?o("v-uni-text",{staticClass:"intergalInfo"},[t._v("本次可用"+t._s(t.orderScoreCount.usefulScoreNum)+",本次可抵用￥"+t._s(t.orderScoreCount.score))]):t._e(),t.orderScoreCount.usefulScoreNum<=0?o("v-uni-text",{staticClass:"intergalInfo"},[t._v("本次无可用积分")]):t._e(),o("v-uni-view",{staticClass:"intergalBtn"},[o("v-uni-switch",{staticStyle:{transform:"scale(0.7,0.7)"},attrs:{disabled:t.orderScoreCount.score<=0,checked:t.deductionFlag.score,color:"#FF1558"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.scoreChange.apply(void 0,arguments)}}})],1)],1),o("v-uni-view",{staticClass:"deduction"},[o("v-uni-text",[t._v("商品金额")]),o("v-uni-text",[t._v("￥"+t._s(t.orderSummaryInfo.goodsFinalAmount))])],1),t.orderSummaryInfo.freightAmount>0?o("v-uni-view",{staticClass:"deduction"},[o("v-uni-text",[t._v("运费")]),o("v-uni-text",[t._v("￥"+t._s(t.orderSummaryInfo.freightAmount))])],1):t._e(),t.orderSummaryInfo.couponAmount>0?o("v-uni-view",{staticClass:"deduction"},[o("v-uni-text",[t._v("优惠券")]),o("v-uni-text",[t._v("-￥"+t._s(t.orderSummaryInfo.couponAmount))])],1):t._e(),t.orderSummaryInfo.socreAmount>0?o("v-uni-view",{staticClass:"deduction"},[o("v-uni-text",[t._v("积分抵扣")]),o("v-uni-text",[t._v("-￥"+t._s(t.orderSummaryInfo.socreAmount))])],1):t._e(),t.orderSummaryInfo.goldAmount>0?o("v-uni-view",{staticClass:"deduction"},[o("v-uni-text",[t._v("库豆抵扣")]),o("v-uni-text",[t._v("-￥"+t._s(t.orderSummaryInfo.goldAmount))])],1):t._e(),4==t.memberType?o("v-uni-view",{staticClass:"deduction performance"},[o("v-uni-text",[t._v("本单商品计有效业绩")]),o("v-uni-text",[t._v("￥"+t._s(t.orderSummaryInfo.performanceAmount))])],1):t._e(),0!=t.orderSummaryInfo.achievementAmount&&4!=t.memberType&&(t.memberPriceInfo.type||t.memberPriceInfo.arriveType)?o("v-uni-view",{staticClass:"cartHint"},[o("v-uni-view",{staticClass:"cartPrice"},[t.memberPriceInfo.arriveType?o("v-uni-view",[t._v("当前结算金额已满足"),o("v-uni-text",[t._v(t._s(t.memberPriceInfo.arriveType))]),t._v("升级条件")],1):t._e(),t.memberPriceInfo.price?[t._v("还差"),o("v-uni-text",{staticClass:"memberGoodsPrice"},[t._v(t._s(t.memberPriceInfo.price))]),t._v("元，")]:t._e(),t.memberPriceInfo.price?t._e():[t._v("下单")],t._v("即可升级为"+t._s(t.memberPriceInfo.type))],2),t.memberPriceInfo.price?o("v-uni-view",{staticClass:"goBuyBtn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.gotoGoods.apply(void 0,arguments)}}},[t._v("去凑单 ›")]):t._e()],1):t._e(),o("v-uni-view",{staticClass:"goPayBox"},[o("v-uni-view",{staticClass:"payText"},[t._v("实付款："),o("v-uni-text",{staticClass:"symbol"},[t._v("￥")]),o("v-uni-text",{staticClass:"payAmount"},[t._v(t._s(t.orderSummaryInfo.payAmount?t.orderSummaryInfo.payAmount:0))])],1),o("v-uni-view",{staticClass:"submitBtn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submitOrder.apply(void 0,arguments)}}},[t._v("提交订单")])],1),o("pswPopup",{ref:"pswPopup",on:{openForgetPopup:function(e){arguments[0]=e=t.$handleEvent(e),t.openForgetPopup.apply(void 0,arguments)},submitPay:function(e){arguments[0]=e=t.$handleEvent(e),t.setSubmitPsw.apply(void 0,arguments)}}}),o("setPayPwd",{ref:"setPayPwd",attrs:{payInfo:t.orderInfo},on:{openPswPopup:function(e){arguments[0]=e=t.$handleEvent(e),t.openPswPopup.apply(void 0,arguments)},submitPay:function(e){arguments[0]=e=t.$handleEvent(e),t.setSubmitPsw.apply(void 0,arguments)}}}),o("forgetPayPsw",{ref:"forgetPayPsw",attrs:{payInfo:t.orderInfo},on:{openPswPopup:function(e){arguments[0]=e=t.$handleEvent(e),t.openPswPopup.apply(void 0,arguments)},submitPay:function(e){arguments[0]=e=t.$handleEvent(e),t.setSubmitPsw.apply(void 0,arguments)}}}),o("verificationCode",{ref:"verificationCode",attrs:{payInfo:t.orderInfo},on:{codeSubmit:function(e){arguments[0]=e=t.$handleEvent(e),t.codeSubmit.apply(void 0,arguments)}}})],2)},n=[]},"1b37":function(t,e,o){"use strict";o.r(e);var i=o("586d"),a=o.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){o.d(e,t,(function(){return i[t]}))}(n);e["default"]=a.a},"2d66":function(t,e,o){var i=o("4bad");e=i(!1),e.push([t.i,".disCount[data-v-7ea5f717]{width:calc(100% - %?44?%);margin:0 auto;height:%?88?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;border-bottom:%?1?% solid #e6e6e6;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.couponsNum[data-v-7ea5f717]{height:%?32?%;line-height:%?32?%;text-align:center;color:#ff1558;background-color:#ffecf1;padding:0 %?14?%;border-radius:%?100?%;margin-left:%?10?%}.couponIcon[data-v-7ea5f717]{height:%?88?%;width:%?32?%;background:url(http://beifa-mall.oss-cn-shanghai.aliyuncs.com/appletsImages/moreD.png) no-repeat 50%;background-size:%?32?% %?8?%}.couponPopup[data-v-7ea5f717]{height:%?752?%;width:100%;background-color:#fff}.popupTitle[data-v-7ea5f717]{width:100%;height:%?100?%;line-height:%?100?%;font-size:%?34?%;text-align:center}.discountPrice[data-v-7ea5f717]{-webkit-box-flex:1;-webkit-flex:1;flex:1;text-align:right;margin-right:%?20?%}.couponMain[data-v-7ea5f717]{width:100%;height:calc(100% - %?200?%)}.everyRow[data-v-7ea5f717]{width:%?702?%;margin:0 auto;margin-bottom:%?30?%;border-radius:%?6?%;box-shadow:0 0 18px 0 rgba(0,0,0,.08);display:-webkit-box;display:-webkit-flex;display:flex;height:%?170?%;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding-right:%?24?%}.couponPrice[data-v-7ea5f717]{width:%?220?%;height:%?170?%;padding:%?24?%;background:url(http://beifa-mall.oss-cn-shanghai.aliyuncs.com/appletsImages/orderCoup.png) no-repeat 50%;background-size:%?220?% %?170?%;text-align:center;color:#fff}.couponPrice.unavailableActive[data-v-7ea5f717]{background:url(http://beifa-mall.oss-cn-shanghai.aliyuncs.com/appletsImages/orderCoupUn.png) no-repeat 50%}.sureBtn[data-v-7ea5f717]{width:100%;height:%?100?%;text-align:center;line-height:%?100?%;font-size:%?32?%;color:#fff;background-color:#ff1558}.price[data-v-7ea5f717]{font-size:%?60?%}.price uni-text[data-v-7ea5f717]{font-size:%?38?%}.type[data-v-7ea5f717]{font-size:%?24?%;margin-top:%?4?%}.couponInfo[data-v-7ea5f717]{-webkit-box-flex:1;-webkit-flex:1;flex:1;height:%?170?%;padding:%?26?% %?84?% %?26?% %?24?%}.couponType[data-v-7ea5f717]{width:100%;height:%?72?%;line-height:%?36?%;color:#333;font-weight:700}.disCountType[data-v-7ea5f717]{color:#fff;margin-right:%?22?%;padding:0 %?10?%;background-color:#ff1558;height:%?24?%;line-height:%?24?%;border-radius:%?100?%;font-size:%?18?%}.unavailableActive[data-v-7ea5f717]{background-color:#ddd}.couponName[data-v-7ea5f717]{font-weight:%?700?%;color:#333}.couponTime[data-v-7ea5f717]{color:#929292;font-size:%?22?%}.couponBtnIcon[data-v-7ea5f717]{width:%?36?%;height:%?36?%;background:url(http://beifa-mall.oss-cn-shanghai.aliyuncs.com/appletsImages/oval_3copy4@2x.png) no-repeat 50%;background-size:%?36?% %?36?%}.couponBtnIcon.active[data-v-7ea5f717]{background:url(http://beifa-mall.oss-cn-shanghai.aliyuncs.com/appletsImages/subr.png) no-repeat 50%;background-size:%?36?% %?36?%}.availableNotUse[data-v-7ea5f717]{width:%?702?%;height:%?98?%;line-height:%?98?%;text-align:center;background-color:#fff;color:#999;margin:0 auto;margin-bottom:%?30?%;border-radius:%?6?%;font-size:%?32?%;border:%?1?% solid #e4e4e4}.unavailable[data-v-7ea5f717]{width:100%;height:%?94?%;line-height:%?94?%;padding:0 %?24?%;font-size:%?30?%;color:#333}",""]),t.exports=e},3715:function(t,e,o){"use strict";o.r(e);var i=o("810a"),a=o("b2b5");for(var n in a)["default"].indexOf(n)<0&&function(t){o.d(e,t,(function(){return a[t]}))}(n);o("cb69");var s,r=o("f0c5"),d=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,"2019ac0e",null,!1,i["a"],s);e["default"]=d.exports},"401f":function(t,e,o){var i=o("fd0b");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=o("4f06").default;a("0f23d962",i,!0,{sourceMap:!1,shadowMode:!1})},"487d":function(t,e,o){"use strict";var i=o("e129"),a=o.n(i);a.a},"48b3":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={props:["platforCouponsInfo","choosePlatfromId"],data:function(){return{}},methods:{openCouponPopup:function(){this.$refs.couponPopup.open()},clearCoupon:function(){this.$emit("couponChange",this.storeId,"")},closeCouponPopup:function(){this.$refs.couponPopup.close()},couponChange:function(t){this.choosePlatfromId!=t.id&&this.$emit("couponChange",t.id)}},mounted:function(){}};e.default=i},5689:function(t,e,o){"use strict";o.r(e);var i=o("0759"),a=o("1b37");for(var n in a)["default"].indexOf(n)<0&&function(t){o.d(e,t,(function(){return a[t]}))}(n);o("b6cf");var s,r=o("f0c5"),d=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,"ea5c9f44",null,!1,i["a"],s);e["default"]=d.exports},"586d":function(t,e,o){"use strict";var i=o("4ea4");o("a9e3"),o("b680"),o("e25e"),o("ac1f"),o("5319"),o("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(o("1087")),n=i(o("5315")),s=i(o("033f")),r=i(o("3715")),d=i(o("98f7")),u=i(o("b1f7")),c=i(o("4406")),l=i(o("639e")),f=i(o("dcca")),m={data:function(){return{goodStockState:!1,orderInfo:{},haitaoInfo:{},imgBaseUrls:"",orderGoldCount:{canUseGold:"",accountGold:""},storeInfo:{},couponParams:{},freightParams:{},storeAmountParams:{},platformPromotsParams:{lotteryId:"",addressId:"",orders:[]},orderSummaryParams:{},orderScoreCount:{usefulScoreNum:"",score:""},orderSummaryInfo:{},deductionFlag:{score:!1,gold:!0},orderMessage:{},storeCouponsInfo:{},platforCouponsInfo:{},storePromotion:{},storeAmountData:{},freightData:{},submitFlag:!0,memberType:uni.getStorageSync("userInfo")?JSON.parse(uni.getStorageSync("userInfo")).plusFlag:"",memberPriceInfo:{price:0,type:"",arriveType:""},limitSettle:{isCart:!1,stockNumber:0,time:"",retry:3}}},onShow:function(){for(var t in this.zhuge.track("填写订单-落地页"),this.deductionFlag)this.deductionFlag[t]=!1;this.limitSettle.stockNumber=this.$Route.query.stockNumber,this.imgBaseUrls=this.$config.imgBaseUrl,this.pageInitParams()},beforeRouteLeave:function(t,e,o){uni.removeStorageSync("addressInfo"),o()},components:{storeCoupons:s.default,platformCoupons:r.default,storePromotionView:d.default,setPayPwd:u.default,forgetPayPsw:c.default,verificationCode:f.default,pswPopup:l.default},methods:{pageInitParams:function(t){var e=uni.getStorageSync("addressInfo")?JSON.parse(uni.getStorageSync("addressInfo")):"";this.$Route.query.goodsNum?(this.pageInit({goodsId:this.$Route.query.cartIds,goodsNum:t||this.$Route.query.goodsNum,addressId:e?e.id:"",inviterCode:uni.getStorageSync("routerShareNumber")?uni.getStorageSync("routerShareNumber"):"",inviterType:uni.getStorageSync("routerShareNumber")?1:"",singlePromotionId:this.$Route.query.singlePromotionId?this.$Route.query.singlePromotionId:"",transferOrderId:this.$Route.query.transferOrderId}),this.limitSettle.isCart=!1):(this.pageInit({cartIds:this.$Route.query.cartIds.split(","),addressId:e?e.id:""}),this.limitSettle.isCart=!0)},pageInit:function(t){var e=this;uni.showLoading({title:"加载中..."}),a.default.pageInit(t).then((function(t){if(200==t.data.code){e.orderInfo=t.data.data,e.getDefaultRealnameInfo(),e.initshopGoodsNum(),e.initGoodsPrice(),e.initShopGoodsInfo();for(var o=0;o<e.orderInfo.stores.length;o++)e.storePromotions(e.orderInfo.stores[o].storeId)}else{if(0==e.limitSettle.retry)return void uni.hideLoading();e.limitSettle.retry--,uni.showToast({title:t.data.message,icon:"none"}),e.pageInitParams()}}))},initshopGoodsNum:function(){this.goodStockState=!1;for(var t=0;t<this.orderInfo.stores.length;t++){this.orderInfo.stores[t].goodsNum=0;for(var e=0;e<this.orderInfo.stores[t].goodsList.length;e++)this.orderInfo.stores[t].goodsList[e].stockState||(this.goodStockState=!0),this.orderInfo.stores[t].goodsNum++,this.orderInfo.stores[t].goodsList[e].saleFieldValue=this.compileSpec(this.orderInfo.stores[t].goodsList[e].saleFieldValue)}},compileSpec:function(t){var e="",o=t.split(",");for(var i in o)e+=o[i].split(":")[1]+" ";return e},initGoodsPrice:function(){for(var t=0;t<this.orderInfo.stores.length;t++)for(var e=0;e<this.orderInfo.stores[t].goodsList.length;e++)this.orderInfo.stores[t].goodsList[e].promotions&&this.orderInfo.stores[t].goodsList[e].promotions.length?this.orderInfo.stores[t].goodsList[e].originPrice=this.orderInfo.stores[t].goodsList[e].promotions[0].goodsPrice:this.orderInfo.stores[t].goodsList[e].separatePromotion&&this.orderInfo.stores[t].goodsList[e].separatePromotion.id&&(this.orderInfo.stores[t].goodsList[e].originPrice=this.orderInfo.stores[t].goodsList[e].separatePromotion.goodsPrice)},initShopGoodsInfo:function(){for(var t=0;t<this.orderInfo.stores.length;t++){this.$set(this.orderMessage,this.orderInfo.stores[t].storeId,{}),this.$set(this.orderMessage[this.orderInfo.stores[t].storeId],"orderMessage",""),this.$set(this.storeInfo,this.orderInfo.stores[t].storeId,{}),this.$set(this.storeInfo[this.orderInfo.stores[t].storeId],"storeId",this.orderInfo.stores[t].storeId),this.$set(this.storeInfo[this.orderInfo.stores[t].storeId],"goodsList",[]),this.$set(this.storeInfo[this.orderInfo.stores[t].storeId],"lotteryId","");for(var e=0;e<this.orderInfo.stores[t].goodsList.length;e++){var o={};o.inviterType=this.orderInfo.stores[t].goodsList[e].inviterType,o.inviterId=this.orderInfo.stores[t].goodsList[e].inviterId,this.orderInfo.stores[t].goodsList[e].promotions&&this.orderInfo.stores[t].goodsList[e].promotions.length>0?o.promotionId=this.orderInfo.stores[t].goodsList[e].promotions[0].id:o.promotionId="",this.$Route.query.goodsNum?this.$Route.query.goodsNum&&(o.goodsId=this.orderInfo.stores[t].goodsList[e].goodsId,o.goodsNum=this.orderInfo.stores[t].goodsList[e].goodsNum,this.$Route.query.singlePromotionId&&(o.singlePromotionId=this.$Route.query.singlePromotionId)):o.cartId=this.orderInfo.stores[t].goodsList[e].cartId,this.storeInfo[this.orderInfo.stores[t].storeId].goodsList.push(o)}}},getDefaultRealnameInfo:function(){var t=this;n.default.getDefaultRealnameInfo().then((function(e){200==e.data.code?e.data.data&&e.data.data.realname&&(t.haitaoInfo=e.data.data):uni.showToast({title:e.data.message,icon:"none"})}))},storePromotions:function(t){var e=this;a.default.storePromotions(this.storeInfo[t]).then((function(o){200==o.data.code?(e.initCouponParams(t,o.data.data),e.storeCoupons(t),e.initStorePromotion(t,o.data.data)):uni.showToast({title:o.data.message,icon:"none"})}))},initCouponParams:function(t,e){var o=JSON.stringify(this.storeInfo);this.$set(this.couponParams,t,JSON.parse(o)[t]),this.$set(this.couponParams[t],"lotteryId",""),e.length>0?this.$set(this.couponParams[t],"promotionId",e[0].id):this.$set(this.couponParams[t],"promotionId","")},storeCoupons:function(t){var e=this;a.default.storeCoupons(this.couponParams[t]).then((function(o){200==o.data.code?(e.$set(e.storeCouponsInfo,t,o.data.data),e.initFreightParams(t,o.data.data.availableList),e.freightPromotions(t)):uni.showToast({title:o.data.message,icon:"none"})}))},initFreightParams:function(t,e){var o=JSON.stringify(this.couponParams);this.$set(this.freightParams,t,JSON.parse(o)[t]),e.length>0?this.$set(this.freightParams[t],"couponId",e[0].id):this.$set(this.freightParams[t],"couponId",""),this.$set(this.freightParams[t],"lotteryId","")},freightPromotions:function(t){var e=this;this.freightParams[t].addressId=this.orderInfo.address?this.orderInfo.address.id:"",a.default.freightPromotions(this.freightParams[t]).then((function(o){200==o.data.code?(e.initStoreAmountParams(t,o.data.data),e.storeOrderAmount(t)):uni.showToast({title:o.data.message,icon:"none"})}))},initStoreAmountParams:function(t,e){var o=JSON.stringify(this.freightParams);this.$set(this.storeAmountParams,t,JSON.parse(o)[t]),this.$set(this.storeAmountParams[t],"lotteryId",""),e?this.$set(this.storeAmountParams[t],"freightPromotionId",e.id):this.$set(this.storeAmountParams[t],"freightPromotionId","")},storeOrderAmount:function(t){var e=this;this.storeAmountParams[t].addressId=this.orderInfo.address?this.orderInfo.address.id:"",a.default.storeOrderAmount(this.storeAmountParams[t]).then((function(o){200==o.data.code?(e.$set(e.storeAmountData,t,o.data.data.payPrice),e.$set(e.freightData,t,o.data.data.freightAmount),e.initPlatformPromotsParams(t),e.platformPromotsParams.orders.length==e.orderInfo.stores.length&&e.platformPromotions(e.platformPromotsParams)):uni.showToast({title:o.data.message,icon:"none"})}))},initPlatformPromotsParams:function(t){this.platformPromotsParams.addressId=this.orderInfo.address?this.orderInfo.address.id:"",this.isCF(t)?this.$set(this.platformPromotsParams.orders,this.isCF(t),this.storeAmountParams[t]):this.platformPromotsParams.orders.push(this.storeAmountParams[t])},isCF:function(t){for(var e in this.platformPromotsParams.orders)if(this.platformPromotsParams.orders[e].storeId==t)return e;return!1},platformPromotions:function(t){var e=this;a.default.platformPromotions(t).then((function(t){200==t.data.code?(e.platforCouponsInfo=t.data.data,e.initOrderSummaryParams(t.data.data.availableList),e.orderGold(e.orderSummaryParams)):uni.showToast({title:t.data.message,icon:"none"})}))},initOrderSummaryParams:function(t){var e=JSON.stringify(this.platformPromotsParams);this.orderSummaryParams=JSON.parse(e),this.orderSummaryParams.lotteryId="",t.length>0?(this.$set(this.orderSummaryParams,"platformPromotionId",t[0].id),this.$set(this.orderSummaryParams,"transferOrderId",this.$Route.query.transferOrderId)):(this.$set(this.orderSummaryParams,"transferOrderId",this.$Route.query.transferOrderId),this.$set(this.orderSummaryParams,"platformPromotionId",""))},orderGold:function(t){var e=this;a.default.orderGold(t).then((function(t){200==t.data.code?(e.orderSummaryParams.goldAmount=t.data.data.canUseGold,e.orderGoldCount=t.data.data,e.orderGoldCount.canUseGold?e.deductionFlag.gold=!0:e.deductionFlag.gold=!1,e.orderScore()):uni.showToast({title:t.data.message,icon:"none"})}))},orderScore:function(){var t=this;a.default.orderScore(this.orderSummaryParams).then((function(e){200==e.data.code?(t.orderScoreCount=e.data.data,t.orderSummary()):uni.showToast({title:e.data.message,icon:"none"})}))},orderSummary:function(){var t=this;a.default.orderSummary(this.orderSummaryParams).then((function(e){uni.hideLoading(),200==e.data.code?(t.orderSummaryInfo=e.data.data,4!=t.memberType&&t.getMemberPriceInfo()):uni.showToast({title:e.data.message,icon:"none"})}))},getMemberPriceInfo:function(){this.memberPriceInfo.arriveType="",this.memberPriceInfo.type="";try{var t=JSON.parse(uni.getStorageSync("memberConfig")),e=JSON.parse(uni.getStorageSync("userInfo")),o=0;if(e.plusFlag==t[t.length-1].type)return!1;for(var i=0;i<t.length;i++)t[i].type==e.plusFlag&&t[i].price>e.totalAmountDuring&&(o=t[i].price-e.totalAmountDuring);for(var a=1;a<t.length;a++){if(this.orderSummaryInfo.achievementAmount+e.totalAmountDuring+o<t[a].price)return this.memberPriceInfo.price=(t[a].price-this.orderSummaryInfo.achievementAmount-e.totalAmountDuring).toFixed(2),this.memberPriceInfo.type=t[a].name,!0;a>0&&0==o?(this.memberPriceInfo.arriveType=t[a].name,this.memberPriceInfo.type=t[a].name,this.memberPriceInfo.price=""):t[a].price-this.orderSummaryInfo.achievementAmount-e.totalAmountDuring<=0?(this.memberPriceInfo.arriveType=t[a].name,this.memberPriceInfo.price=""):(this.memberPriceInfo.price=(t[a].price-this.orderSummaryInfo.achievementAmount-e.totalAmountDuring).toFixed(2),this.memberPriceInfo.type=t[a].name)}}catch(n){}},gotoGoods:function(){this.$Router.push({path:"/pages/goodsList/index",query:{priceRangeLeft:this.memberPriceInfo.price}})},submitOrder:function(){this.orderInfo.address?this.orderInfo.address&&2==this.orderInfo.address.checkStatus?uni.showToast({title:"请修改地址",icon:"none"}):this.goodStockState?uni.showToast({title:"下单商品存在无货商品，请重新选择后下单",icon:"none"}):0==this.orderSummaryInfo.payAmount&&this.deductionFlag.score?"HIGH"==this.orderInfo.riskCheck.riskLevel?uni.showToast({title:"抱歉检测到本次交易异常，为了您的账号安全，请稍后再试或联系客服处理，联系方式：400-100-8246",icon:"none"}):"MID"==this.orderInfo.riskCheck.riskLevel||this.orderInfo.riskCheck.firstAddrMobile&&!this.orderInfo.riskCheck.monthNewMember&&this.orderScoreCount.score>this.orderInfo.riskCheck.unsafeAmt?this.$refs.verificationCode.openVerificationCode():this.openPswPopup():this.submit():uni.showToast({title:"请设置收货地址",icon:"none"})},openPswPopup:function(){this.orderInfo.hasPayPwd?this.$refs.pswPopup.openPswPopup():this.$refs.setPayPwd.openNoPswPopup()},codeSubmit:function(t){this.$set(this.orderSummaryParams,"code",t),this.submit()},submit:function(){var t=this;for(var e in this.orderSummaryParams.orders){for(var o=0;o<this.orderSummaryParams.orders[e].goodsList.length;o++)this.orderSummaryParams.orders[e].goodsList[o].inviterCode=uni.getStorageSync("routerShareNumber")?uni.getStorageSync("routerShareNumber"):"";this.orderSummaryParams.orders[e].orderMessage=this.orderMessage[this.orderSummaryParams.orders[e].storeId].orderMessage}this.submitFlag&&(this.submitFlag=!1,a.default.submitOrder(this.orderSummaryParams).then((function(e){t.submitFlag=!0,200==e.data.code?(t.$refs.verificationCode.closeVerificationCode(),0==t.orderSummaryInfo.payAmount?t.$Router.replace({path:"/pages/payment/index",query:{payId:e.data.data.payId,newtype:t.$Route.query.newtype||""}}):t.$Router.replace({path:"/pages/pay/index",query:{payId:e.data.data.payId,newtype:t.$Route.query.newtype||""}})):uni.showToast({title:e.data.message,icon:"none"})})))},goldChange:function(t){this.deductionFlag.gold=t.detail.value,t.detail.value?this.orderSummaryParams["goldAmount"]=this.orderGoldCount.canUseGold:this.orderSummaryParams["goldAmount"]=0,this.orderSummary()},scoreChange:function(t){this.deductionFlag.score=t.detail.value,t.detail.value?this.orderSummaryParams["scoreNum"]=this.orderScoreCount.usefulScoreNum:this.orderSummaryParams["scoreNum"]=0,this.orderSummary()},storeCouponChange:function(t,e){this.$set(this.freightParams[t],"couponId",e),this.freightPromotions(t)},plateformCouponChange:function(t){this.$set(this.orderSummaryParams,"platformPromotionId",t),this.orderGold(this.orderSummaryParams)},promotionCouponChange:function(t,e){this.$set(this.couponParams[t],"promotionId",e),this.storeCoupons(t)},initStorePromotion:function(t,e){this.$set(this.storePromotion,t,[]),this.storePromotion[t]=e},openForgetPopup:function(){this.$refs.forgetPayPsw.openForgetPopup()},setSubmitPsw:function(t){this.$set(this.orderSummaryParams,"password",t),this.submit()},goodsNumBlur:function(t,e){t.target.value?(console.log(t.target.value),console.log(this.limitSettle.stockNumber),console.log(t.target.value<=this.limitSettle.stockNumber),Number(t.target.value)<1?(this.debounceHandle(1),this.$set(e,"goodsNum",1)):Number(t.target.value)<=this.limitSettle.stockNumber?(this.debounceHandle(parseInt(t.target.value)),this.$set(e,"goodsNum",parseInt(t.target.value))):(this.debounceHandle(parseInt(this.limitSettle.stockNumber)),this.$set(e,"goodsNum",parseInt(this.limitSettle.stockNumber)))):this.debounceHandle(1)},goodsNumChange:function(t,e){e?Number(t.goodsNum)+1<=this.limitSettle.stockNumber&&(this.debounceHandle(Number(t.goodsNum)+1),this.$set(t,"goodsNum",Number(t.goodsNum)+1)):t.goodsNum>1&&(this.debounceHandle(Number(t.goodsNum)-1),this.$set(t,"goodsNum",Number(t.goodsNum)-1))},debounceHandle:function(t){var e=this;return this.limitSettle.time&&clearTimeout(this.limitSettle.time),function(){e.limitSettle.time=setTimeout((function(){e.pageInitParams(t)}),500)}()}}};e.default=m},"5ebd":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={props:["storeCouponsInfo","storeId","storeName","chooseStoreId"],data:function(){return{}},methods:{openCouponPopup:function(){this.$refs.couponPopup.open()},clearCoupon:function(){this.$emit("couponChange",this.storeId,"")},closeCouponPopup:function(){this.$refs.couponPopup.close()},couponChange:function(t){t.id!=this.chooseStoreId&&this.$emit("couponChange",this.storeId,t.id)}},mounted:function(){}};e.default=i},"5ebe":function(t,e,o){"use strict";o.r(e);var i=o("76a5"),a=o.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){o.d(e,t,(function(){return i[t]}))}(n);e["default"]=a.a},"76a5":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={props:["storeName","storePromotion","storeId","choosePromotionId"],data:function(){return{}},methods:{openPromotionPopup:function(){this.$refs.storePromotion.open()},closePromotionPopup:function(){this.$refs.storePromotion.close()},promotionChange:function(t){t.id!=this.choosePromotionId&&this.$emit("promotionChange",this.storeId,t.id)}},mounted:function(){}};e.default=i},"810a":function(t,e,o){"use strict";o.d(e,"b",(function(){return a})),o.d(e,"c",(function(){return n})),o.d(e,"a",(function(){return i}));var i={uniPopup:o("1c89").default},a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-uni-view",{staticClass:"page"},[o("v-uni-view",{staticClass:"disCount",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openCouponPopup.apply(void 0,arguments)}}},[o("v-uni-view",[o("v-uni-text",[t._v("平台优惠券")]),o("v-uni-text",{staticClass:"couponsNum"},[t._v(t._s(t.platforCouponsInfo.availableList.length)+"张可用")])],1),t._l(t.platforCouponsInfo.availableList,(function(e,i){return t.choosePlatfromId==e.id?o("v-uni-view",{key:i,staticClass:"discountPrice"},[e.discountValue?o("v-uni-text",[t._v("-￥"+t._s(e.discountValue))]):t._e()],1):t._e()})),o("v-uni-view",{staticClass:"couponIcon"})],2),o("uni-popup",{ref:"couponPopup",attrs:{type:"bottom"}},[o("v-uni-view",{staticClass:"couponPopup"},[o("v-uni-view",{staticClass:"popupTitle"},[t._v("平台优惠券")]),o("v-uni-scroll-view",{staticClass:"couponMain",attrs:{"scroll-y":"true"}},[t._l(t.platforCouponsInfo.availableList,(function(e,i){return o("v-uni-view",{key:i,staticClass:"everyRow"},[o("v-uni-view",{staticClass:"couponPrice"},[o("v-uni-view",{staticClass:"price"},[o("v-uni-text",[t._v("￥")]),t._v(t._s(e.discountValue))],1),o("v-uni-view",{staticClass:"type"},[t._v(t._s(1==e.condType?"满":"每满")+t._s(e.condValue)+"使用")])],1),o("v-uni-view",{staticClass:"couponInfo"},[o("v-uni-view",{staticClass:"couponType"},[o("v-uni-text",{staticClass:"disCountType"},[t._v("满减券")]),o("v-uni-text",{staticClass:"couponName"},[t._v(t._s(e.name))])],1),o("v-uni-view",{staticClass:"couponTime"},[t._v(t._s(t.$utils.formatDate(e.startTime,"yyyy.MM.dd"))+"-"+t._s(t.$utils.formatDate(e.endTime,"yyyy.MM.dd")))])],1),o("v-uni-view",{staticClass:"couponBtnIcon",class:t.choosePlatfromId==e.id?"active":"",on:{click:function(o){arguments[0]=o=t.$handleEvent(o),t.couponChange(e)}}})],1)})),o("v-uni-view",{staticClass:"availableNotUse",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clearCoupon.apply(void 0,arguments)}}},[t._v("不使用优惠券")]),t.platforCouponsInfo.unavailableList.length?o("v-uni-view",{staticClass:"unavailable"},[t._v("不可用优惠券")]):t._e(),t._l(t.platforCouponsInfo.unavailableList,(function(e,i){return o("v-uni-view",{key:i,staticClass:"everyRow"},[o("v-uni-view",{staticClass:"couponPrice unavailableActive"},[o("v-uni-view",{staticClass:"price"},[o("v-uni-text",[t._v("￥")]),t._v(t._s(e.discountValue))],1),o("v-uni-view",{staticClass:"type"},[t._v(t._s(1==e.condType?"满":"每满")+t._s(e.condValue)+"使用")])],1),o("v-uni-view",{staticClass:"couponInfo"},[o("v-uni-view",{staticClass:"couponType"},[o("v-uni-text",{staticClass:"disCountType unavailableActive"},[t._v("满减券")]),o("v-uni-text",{staticClass:"couponName"},[t._v(t._s(e.name))])],1),o("v-uni-view",{staticClass:"couponTime"},[t._v(t._s(t.$utils.formatDate(e.startTime,"yyyy.MM.dd"))+"-"+t._s(t.$utils.formatDate(e.endTime,"yyyy.MM.dd")))])],1)],1)}))],2),o("v-uni-view",{staticClass:"sureBtn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.closeCouponPopup.apply(void 0,arguments)}}},[t._v("完成")])],1)],1)],1)},n=[]},"85f5":function(t,e,o){var i=o("2d66");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=o("4f06").default;a("8c308338",i,!0,{sourceMap:!1,shadowMode:!1})},"98f7":function(t,e,o){"use strict";o.r(e);var i=o("fad1"),a=o("5ebe");for(var n in a)["default"].indexOf(n)<0&&function(t){o.d(e,t,(function(){return a[t]}))}(n);o("487d");var s,r=o("f0c5"),d=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,"ed540348",null,!1,i["a"],s);e["default"]=d.exports},acd6:function(t,e,o){var i=o("4bad");e=i(!1),e.push([t.i,".disCount[data-v-ed540348]{width:calc(100% - %?44?%);margin:0 auto;height:%?88?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;border-bottom:%?1?% solid #e6e6e6;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.couponIcon[data-v-ed540348]{height:%?88?%;width:%?32?%;background:url(http://beifa-mall.oss-cn-shanghai.aliyuncs.com/appletsImages/moreD.png) no-repeat 50%;background-size:%?32?% %?8?%}.couponPopup[data-v-ed540348]{height:%?752?%;width:100%;background-color:#fff}.popupTitle[data-v-ed540348]{width:100%;height:%?100?%;line-height:%?100?%;font-size:%?34?%;text-align:center}.couponMain[data-v-ed540348]{width:100%;height:calc(100% - %?200?%)}.promotionText[data-v-ed540348]{text-align:right;-webkit-box-flex:1;-webkit-flex:1;flex:1;margin-right:%?20?%}.sureBtn[data-v-ed540348]{width:100%;height:%?100?%;text-align:center;line-height:%?100?%;font-size:%?32?%;color:#fff;background-color:#ff1558}.everyRow[data-v-ed540348]{width:%?702?%;margin:0 auto;margin-bottom:%?30?%;display:-webkit-box;display:-webkit-flex;display:flex;height:%?88?%;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding-right:%?24?%}.promotionView[data-v-ed540348]{color:#666;-webkit-box-flex:1;-webkit-flex:1;flex:1}.couponBtnIcon[data-v-ed540348]{width:%?36?%;height:%?36?%;background:url(http://beifa-mall.oss-cn-shanghai.aliyuncs.com/appletsImages/oval_3copy4@2x.png) no-repeat 50%;background-size:%?36?% %?36?%}.couponBtnIcon.active[data-v-ed540348]{background:url(http://beifa-mall.oss-cn-shanghai.aliyuncs.com/appletsImages/subr.png) no-repeat 50%;background-size:%?36?% %?36?%}",""]),t.exports=e},b1b2:function(t,e,o){"use strict";o.r(e);var i=o("5ebd"),a=o.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){o.d(e,t,(function(){return i[t]}))}(n);e["default"]=a.a},b2b5:function(t,e,o){"use strict";o.r(e);var i=o("48b3"),a=o.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){o.d(e,t,(function(){return i[t]}))}(n);e["default"]=a.a},b6cf:function(t,e,o){"use strict";var i=o("401f"),a=o.n(i);a.a},bd8c:function(t,e,o){"use strict";var i=o("85f5"),a=o.n(i);a.a},cb69:function(t,e,o){"use strict";var i=o("f159"),a=o.n(i);a.a},e129:function(t,e,o){var i=o("acd6");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=o("4f06").default;a("fbdb7c10",i,!0,{sourceMap:!1,shadowMode:!1})},f159:function(t,e,o){var i=o("ff2e");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=o("4f06").default;a("04249568",i,!0,{sourceMap:!1,shadowMode:!1})},fad1:function(t,e,o){"use strict";o.d(e,"b",(function(){return a})),o.d(e,"c",(function(){return n})),o.d(e,"a",(function(){return i}));var i={uniPopup:o("1c89").default},a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-uni-view",{staticClass:"page"},[o("v-uni-view",{staticClass:"disCount",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openPromotionPopup.apply(void 0,arguments)}}},[o("v-uni-view",[o("v-uni-text",[t._v("促销")])],1),o("v-uni-view",{staticClass:"promotionText"},[t._v(t._s(t.storePromotion[t.storeId][0].name))]),o("v-uni-view",{staticClass:"couponIcon"})],1),o("uni-popup",{ref:"storePromotion",attrs:{type:"bottom"}},[o("v-uni-view",{staticClass:"couponPopup"},[o("v-uni-view",{staticClass:"popupTitle"},[t._v(t._s(t.storeName))]),o("v-uni-scroll-view",{staticClass:"couponMain",attrs:{"scroll-y":"true"}},t._l(t.storePromotion[t.storeId],(function(e,i){return o("v-uni-view",{key:i,staticClass:"everyRow"},[o("v-uni-view",{staticClass:"promotionView"},[t._v(t._s(e.name))]),o("v-uni-view",{staticClass:"couponBtnIcon",class:t.choosePromotionId==e.id?"active":"",on:{click:function(o){arguments[0]=o=t.$handleEvent(o),t.promotionChange(e)}}})],1)})),1),o("v-uni-view",{staticClass:"sureBtn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.closePromotionPopup.apply(void 0,arguments)}}},[t._v("完成")])],1)],1)],1)},n=[]},fd0b:function(t,e,o){var i=o("4bad");e=i(!1),e.push([t.i,".settlement[data-v-ea5c9f44]{\npadding-top:%?88?%;\npadding-bottom:calc(%?120?% + constant(safe-area-inset-bottom));padding-bottom:calc(%?120?% + env(safe-area-inset-bottom))}.settlement.active[data-v-ea5c9f44]{padding-bottom:calc(%?210?% + constant(safe-area-inset-bottom));padding-bottom:calc(%?210?% + env(safe-area-inset-bottom))}.settlementAddress[data-v-ea5c9f44]{width:100%;padding:%?60?% %?24?%;position:relative}.settlementTitle[data-v-ea5c9f44]{width:100%;line-height:%?40?%;color:#333;display:-webkit-box;display:-webkit-flex;display:flex;font-size:%?34?%;font-weight:700}.telephone[data-v-ea5c9f44]{margin-left:%?20?%}.addressMain[data-v-ea5c9f44]{width:90%;color:#333;line-height:%?36?%;margin-top:%?24?%}.arrow[data-v-ea5c9f44]{width:%?10?%;height:%?20?%;background:url(http://beifa-mall.oss-cn-shanghai.aliyuncs.com/appletsImages/rightArrow.png) no-repeat 50%;background-size:%?10?% %?20?%;position:absolute;right:%?24?%;top:50%;margin-top:%?-10?%}.settlementLine[data-v-ea5c9f44]{height:%?8?%;width:100%;background:url(http://beifa-mall.oss-cn-shanghai.aliyuncs.com/appletsImages/pic_ct.png) no-repeat 50%;background-size:100% %?8?%}.addressChange[data-v-ea5c9f44]{width:100%;margin-bottom:.2rem;padding-left:.24rem;color:#ff1558}.orderMain[data-v-ea5c9f44]{width:100%;margin-bottom:%?60?%}.shopName[data-v-ea5c9f44]{width:100%;line-height:%?42?%;padding:%?34?% %?24?% %?12?%;font-size:%?30?%;color:#333;font-weight:700}.goodsCont[data-v-ea5c9f44]{position:relative;width:100%;display:-webkit-box;display:-webkit-flex;display:flex;padding:%?10?% %?24?%}.goodsCont uni-image[data-v-ea5c9f44]{width:%?220?%;height:%?220?%}.goodsInfo[data-v-ea5c9f44]{padding:%?20?% 0;margin-left:%?24?%;-webkit-box-flex:1;-webkit-flex:1;flex:1;position:relative}.goodsText[data-v-ea5c9f44]{width:100%;max-height:%?80?%;color:#333}.goodSpce[data-v-ea5c9f44]{width:100%;height:%?28?%;line-height:%?28?%;font-size:%?24?%;color:#999;margin-top:%?12?%}.goodsPrice[data-v-ea5c9f44]{height:%?44?%;line-height:%?44?%;position:absolute;bottom:%?20?%;color:#ff1558;width:100%;font-size:%?30?%}.goodsNum[data-v-ea5c9f44]{position:absolute;right:0;top:0}.fmGoodsMsg[data-v-ea5c9f44]{width:calc(100% - %?48?%);height:%?88?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin:0 auto;-webkit-box-align:center;-webkit-align-items:center;align-items:center;display:flex;border-bottom:1px solid #e6e6e6}.colorChange[data-v-ea5c9f44]{color:#999;line-height:%?44?%;height:%?44?%;text-align:right;font-size:%?28?%}.activityBox[data-v-ea5c9f44]{display:inline-block;height:%?32?%;line-height:%?32?%;font-size:%?22?%;text-align:center;padding:0 %?14?%;border-radius:%?100?%;color:#ff7e18;background:#ffeee1}.promotionsActivityBox[data-v-ea5c9f44]{display:inline-block;height:%?32?%;line-height:%?32?%;font-size:%?20?%;text-align:center;padding:0 %?14?%;border-radius:%?100?%;background:#242424;color:#ffdf8c}.fmGoodsMsg uni-input[data-v-ea5c9f44]{font-size:%?24?%;-webkit-box-flex:1;-webkit-flex:1;flex:1;margin-left:%?20?%;height:100%;line-height:%?88?%}.price[data-v-ea5c9f44]{font-size:%?24?%;color:#333}.goPayBox[data-v-ea5c9f44]{width:100%;height:%?100?%;line-height:%?100?%;background-color:#fff;display:-webkit-box;display:-webkit-flex;display:flex;position:fixed;left:0;bottom:0;bottom:calc(%?0?% + constant(safe-area-inset-bottom));bottom:calc(%?0?% + env(safe-area-inset-bottom));border-top:%?1?% solid #e6e6e6;z-index:9}.payText[data-v-ea5c9f44]{-webkit-box-flex:1;-webkit-flex:1;flex:1;color:#4a4a4a;text-align:right;margin-right:%?48?%;line-height:%?100?%}.submitBtn[data-v-ea5c9f44]{width:%?252?%;height:%?100?%;line-height:%?100?%;text-align:center;line-height:%?100?%;color:#fff;font-size:%?32?%;background-color:#ff1558}.nullAddress[data-v-ea5c9f44]{line-height:%?40?%;font-size:%?34?%;font-weight:700}.integralMain[data-v-ea5c9f44]{height:%?88?%;width:100%;display:-webkit-box;display:-webkit-flex;display:flex;margin-left:%?24?%;-webkit-box-align:center;-webkit-align-items:center;align-items:center;border-bottom:%?1?% solid #e4e4e4;padding-right:%?24?%}.separatePromotion[data-v-ea5c9f44]{padding:0 %?24?%}.marking_plus[data-v-ea5c9f44]{display:inline-block;background:#080f23;border-radius:8px 8px 8px 2px;font-size:11px;color:#ffe9d3;padding:0 7px;margin-left:%?20?%}.intergalInfo[data-v-ea5c9f44]{font-size:%?22?%;color:#999;-webkit-box-flex:1;-webkit-flex:1;flex:1;text-align:right}.intergalBtn[data-v-ea5c9f44]{width:%?89?%;margin-left:%?24?%;margin-right:%?24?%}.discountPrice[data-v-ea5c9f44]{display:-webkit-box;display:-webkit-flex;display:flex;width:100%;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding:%?24?%}.priceSymbol[data-v-ea5c9f44]{font-size:%?24?%;color:#ff1558}.symbolPrice[data-v-ea5c9f44]{font-size:%?32?%;color:#ff1558;margin-right:%?12?%}.symbol[data-v-ea5c9f44]{font-size:%?22?%;color:#ff1558}.payAmount[data-v-ea5c9f44]{color:#ff1558;font-size:%?32?%}.deduction[data-v-ea5c9f44]{width:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding:0 %?24?%;color:#333;height:%?40?%;line-height:%?40?%}.performance[data-v-ea5c9f44]{font-size:%?28?%;font-weight:400;color:#663f0a;margin-top:%?20?%;padding-top:%?20?%;border-top:1px solid #e4e4e4}.scoreBox[data-v-ea5c9f44]{margin-bottom:%?40?%}.member_identification[data-v-ea5c9f44]{height:%?26?%;width:calc(100% - %?48?%);margin:%?20?% auto %?10?%}.cartHint[data-v-ea5c9f44]{width:100%;height:%?90?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:0 %?20?%;position:fixed;color:#8e5b17;background-color:#fbf4ea;font-size:%?24?%;font-weight:400;bottom:calc(%?100?% + constant(safe-area-inset-bottom));bottom:calc(%?100?% + env(safe-area-inset-bottom));z-index:9}.cartHint uni-text[data-v-ea5c9f44]{color:#333;font-weight:500}.goBuyBtn[data-v-ea5c9f44]{color:#8e5b17;font-weight:500}.cartHint .memberGoodsPrice[data-v-ea5c9f44]{color:#ff1558}.deliveryTime[data-v-ea5c9f44]{width:calc(100% - %?40?%);height:%?58?%;background-color:#fee5eb;margin:%?5?% auto;border-radius:%?20?%;color:#fe325c;font-size:%?24?%;padding:0 %?20?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.deliveryTime uni-image[data-v-ea5c9f44]{width:%?20?%;height:%?20?%;margin-right:%?12?%}.partnerPref[data-v-ea5c9f44]{font-weight:700}.partnerPrefNum[data-v-ea5c9f44]{padding-right:%?40?%;color:#000;font-size:%?28?%}.goodsNum[data-v-ea5c9f44]{position:absolute;top:%?0?%;right:%?0?%;background-color:#fff;width:%?188?%;height:%?50?%;display:-webkit-box;display:-webkit-flex;display:flex;color:#999;font-size:%?30?%}.goodsNum .jia[data-v-ea5c9f44],\n.goodsNum .jian[data-v-ea5c9f44]{width:%?50?%;height:%?50?%;text-align:center;line-height:%?48?%;border:1px solid #e6e6e6}.goodsNum uni-input[data-v-ea5c9f44]{width:%?88?%;height:100%;text-align:center;border-top:1px solid #e6e6e6;border-bottom:1px solid #e6e6e6;font-size:%?24?%}.goodsNum.active[data-v-ea5c9f44]{width:auto}",""]),t.exports=e},fdc6:function(t,e,o){"use strict";o.d(e,"b",(function(){return a})),o.d(e,"c",(function(){return n})),o.d(e,"a",(function(){return i}));var i={uniPopup:o("1c89").default},a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-uni-view",{staticClass:"page"},[o("v-uni-view",{staticClass:"disCount",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openCouponPopup.apply(void 0,arguments)}}},[o("v-uni-view",[o("v-uni-text",[t._v("店铺优惠券")]),o("v-uni-text",{staticClass:"couponsNum"},[t._v(t._s(t.storeCouponsInfo[t.storeId].availableList.length)+"张可用")])],1),t._l(t.storeCouponsInfo[t.storeId].availableList,(function(e,i){return t.chooseStoreId==e.id?o("v-uni-view",{key:i,staticClass:"discountPrice"},[e.discountValue?o("v-uni-text",[t._v("-￥"+t._s(e.discountValue))]):t._e()],1):t._e()})),o("v-uni-view",{staticClass:"couponIcon"})],2),o("uni-popup",{ref:"couponPopup",attrs:{type:"bottom"}},[o("v-uni-view",{staticClass:"couponPopup"},[o("v-uni-view",{staticClass:"popupTitle"},[t._v(t._s(t.storeName))]),o("v-uni-scroll-view",{staticClass:"couponMain",attrs:{"scroll-y":"true"}},[t._l(t.storeCouponsInfo[t.storeId].availableList,(function(e,i){return o("v-uni-view",{key:i,staticClass:"everyRow"},[o("v-uni-view",{staticClass:"couponPrice"},[o("v-uni-view",{staticClass:"price"},[o("v-uni-text",[t._v("￥")]),t._v(t._s(e.discountValue))],1),o("v-uni-view",{staticClass:"type"},[t._v(t._s(1==e.condType?"满":"每满")+t._s(e.condValue)+"使用")])],1),o("v-uni-view",{staticClass:"couponInfo"},[o("v-uni-view",{staticClass:"couponType"},[o("v-uni-text",{staticClass:"disCountType"},[t._v("满减券")]),o("v-uni-text",{staticClass:"couponName"},[t._v(t._s(e.name))])],1),o("v-uni-view",{staticClass:"couponTime"},[t._v(t._s(t.$utils.formatDate(e.startTime,"yyyy.MM.dd"))+"-"+t._s(t.$utils.formatDate(e.endTime,"yyyy.MM.dd")))])],1),o("v-uni-view",{staticClass:"couponBtnIcon",class:t.chooseStoreId==e.id?"active":"",on:{click:function(o){arguments[0]=o=t.$handleEvent(o),t.couponChange(e)}}})],1)})),o("v-uni-view",{staticClass:"availableNotUse",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clearCoupon.apply(void 0,arguments)}}},[t._v("不使用优惠券")]),o("v-uni-view",{staticClass:"unavailable"},[t._v("不可用优惠券")]),t._l(t.storeCouponsInfo[t.storeId].unavailableList,(function(e,i){return o("v-uni-view",{key:i,staticClass:"everyRow"},[o("v-uni-view",{staticClass:"couponPrice unavailableActive"},[o("v-uni-view",{staticClass:"price"},[o("v-uni-text",[t._v("￥")]),t._v(t._s(e.discountValue))],1),o("v-uni-view",{staticClass:"type"},[t._v(t._s(1==e.condType?"满":"每满")+t._s(e.condValue)+"使用")])],1),o("v-uni-view",{staticClass:"couponInfo"},[o("v-uni-view",{staticClass:"couponType"},[o("v-uni-text",{staticClass:"disCountType unavailableActive"},[t._v("满减券")]),o("v-uni-text",{staticClass:"couponName"},[t._v(t._s(e.name))])],1),o("v-uni-view",{staticClass:"couponTime"},[t._v(t._s(t.$utils.formatDate(e.startTime,"yyyy.MM.dd"))+"-"+t._s(t.$utils.formatDate(e.endTime,"yyyy.MM.dd")))])],1)],1)}))],2),o("v-uni-view",{staticClass:"sureBtn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.closeCouponPopup.apply(void 0,arguments)}}},[t._v("完成")])],1)],1)],1)},n=[]},ff2e:function(t,e,o){var i=o("4bad");e=i(!1),e.push([t.i,".disCount[data-v-2019ac0e]{width:calc(100% - %?44?%);margin:0 auto;height:%?88?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;border-bottom:%?1?% solid #e6e6e6;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.couponsNum[data-v-2019ac0e]{height:%?32?%;line-height:%?32?%;text-align:center;color:#ff1558;background-color:#ffecf1;padding:0 %?14?%;border-radius:%?100?%;margin-left:%?10?%}.couponIcon[data-v-2019ac0e]{height:%?88?%;width:%?32?%;background:url(http://beifa-mall.oss-cn-shanghai.aliyuncs.com/appletsImages/moreD.png) no-repeat 50%;background-size:%?32?% %?8?%}.couponPopup[data-v-2019ac0e]{height:%?752?%;width:100%;background-color:#fff}.popupTitle[data-v-2019ac0e]{width:100%;height:%?100?%;line-height:%?100?%;font-size:%?34?%;text-align:center}.couponMain[data-v-2019ac0e]{width:100%;height:calc(100% - %?200?%)}.discountPrice[data-v-2019ac0e]{-webkit-box-flex:1;-webkit-flex:1;flex:1;text-align:right;margin-right:%?20?%}.everyRow[data-v-2019ac0e]{width:%?702?%;margin:0 auto;margin-bottom:%?30?%;border-radius:%?6?%;box-shadow:0 0 18px 0 rgba(0,0,0,.08);display:-webkit-box;display:-webkit-flex;display:flex;height:%?170?%;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding-right:%?24?%}.couponPrice[data-v-2019ac0e]{width:%?220?%;height:%?170?%;padding:%?24?%;background:url(http://beifa-mall.oss-cn-shanghai.aliyuncs.com/appletsImages/orderCoup.png) no-repeat 50%;background-size:%?220?% %?170?%;text-align:center;color:#fff}.couponPrice.unavailableActive[data-v-2019ac0e]{background:url(http://beifa-mall.oss-cn-shanghai.aliyuncs.com/appletsImages/orderCoupUn.png) no-repeat 50%}.sureBtn[data-v-2019ac0e]{width:100%;height:%?100?%;text-align:center;line-height:%?100?%;font-size:%?32?%;color:#fff;background-color:#ff1558}.price[data-v-2019ac0e]{font-size:%?60?%}.price uni-text[data-v-2019ac0e]{font-size:%?38?%}.type[data-v-2019ac0e]{font-size:%?24?%;margin-top:%?4?%}.couponInfo[data-v-2019ac0e]{-webkit-box-flex:1;-webkit-flex:1;flex:1;height:%?170?%;padding:%?26?% %?84?% %?26?% %?24?%}.couponType[data-v-2019ac0e]{width:100%;height:%?72?%;line-height:%?36?%;color:#333;font-weight:700}.disCountType[data-v-2019ac0e]{color:#fff;margin-right:%?22?%;padding:0 %?10?%;background-color:#ff1558;height:%?24?%;line-height:%?24?%;border-radius:%?100?%;font-size:%?18?%}.unavailableActive[data-v-2019ac0e]{background-color:#ddd}.couponName[data-v-2019ac0e]{font-weight:%?700?%;color:#333}.couponTime[data-v-2019ac0e]{color:#929292;font-size:%?22?%}.couponBtnIcon[data-v-2019ac0e]{width:%?36?%;height:%?36?%;background:url(http://beifa-mall.oss-cn-shanghai.aliyuncs.com/appletsImages/oval_3copy4@2x.png) no-repeat 50%;background-size:%?36?% %?36?%}.couponBtnIcon.active[data-v-2019ac0e]{background:url(http://beifa-mall.oss-cn-shanghai.aliyuncs.com/appletsImages/subr.png) no-repeat 50%;background-size:%?36?% %?36?%}.availableNotUse[data-v-2019ac0e]{width:%?702?%;height:%?98?%;line-height:%?98?%;text-align:center;background-color:#fff;color:#999;margin:0 auto;margin-bottom:%?30?%;border-radius:%?6?%;font-size:%?32?%;border:%?1?% solid #e4e4e4}.unavailable[data-v-2019ac0e]{width:100%;height:%?94?%;line-height:%?94?%;padding:0 %?24?%;font-size:%?30?%;color:#333}",""]),t.exports=e}}]);