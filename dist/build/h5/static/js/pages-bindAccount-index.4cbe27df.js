(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-bindAccount-index"],{"2acd":function(n,t,e){"use strict";var i=e("eb66"),o=e.n(i);o.a},"2bd2":function(n,t,e){"use strict";var i=e("4ea4");e("ac1f"),e("466d"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(e("5315")),a=i(e("081b")),c=i(e("3095")),s={data:function(){return{accountInfo:{},authorizeFlag:!1,isWxFlag:!1,wxCode:"",defaultTitleDto:{title:"绑定账号",bottomColor:"#e6e6e6"}}},methods:{account:function(){var n=this;o.default.account().then((function(t){200==t.data.code?(n.accountInfo=t.data.data,!n.accountInfo.bindWx&&n.wxCode?n.wechatH5Bind():n.accountInfo.bindWx&&n.wxCode&&n.wechatMiniUnBind()):uni.showToast({title:t.data.message,icon:"none"})}))},getUserInfo:function(n){var t=this;uni.login({success:function(e){var i={encryptedData:n.encryptedData,iv:n.iv,code:e.code};t.wechatMiniBind(i)}})},wechatMiniBind:function(n){var t=this;o.default.wechatMiniBind(n).then((function(n){200==n.data.code?(uni.showToast({title:"绑定成功",icon:"none"}),t.account()):uni.showToast({title:n.data.message,icon:"none"})}))},wechatMiniUnBind:function(){var n=this;o.default.wechatMiniUnBind().then((function(t){200==t.data.code?(uni.showToast({title:"解绑成功",icon:"none"}),n.account()):uni.showToast({title:t.data.message,icon:"none"})}))},getCode:function(){a.default.wxPubAppId().then((function(n){if(200==n.data.code){var t="https://"+location.host+location.pathname;location.href=location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+n.data.data+"&redirect_uri="+encodeURIComponent(t)+"&response_type=code&scope=snsapi_userinfo"}else uni.showToast({title:n.data.message,icon:"none"})}))},wechatH5Bind:function(){var n=this;o.default.wechatH5Bind(this.wxCode).then((function(t){200==t.data.code?(uni.showToast({title:"绑定成功",icon:"none"}),n.wxCode="",n.account()):uni.showToast({title:t.data.message,icon:"none"})}))},wechatH5Unbind:function(){var n=this;o.default.wechatH5Unbind().then((function(t){200==t.data.code?(uni.showToast({title:"解绑成功",icon:"none"}),n.wxCode="",n.account()):uni.showToast({title:t.data.message,icon:"none"})}))},goToBindTel:function(){this.$Router.push({path:"/pages/changeCellPhone/index",query:{tel:this.accountInfo.telephone}})}},onShow:function(){this.zhuge.track("绑定账号"),uni.getStorageSync("sessionId")?this.account():this.$Router.push({path:"/pages/login/index"});var n=navigator.userAgent.toLowerCase();"micromessenger"==n.match(/MicroMessenger/i)?this.isWxFlag=!0:this.isWxFlag=!1},onLoad:function(n){n.code&&(this.wxCode=n.code)},components:{wxLogin:c.default}};t.default=s},"2c11":function(n,t,e){"use strict";e.r(t);var i=e("dfea"),o=e("3070");for(var a in o)["default"].indexOf(a)<0&&function(n){e.d(t,n,(function(){return o[n]}))}(a);e("2acd");var c,s=e("f0c5"),d=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,"4bb36575",null,!1,i["a"],c);t["default"]=d.exports},3070:function(n,t,e){"use strict";e.r(t);var i=e("2bd2"),o=e.n(i);for(var a in i)["default"].indexOf(a)<0&&function(n){e.d(t,n,(function(){return i[n]}))}(a);t["default"]=o.a},3095:function(n,t,e){"use strict";e.r(t);var i=e("347e"),o=e("eba3");for(var a in o)["default"].indexOf(a)<0&&function(n){e.d(t,n,(function(){return o[n]}))}(a);e("7500");var c,s=e("f0c5"),d=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,"fb11a638",null,!1,i["a"],c);t["default"]=d.exports},"347e":function(n,t,e){"use strict";var i;e.d(t,"b",(function(){return o})),e.d(t,"c",(function(){return a})),e.d(t,"a",(function(){return i}));var o=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("v-uni-view",[n.canIUseGetUserProfile?e("v-uni-button",{staticClass:"authorizaBtnBox userName",attrs:{lang:"zh_CN"},on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.getUserProfile.apply(void 0,arguments)}}}):e("v-uni-button",{staticClass:"authorizaBtnBox userName",attrs:{"open-type":"getUserInfo",lang:"zh_CN"},on:{getuserinfo:function(t){arguments[0]=t=n.$handleEvent(t),n.getUserInfo.apply(void 0,arguments)}}})],1)},a=[]},7500:function(n,t,e){"use strict";var i=e("90d3"),o=e.n(i);o.a},"7be9":function(n,t,e){var i=e("4bad");t=i(!1),t.push([n.i,".commonPageTitle[data-v-4bb36575]{\npadding-top:%?88?%\n}.bindAlready[data-v-4bb36575]{width:100%;display:-webkit-box;display:-webkit-flex;display:flex;height:%?138?%;padding:%?18?% %?30?% 0 %?32?%}.bindInfo[data-v-4bb36575]{-webkit-box-flex:1;-webkit-flex:1;flex:1;height:auto;padding-top:%?30?%}.bindBtn[data-v-4bb36575]{height:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;position:relative}.bindBtn uni-view[data-v-4bb36575],.bindWxBtn[data-v-4bb36575]{display:block;height:%?50?%;line-height:%?50?%;border-radius:%?28?%;border:%?1?% solid #a4a4a4;padding:0 %?10?%;color:#787878;background-color:none}.bindWxBtn[data-v-4bb36575]{opacity:.01;border:none;position:absolute;top:0;left:0;width:100%;height:100%}.des[data-v-4bb36575]{color:#999;margin-top:%?14?%;line-height:%?27?%;font-size:%?24?%}",""]),n.exports=t},8648:function(n,t,e){var i=e("4bad");t=i(!1),t.push([n.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.authorizaBtnBox[data-v-fb11a638]{width:100%;height:100%;position:absolute;top:0;left:0;opacity:.01}',""]),n.exports=t},"90d3":function(n,t,e){var i=e("8648");"string"===typeof i&&(i=[[n.i,i,""]]),i.locals&&(n.exports=i.locals);var o=e("4f06").default;o("06e48cec",i,!0,{sourceMap:!1,shadowMode:!1})},dd48:function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={data:function(){return{authorizeFlag:!1,canIUseGetUserProfile:!1,code:""}},mounted:function(){uni.canIUse("getUserProfile")?this.canIUseGetUserProfile=!0:this.canIUseGetUserProfile=!1},methods:{getUserProfile:function(n){var t=this;uni.login({success:function(n){t.code=n.code}}),uni.getUserProfile({desc:"用于完善用户资料",success:function(n){t.encryptedData=n.encryptedData,t.iv=n.iv,t.uniLogin(!0)},fail:function(){uni.showToast({title:"授权失败",icon:"none"})}})},getUserInfo:function(n){var t=this;uni.login({success:function(n){t.code=n.code}}),"getUserInfo:ok"==n.detail.errMsg?uni.getUserInfo({success:function(n){t.encryptedData=n.encryptedData,t.iv=n.iv,t.uniLogin(!0)}}):uni.showToast({title:"授权失败",icon:"none"})},uniLogin:function(n){var t=this;uni.showLoading({title:"加载中..."}),n||uni.login({success:function(n){t.code=n.code}});var e={encryptedData:this.encryptedData,iv:this.iv,code:this.code};this.$emit("wechatMiniAuth",e)}}};t.default=i},dfea:function(n,t,e){"use strict";var i;e.d(t,"b",(function(){return o})),e.d(t,"c",(function(){return a})),e.d(t,"a",(function(){return i}));var o=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("v-uni-view",{staticClass:"page commonPageTitle"},[e("defaultTitle",{attrs:{dto:n.defaultTitleDto}}),e("v-uni-view",{staticClass:"bindAlready bindTelBox"},[e("v-uni-view",{staticClass:"bindInfo"},[e("v-uni-view",[n._v("手机号")]),e("v-uni-view",{staticClass:"des"},[n._v(n._s(n.accountInfo.hiddenTelephone))])],1),n.accountInfo.bindTelephone?e("v-uni-view",{staticClass:"bindBtn",on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.goToBindTel.apply(void 0,arguments)}}},[e("v-uni-view",[n._v("换手机号")])],1):n._e()],1),e("v-uni-view",{staticClass:"bindAlready"},[e("v-uni-view",{staticClass:"bindInfo"},[e("v-uni-view",[n._v("微信绑定")])],1),e("v-uni-view",{staticClass:"bindBtn"},[n.accountInfo.bindWx?e("v-uni-view",{on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.wechatMiniUnBind.apply(void 0,arguments)}}},[n._v("去解绑")]):e("v-uni-view",{on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.getCode.apply(void 0,arguments)}}},[n._v("去绑定")])],1)],1)],1)},a=[]},eb66:function(n,t,e){var i=e("7be9");"string"===typeof i&&(i=[[n.i,i,""]]),i.locals&&(n.exports=i.locals);var o=e("4f06").default;o("5379c928",i,!0,{sourceMap:!1,shadowMode:!1})},eba3:function(n,t,e){"use strict";e.r(t);var i=e("dd48"),o=e.n(i);for(var a in i)["default"].indexOf(a)<0&&function(n){e.d(t,n,(function(){return i[n]}))}(a);t["default"]=o.a}}]);