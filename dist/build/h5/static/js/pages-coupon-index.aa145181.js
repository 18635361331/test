(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-coupon-index"],{"204b":function(t,a,e){var o=e("99f9");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var n=e("4f06").default;n("7e850ea6",o,!0,{sourceMap:!1,shadowMode:!1})},"2fde":function(t,a,e){"use strict";e.r(a);var o=e("743d"),n=e.n(o);for(var i in o)["default"].indexOf(i)<0&&function(t){e.d(a,t,(function(){return o[t]}))}(i);a["default"]=n.a},"48d8":function(t,a,e){"use strict";var o=e("204b"),n=e.n(o);n.a},"5cf9":function(t,a,e){"use strict";var o;e.d(a,"b",(function(){return n})),e.d(a,"c",(function(){return i})),e.d(a,"a",(function(){return o}));var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",{staticClass:"page commonPageTitle"},[e("defaultTitle",{attrs:{dto:t.defaultTitleDto}}),e("v-uni-view",{staticClass:"couponTitle"},[e("v-uni-view",{staticClass:"everyTitle",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.stateChange(0)}}},[e("v-uni-text",{class:0==t.usageState?"active":""},[t._v("未使用")]),t._v("（"+t._s(t.amount.unusedAmount?t.amount.unusedAmount:0)+"）")],1),e("v-uni-view",{staticClass:"everyTitle",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.stateChange(1)}}},[e("v-uni-text",{class:1==t.usageState?"active":""},[t._v("已使用")]),t._v("（"+t._s(t.amount.usedAmount?t.amount.usedAmount:0)+"）")],1),e("v-uni-view",{staticClass:"everyTitle",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.stateChange(2)}}},[e("v-uni-text",{class:2==t.usageState?"active":""},[t._v("已过期")]),t._v("（"+t._s(t.amount.expiredAmount?t.amount.expiredAmount:0)+"）")],1)],1),t.memberCoupons.records&&t.memberCoupons.records.length?e("v-uni-view",{staticClass:"couponBox"},t._l(t.memberCoupons.records,(function(a,o){return e("v-uni-view",{key:a.id},[e("v-uni-view",{staticClass:"everyCoupon"},[e("v-uni-view",{staticClass:"couponCanuse",class:0!=t.usageState?"active":""},[e("v-uni-view",{staticClass:"amountNum"},[e("v-uni-text",[t._v("￥")]),t._v(t._s(a.discountValue))],1),e("v-uni-view",{staticClass:"useScope"},[t._v(t._s(a.lowerLimit))])],1),e("v-uni-view",{staticClass:"couponDetails"},[e("v-uni-view",{staticClass:"couponTop"},[e("v-uni-view",{staticClass:"couponType",class:0!=t.usageState?"active":""},[t._v("满减券")]),t._v(t._s(a.name))],1),e("v-uni-view",{staticClass:"couponRow"},[t._v(t._s(a.timeValue))]),e("v-uni-view",{staticClass:"useHint"},[e("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.hintChange(a)}}},[t._v("使用说明"),e("v-uni-image",{staticClass:"openIcon",class:a.flag?"active":"",attrs:{src:"http://beifa-mall.oss-cn-shanghai.aliyuncs.com/appletsImages/combined_shape copy 2@2x.png",mode:""}})],1),0==t.usageState?e("v-uni-text",{staticClass:"canUseGoodsBtn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goToCouponGoods(a)}}},[t._v("可用商品")]):t._e(),1==t.usageState?e("v-uni-view",{staticClass:"alreadyCanUse"}):t._e()],1)],1)],1),a.flag?e("v-uni-view",{staticClass:"description"},[t._v(t._s(a.description?a.description:""))]):t._e()],1)})),1):t._e(),t.memberCoupons.records&&t.memberCoupons.records.length?t._e():e("v-uni-view",{staticClass:"noCoupont"},[e("v-uni-image",{attrs:{src:"http://beifa-mall.oss-cn-shanghai.aliyuncs.com/appletsImages/coupon_none@2x.png",mode:"widthFix"}}),e("v-uni-view",{staticClass:"noCoupontText"},[t._v("暂时没有优惠券~")])],1)],1)},i=[]},"743d":function(t,a,e){"use strict";var o=e("4ea4");e("99af"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=o(e("5530")),i=o(e("0d75")),s={data:function(){return{amount:{},usageState:0,pageInfo:{pageNo:1,pageSize:10},memberCoupons:{},defaultTitleDto:{title:"我的优惠券"}}},onShow:function(){this.zhuge.track("我的优惠券"),this.getCouponNums(),this.getMemberCoupons()},onReachBottom:function(){this.pageInfo.pageNo<this.memberCoupons.totalPage&&(this.pageInfo.pageNo++,this.getMemberCoupons(!0))},methods:{stateChange:function(t){this.usageState!=t&&(this.usageState=t,this.pageInfo.pageNo=1,uni.showLoading({title:"加载中..."}),this.getMemberCoupons())},getCouponNums:function(){var t=this;i.default.getCouponNums().then((function(a){200==a.data.code?t.amount=a.data.data:uni.showToast({title:a.data.message,icon:"none"})}))},getMemberCoupons:function(t){var a=this;i.default.getMemberCoupons((0,n.default)((0,n.default)({},this.pageInfo),{},{usageState:this.usageState})).then((function(e){if(uni.hideLoading(),200==e.data.code){for(var o=0;o<e.data.data.records.length;o++)0==e.data.data.records[o].condValue?e.data.data.records[o].lowerLimit="无门槛":1==e.data.data.records[o].condType?e.data.data.records[o].lowerLimit="满"+e.data.data.records[o].condValue+"使用":e.data.data.records[o].lowerLimit="每满"+e.data.data.records[o].condValue+"使用",1==e.data.data.records[o].validType?e.data.data.records[o].timeValue="领取后"+e.data.data.records[o].validDays+"天内有效":e.data.data.records[o].timeValue=a.$utils.formatDate(e.data.data.records[o].startTime,"yyyy.MM.dd")+"-"+a.$utils.formatDate(e.data.data.records[o].endTime,"yyyy.MM.dd"),e.data.data.records[o].flag=!1;t?(a.memberCoupons.records=a.memberCoupons.records.concat(e.data.data.records),a.memberCoupons.totalPage=e.data.data.totalPage):a.memberCoupons=e.data.data}else uni.showToast({title:e.data.message,icon:"none"})}))},goToCouponGoods:function(t){uni.setStorageSync("couponItemInfo",JSON.stringify(t)),this.$Router.push({path:"/pages/couponGoods/index",query:{id:t.templateId}})},hintChange:function(t){t.flag=!t.flag}}};a.default=s},"99f9":function(t,a,e){var o=e("4bad");a=o(!1),a.push([t.i,".commonPageTitle[data-v-76968b54]{padding-top:%?88?%;\npadding-top:%?196?%\n}.couponBox[data-v-76968b54]{width:100%;min-height:calc(100vh - %?88?%);\nmin-height:calc(100vh - %?196?%);\nbackground-color:#f5f5f5;padding-top:%?30?%}.couponTitle[data-v-76968b54]{width:100%;height:%?88?%;position:fixed;top:0;\ntop:%?88?%;\nleft:0;background-color:#fff;display:-webkit-box;display:-webkit-flex;display:flex;z-index:1}.everyTitle[data-v-76968b54]{width:33.33%;height:%?88?%;text-align:center;line-height:%?88?%}.everyTitle uni-text.active[data-v-76968b54]{color:#000;font-size:%?40?%}.everyCoupon[data-v-76968b54]{width:%?702?%;height:%?210?%;margin:0 auto %?30?%;background-color:#fff;display:-webkit-box;display:-webkit-flex;display:flex;position:relative}.amountNum[data-v-76968b54]{margin-top:%?40?%;font-size:%?60?%}.couponCanuse[data-v-76968b54]{width:%?220?%;height:%?210?%;background:url(http://beifa-mall.oss-cn-shanghai.aliyuncs.com/appletsImages/coupon_can_180820@2x.png) no-repeat 50%;background-size:%?220?% %?210?%;color:#fff;text-align:center}.couponCanuse.active[data-v-76968b54]{background:url(http://beifa-mall.oss-cn-shanghai.aliyuncs.com/appletsImages/coupon_cannot_180820@2x.png) no-repeat 50%;background-size:%?220?% %?210?%}.useScope[data-v-76968b54]{font-size:%?24?%}.couponDetails[data-v-76968b54]{-webkit-box-flex:1;-webkit-flex:1;flex:1}.couponTop[data-v-76968b54]{margin-top:%?24?%;height:%?84?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:0 %?24?%}.couponType[data-v-76968b54]{padding:%?2?% %?10?%;border-radius:%?100?%;font-size:%?18?%;color:#fff;background-color:#ff1558;margin-right:%?10?%}.couponType.active[data-v-76968b54]{background-color:#ddd}.couponRow[data-v-76968b54]{padding:0 %?24?%;color:#999}.useHint[data-v-76968b54]{color:#999;line-height:%?25?%;font-size:%?22?%;margin-top:%?20?%;padding:0 %?24?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.canUseGoodsBtn[data-v-76968b54]{font-size:%?24?%;color:#ff1558;border:%?1?% solid #ff1558;border-radius:%?65?%;padding:%?4?% %?8?%}.description[data-v-76968b54]{width:%?702?%;min-height:%?60?%;margin:%?8?% auto %?30?%;background-color:#fff;box-shadow:0 2px 4px 0 hsla(0,0%,70%,.5);text-align:center;color:#6f6f6f;border-radius:%?47?%;padding:%?10?% 0}.noCoupont[data-v-76968b54]{width:%?360?%;margin:0 auto;padding-top:%?262?%}.noCoupontText[data-v-76968b54]{text-align:center;padding-top:%?55?%;color:#999;font-size:%?30?%}.openIcon[data-v-76968b54]{width:%?20?%;height:%?10?%;margin-left:%?20?%;vertical-align:middle}.openIcon.active[data-v-76968b54]{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.alreadyCanUse[data-v-76968b54]{position:absolute;width:%?130?%;height:%?130?%;background:url(http://beifa-mall.oss-cn-shanghai.aliyuncs.com/appletsImages/coupon_used_180820@2x.png) no-repeat 50%;background-size:%?130?% %?130?%;bottom:0;right:0}",""]),t.exports=a},b71a:function(t,a,e){"use strict";e.r(a);var o=e("5cf9"),n=e("2fde");for(var i in n)["default"].indexOf(i)<0&&function(t){e.d(a,t,(function(){return n[t]}))}(i);e("48d8");var s,d=e("f0c5"),u=Object(d["a"])(n["default"],o["b"],o["c"],!1,null,"76968b54",null,!1,o["a"],s);a["default"]=u.exports}}]);