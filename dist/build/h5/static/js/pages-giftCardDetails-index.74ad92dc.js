(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-giftCardDetails-index"],{"0db3":function(t,i,e){"use strict";e.d(i,"b",(function(){return n})),e.d(i,"c",(function(){return o})),e.d(i,"a",(function(){return a}));var a={uniPopup:e("1c89").default},n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"page cardInfo"},[e("defaultTitle",{attrs:{dto:t.defaultTitleDto}}),e("v-uni-view",{staticClass:"giftCardPic"},[e("v-uni-image",{attrs:{src:t.imgBaseUrls+t.giftCardInfo.cover}})],1),e("v-uni-view",{staticClass:"giftCardTitle ellipsis-one"},[t._v(t._s(t.giftCardInfo.cardName))]),e("v-uni-view",{staticClass:"priceTitle"},[t._v("面值选择")]),e("v-uni-view",{staticClass:"priceList"},t._l(t.giftCardInfo.itemList,(function(i,a){return e("v-uni-view",{key:a,staticClass:"everyPrice",class:t.batchId==i.batchId?"active":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.batchIdChange(i)}}},[e("v-uni-view",{staticClass:"price"},[t._v(t._s(i.faceValue)),e("v-uni-text",[t._v("元")])],1),e("v-uni-view",[t._v("售价："+t._s(i.salePrice)+"元")]),t.batchId==i.batchId?e("v-uni-image",{attrs:{src:"http://beifa-mall.oss-cn-shanghai.aliyuncs.com/appletsImages/gift_card_select@2x.png",mode:""}}):t._e()],1)})),1),e("v-uni-view",{staticClass:"priceTitle range"},[e("v-uni-view",[t._v("使用范围")]),1==t.giftCardInfo.applyScope?e("v-uni-view",{staticClass:"useStore noBg"},[t._v("全平台通用")]):t._e(),2==t.giftCardInfo.applyScope?e("v-uni-view",{staticClass:"useStore",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.goToCardStoreList.apply(void 0,arguments)}}},[e("v-uni-text",[t._v("查看可用店铺")]),e("v-uni-text",{staticClass:"icon"})],1):t._e(),3==t.giftCardInfo.applyScope?e("v-uni-view",{staticClass:"useStore",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.notAllowPopupOpen.apply(void 0,arguments)}}},[e("v-uni-text",[t._v("查看不适用店铺")]),e("v-uni-text",{staticClass:"icon"})],1):t._e(),4==t.giftCardInfo.applyScope?e("v-uni-view",{staticClass:"useStore",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.goToCardGoods.apply(void 0,arguments)}}},[e("v-uni-text",[t._v("查看可用商品")]),e("v-uni-text",{staticClass:"icon"})],1):t._e()],1),e("v-uni-view",{staticClass:"priceTitle"},[e("v-uni-view",[t._v("礼卡详情")])],1),e("v-uni-view",{staticClass:"details"},[e("v-uni-rich-text",{attrs:{nodes:t.giftCardInfo.spec.replace(/\<img/gi,"<img style=max-width:100%;height:auto;display:block")}})],1),e("v-uni-view",{staticClass:"nowBuyBtn fixedPosition",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.buyPopupOpen.apply(void 0,arguments)}}},[t._v("立即购买")]),e("uni-popup",{ref:"buyPopup",attrs:{type:"bottom"}},[e("v-uni-view",{staticClass:"giftBuyDetails"},[e("v-uni-view",{staticClass:"gifyBuyTitle",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.buyPopupClose.apply(void 0,arguments)}}}),e("v-uni-view",{staticClass:"giftBuyCover"},[e("v-uni-view",{staticClass:"giftCardImage",style:{backgroundImage:"url("+t.imgBaseUrls+t.giftCardInfo.cover+")"}}),e("v-uni-view",{staticClass:"cardInfoPopup"},[e("v-uni-view",{staticClass:"cardInfoTitle"},[t._v(t._s(t.giftCardInfo.cardName))]),e("v-uni-view",[t._v("面值："),e("v-uni-text",{staticClass:"symbol"},[t._v("¥")]),e("v-uni-text",{staticClass:"facePrice"},[t._v(t._s(t.giftCardInfo.faceValue))])],1),e("v-uni-view",[t._v("售价："),e("v-uni-text",[t._v("¥")]),e("v-uni-text",[t._v(t._s(t.giftCardInfo.salePrice))])],1)],1)],1),e("v-uni-view",{staticClass:"content"},[e("v-uni-view",{staticClass:"buyAllPrice"},[e("v-uni-text",[t._v("购买总面额")]),e("v-uni-text",[t._v("¥"+t._s(parseFloat(t.giftCardInfo.faceValue*t.issueNum).toFixed(2)))])],1),parseFloat((t.giftCardInfo.faceValue-t.giftCardInfo.salePrice)*t.issueNum)>0?e("v-uni-view",{staticClass:"buyAllPrice"},[e("v-uni-text",[t._v("优惠金额")]),e("v-uni-text",[t._v("¥"+t._s(parseFloat((t.giftCardInfo.faceValue-t.giftCardInfo.salePrice)*t.issueNum).toFixed(2)))])],1):t._e(),e("v-uni-view",{staticClass:"cardBuyNum"},[e("v-uni-view",[t._v("数量")]),e("v-uni-view",{staticClass:"limitNum"},[e("v-uni-view",{staticClass:"jian",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.jian()}}},[t._v("-")]),e("v-uni-input",{attrs:{type:"number"},on:{blur:function(i){arguments[0]=i=t.$handleEvent(i),t.goodsNumBlur()}},model:{value:t.issueNum,callback:function(i){t.issueNum=i},expression:"issueNum"}}),e("v-uni-view",{staticClass:"jia",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.jia()}}},[t._v("+")])],1)],1)],1),e("v-uni-view",{staticClass:"buyFoot"},[e("v-uni-view",{staticClass:"payment"},[t._v("实付款："),e("v-uni-text",{staticClass:"paymentPrice"},[t._v("¥"+t._s(parseFloat(t.giftCardInfo.salePrice*t.issueNum).toFixed(2)))])],1),e("v-uni-view",{staticClass:"buyBtn",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.sure.apply(void 0,arguments)}}},[t._v("确认")])],1)],1)],1),e("uni-popup",{ref:"notAllowShopPopup",attrs:{type:"center"}},[e("v-uni-view",{staticClass:"notAllowShop"},[e("v-uni-view",{staticClass:"gifyBuyTitle",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.notAllowPopupClose.apply(void 0,arguments)}}},[e("v-uni-text",[t._v("该礼卡不适用店铺")])],1),e("v-uni-view",{staticClass:"giftCardShop"},t._l(t.giftCardInfo.storeNameList,(function(i){return e("v-uni-text",{key:i},[t._v(t._s(i))])})),1)],1)],1)],1)},o=[]},2587:function(t,i,e){var a=e("4bad");i=a(!1),i.push([t.i,".cardInfo[data-v-2fb6b5d5]{padding:%?0?% %?36?% %?100?%;\npadding-top:%?88?%\n}.giftCardPic[data-v-2fb6b5d5]{width:%?600?%;height:%?372?%;border-radius:%?18?%;box-shadow:0 6px 25px 0 rgba(0,0,0,.12);margin:%?24?% auto 0}.giftCardTitle[data-v-2fb6b5d5]{font-size:%?34?%;line-height:%?45?%;font-weight:700;text-align:center;margin-top:%?36?%;margin-bottom:%?40?%}.priceTitle[data-v-2fb6b5d5]{margin-bottom:%?36?%;font-size:%?34?%;font-weight:700;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.priceList[data-v-2fb6b5d5]{width:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap;margin-bottom:%?36?%}.everyPrice[data-v-2fb6b5d5]{width:%?202?%;height:%?129?%;color:#333;font-size:%?22?%;margin-bottom:%?36?%;margin-right:%?36?%;box-shadow:0 6px 25px 0 rgba(0,0,0,.12);border-radius:%?18?%;text-align:center;border:%?2?% solid transparent;position:relative}.everyPrice uni-image[data-v-2fb6b5d5]{position:absolute;width:%?60?%;height:%?60?%;right:0;top:0}.everyPrice[data-v-2fb6b5d5]:nth-of-type(3n){margin-right:0}.everyPrice.active[data-v-2fb6b5d5]{border:%?2?% solid #ff1558}.everyPrice.active .price[data-v-2fb6b5d5]{color:#ff1558}.price[data-v-2fb6b5d5]{font-size:%?36?%;margin-top:%?18?%;margin-bottom:%?10?%}.price uni-text[data-v-2fb6b5d5]{font-size:%?28?%}.useStore[data-v-2fb6b5d5]{\n\t/* width: 200rpx; */text-align:right;font-weight:400;font-size:%?26?%;color:#666;padding-right:%?30?%}.useStore uni-text[data-v-2fb6b5d5]{display:inline-block;vertical-align:middle}.useStore .icon[data-v-2fb6b5d5]{width:%?12?%;height:%?24?%;background:url(http://beifa-mall.oss-cn-shanghai.aliyuncs.com/appletsImages/rightArrow.png) no-repeat 50%;background-size:100% 100%;margin-left:%?10?%}.useStore.noBg[data-v-2fb6b5d5]{background:none}.range[data-v-2fb6b5d5]{margin-bottom:%?60?%}.nowBuyBtn[data-v-2fb6b5d5]{width:100%;min-height:%?88?%;background-color:#ff1558;color:#fff;line-height:%?88?%;position:fixed;bottom:0;left:0;text-align:center;font-weight:600;font-size:%?32?%}.giftBuyDetails[data-v-2fb6b5d5],.notAllowShop[data-v-2fb6b5d5]{width:100%;height:%?795?%;background-color:#fff;position:relative}.gifyBuyTitle[data-v-2fb6b5d5]{height:%?40?%;width:100%;padding:%?30?% 0;background:url(http://beifa-mall.oss-cn-shanghai.aliyuncs.com/appletsImages/group_2@2x.png) no-repeat 50%;background-size:%?40?%;background-position:98% %?20?%}.giftBuyCover[data-v-2fb6b5d5]{width:100%;display:-webkit-box;display:-webkit-flex;display:flex;padding:0 %?60?%}.giftCardImage[data-v-2fb6b5d5]{width:%?330?%;height:%?214?%;border-radius:%?18?%;box-shadow:0 6px 25px 0 rgba(0,0,0,.12);background-position:50%;background-size:cover;background-repeat:no-repeat}.cardInfoPopup[data-v-2fb6b5d5]{padding-left:%?30?%}.cardInfoTitle[data-v-2fb6b5d5]{font-size:%?34?%;font-weight:700;margin-bottom:%?24?%}.symbol[data-v-2fb6b5d5]{color:#ff1558}.facePrice[data-v-2fb6b5d5]{font-size:%?32?%;color:#ff1558}.buyAllPrice[data-v-2fb6b5d5]{width:calc(100% - %?20?%);height:%?100?%;border-bottom:%?1?% solid #e4e4e4;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:0 %?30?%;margin-left:%?20?%}.content[data-v-2fb6b5d5]{width:100%;margin-top:%?40?%;border-top:%?1?% solid #e4e4e4;border-bottom:%?1?% solid #e4e4e4}.cardBuyNum[data-v-2fb6b5d5]{padding:%?40?% %?30?%}.limitNum[data-v-2fb6b5d5]{background-color:#fff;width:%?188?%;height:%?50?%;display:-webkit-box;display:-webkit-flex;display:flex;margin-top:%?20?%}.limitNum .jia[data-v-2fb6b5d5],\n.limitNum .jian[data-v-2fb6b5d5]{width:%?50?%;height:%?50?%;text-align:center;line-height:%?48?%;border:1px solid #e6e6e6}.limitNum uni-input[data-v-2fb6b5d5]{width:%?88?%;height:100%;text-align:center;border-top:1px solid #e6e6e6;border-bottom:1px solid #e6e6e6;font-size:%?24?%}.buyFoot[data-v-2fb6b5d5]{width:100%;height:%?100?%;position:absolute;bottom:0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end}.buyBtn[data-v-2fb6b5d5]{width:%?230?%;height:%?100?%;line-height:%?100?%;background-color:#ff1558;color:#fff;text-align:center}.payment[data-v-2fb6b5d5]{line-height:%?100?%;margin-right:%?30?%}.paymentPrice[data-v-2fb6b5d5]{color:#ff1558}.notAllowShop[data-v-2fb6b5d5]{width:%?600?%;border-radius:%?32?%;padding-bottom:%?50?%;height:auto;text-align:center}.notAllowShop .gifyBuyTitle[data-v-2fb6b5d5]{font-size:%?30?%;background-position:94% %?30?%}.giftCardShop[data-v-2fb6b5d5]{width:100%;margin-top:%?24?%;text-align:center;overflow-y:scroll;max-height:380px;min-height:%?50?%}.giftCardShop uni-text[data-v-2fb6b5d5]{display:block;font-size:%?30?%;color:#e61446;line-height:%?50?%;margin-top:%?40?%;display:block;height:%?50?%;-webkit-box-flex:1;-webkit-flex:1;flex:1;overflow:hidden}",""]),t.exports=i},"8e70":function(t,i,e){"use strict";var a=e("4ea4");e("e25e"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=a(e("92c6")),o={data:function(){return{defaultTitleDto:{title:"购买礼卡"},giftCardInfo:{},imgBaseUrls:"",batchId:"",issueNum:1}},methods:{buyPopupOpen:function(){this.$refs.buyPopup.open()},buyPopupClose:function(){this.$refs.buyPopup.close()},notAllowPopupOpen:function(){this.$refs.notAllowShopPopup.open()},notAllowPopupClose:function(){this.$refs.notAllowShopPopup.close()},batchIdChange:function(t){this.batchId=t.batchId,this.giftCardDetail()},giftCardDetail:function(){var t=this;n.default.giftCardDetail({batchId:this.batchId}).then((function(i){200==i.data.code?t.giftCardInfo=i.data.data:uni.showToast({title:i.data.message,icon:"none"})}))},goToCardStoreList:function(){this.$Router.push({path:"/pages/cardStoreList/index",query:{cardId:this.batchId}})},goToCardGoods:function(){this.$Router.push({path:"/pages/giftCardGoods/index",query:{batchId:this.batchId,cardName:this.giftCardInfo.cardName}})},jian:function(t){this.issueNum>1&&this.issueNum--},jia:function(t){this.issueNum<this.giftCardInfo.limitNum&&this.issueNum++},goodsNumBlur:function(){this.issueNum?this.giftCardInfo.limitNum<this.issueNum?this.issueNum=parseInt(this.giftCardInfo.limitNum):this.issueNum<1?this.issueNum=1:this.issueNum=this.issueNum:this.issueNum=1},sure:function(){this.buyPopupClose(),this.$Router.push({path:"/pages/giftFillInOrder/index",query:{batchId:this.giftCardInfo.batchId,issueNum:this.issueNum,orderKey:this.giftCardInfo.orderKey}})}},mounted:function(){},onShow:function(){this.batchId=this.$Route.query.batchId,this.imgBaseUrls=this.$config.imgBaseUrl,this.giftCardDetail()}};i.default=o},"9cf9":function(t,i,e){"use strict";var a=e("a9d3"),n=e.n(a);n.a},a273:function(t,i,e){"use strict";e.r(i);var a=e("0db3"),n=e("bac7");for(var o in n)["default"].indexOf(o)<0&&function(t){e.d(i,t,(function(){return n[t]}))}(o);e("9cf9");var s,d=e("f0c5"),r=Object(d["a"])(n["default"],a["b"],a["c"],!1,null,"2fb6b5d5",null,!1,a["a"],s);i["default"]=r.exports},a9d3:function(t,i,e){var a=e("2587");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=e("4f06").default;n("2420952a",a,!0,{sourceMap:!1,shadowMode:!1})},bac7:function(t,i,e){"use strict";e.r(i);var a=e("8e70"),n=e.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){e.d(i,t,(function(){return a[t]}))}(o);i["default"]=n.a}}]);