(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/seckillZone/index"],{2456:function(t,e,i){"use strict";var s=i("79fb"),n=i.n(s);n.a},"48c7":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("688c"));function n(t){return t&&t.__esModule?t:{default:t}}var a={data:function(){return{marketList:[],todayTime:new Date((new Date).toLocaleDateString()).getTime()+864e5-1,timeParams:{hours:"",minute:"",seconds:""},chooseItem:{},chooseItemActivity:{},seckillActivity:{},seckilGoodsList:{},imgBaseUrls:"",pageInfo:{pageNo:1,pageSize:10},defaultTitleDto:{title:"秒杀专区",bg:"starShopBackWrite.png"},markInterval:""}},methods:{listMarketings:function(){var e=this;s.default.listMarketings().then((function(i){200==i.data.code?(e.marketList=i.data.data,e.chooseItemActivity=i.data.data[0],e.listMarketingSessionsByMarketingId()):t.showToast({title:i.data.message,icon:"none"})}))},seckilChange:function(t){this.pageInfo.pageNo=1,this.chooseItemActivity=t,this.listMarketingSessionsByMarketingId()},listMarketingSessionsByMarketingId:function(){var e=this;s.default.listMarketingSessionsByMarketingId(this.chooseItemActivity.marketingId).then((function(i){if(200==i.data.code){e.seckillActivity=i.data.data,e.chooseItem=e.seckillActivity.sessionList[0];for(var s=0;s<e.seckillActivity.sessionList.length;s++){var n=e.seckillActivity.sessionList[s].sessionStartTime,a=e.seckillActivity.sessionList[s].sessionEndTime;n<e.todayTime?a>(new Date).getTime()?e.$set(e.seckillActivity.sessionList[s],"statusText","抢购中"):e.$set(e.seckillActivity.sessionList[s],"statusText","即将开抢"):n<e.todayTime+864e5?e.$set(e.seckillActivity.sessionList[s],"statusText","明日开抢"):e.$set(e.seckillActivity.sessionList[s],"statusText","后天开抢")}e.judgeTime(),e.markInterval||(e.markInterval=setInterval((function(){e.judgeTime()}),1e3)),e.listSessionItems()}else t.showToast({title:i.data.message,icon:"none"})}))},listSessionItems:function(e){var i=this;s.default.listSessionItems(this.chooseItem.marketingSessionId,this.pageInfo).then((function(s){200==s.data.code?s.data.data?e?(i.seckilGoodsList.records=i.seckilGoodsList.records.concat(s.data.data.records),i.seckilGoodsList.totalPage=s.data.data.totalPage):i.seckilGoodsList=s.data.data.itemPage:i.seckilGoodsList={}:t.showToast({title:s.data.message,icon:"none"})}))},sessionStartChange:function(t){this.chooseItem=t,this.pageInfo.pageNo=1,this.judgeTime(),this.listSessionItems()},addMarketingItemNotification:function(e){var i={itemId:e.itemId,marketingId:this.seckillActivity.marketingId,marketingSessionId:this.chooseItem.marketingSessionId};s.default.addMarketingItemNotification(i).then((function(i){200==i.data.code?(t.showToast({title:"设置成功",icon:"none"}),e.notificationFlag=1):t.showToast({title:i.data.message,icon:"none"})}))},removeMarketingItemNotification:function(e){var i={itemId:e.itemId,marketingId:this.seckillActivity.marketingId,marketingSessionId:this.chooseItem.marketingSessionId};s.default.removeMarketingItemNotification(i).then((function(i){200==i.data.code?(t.showToast({title:"取消成功",icon:"none"}),e.notificationFlag=0):t.showToast({title:i.data.message,icon:"none"})}))},goToGoodsDetails:function(t){this.$Router.push({path:"/pages/goodsDetails/index",query:{goodsId:t.itemId,promotionId:this.seckillActivity.marketingId}})},judgeTime:function(){(new Date).getTime()<this.chooseItem.sessionStartTime?this.judgeTimeAccurate(this.chooseItem.sessionStartTime-(new Date).getTime()):this.judgeTimeAccurate(this.chooseItem.sessionEndTime-(new Date).getTime())},judgeTimeAccurate:function(t){this.timeParams.hours=parseInt(t/36e5,10)<10?"0"+parseInt(t/36e5,10):parseInt(t/36e5,10),this.timeParams.minute=parseInt(t/1e3/60%60,10)<10?"0"+parseInt(t/1e3/60%60,10):parseInt(t/1e3/60%60,10),this.timeParams.seconds=parseInt(t/1e3%60)<10?"0"+parseInt(t/1e3%60,10):parseInt(t/1e3%60)},scrolltolower:function(){this.pageInfo.pageNo<this.seckilGoodsList.totalPage&&(this.pageInfo.pageNo++,this.listSessionItems(!0))},clearIntervalTime:function(){this.markInterval&&(clearInterval(this.markInterval),this.markInterval=!1)}},mounted:function(){this.imgBaseUrls=this.$config.imgBaseUrl},onShow:function(){this.zhuge.track("秒杀专区-落地页"),this.listMarketings()},onHide:function(){this.clearIntervalTime()},onUnload:function(){this.clearIntervalTime()}};e.default=a}).call(this,i("543d")["default"])},"79fb":function(t,e,i){},9797:function(t,e,i){"use strict";var s;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return s}));var n=function(){var t=this,e=t.$createElement,i=(t._self._c,t.__map(t.seckillActivity.sessionList,(function(e,i){var s=t.__get_orig(e),n=t.$utils.formatDate(e.sessionStartTime,"hh:mm");return{$orig:s,g0:n}}))),s=(new Date).getTime(),n=(new Date).getTime();t.$mp.data=Object.assign({},{$root:{l0:i,g1:s,g2:n}})},a=[]},af33:function(t,e,i){"use strict";(function(t){i("6cdc");s(i("66fd"));var e=s(i("b6c5"));function s(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("543d")["createPage"])},b6c5:function(t,e,i){"use strict";i.r(e);var s=i("9797"),n=i("fbde");for(var a in n)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(a);i("2456");var o,c=i("f0c5"),r=Object(c["a"])(n["default"],s["b"],s["c"],!1,null,"4feffc5e",null,!1,s["a"],o);e["default"]=r.exports},fbde:function(t,e,i){"use strict";i.r(e);var s=i("48c7"),n=i.n(s);for(var a in s)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(a);e["default"]=n.a}},[["af33","common/runtime","common/vendor"]]]);