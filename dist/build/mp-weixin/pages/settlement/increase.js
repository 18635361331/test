(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/settlement/increase","pages/settlement/storeDiscount"],{"033f":function(e,t,o){"use strict";o.r(t);var n=o("0a3c"),r=o("b1b2");for(var a in r)["default"].indexOf(a)<0&&function(e){o.d(t,e,(function(){return r[e]}))}(a);o("bdff");var i,s=o("f0c5"),u=Object(s["a"])(r["default"],n["b"],n["c"],!1,null,"c24c8e1e",null,!1,n["a"],i);t["default"]=u.exports},"0a3c":function(e,t,o){"use strict";o.d(t,"b",(function(){return r})),o.d(t,"c",(function(){return a})),o.d(t,"a",(function(){return n}));var n={uniPopup:function(){return Promise.all([o.e("common/vendor"),o.e("components/uni-popup/uni-popup")]).then(o.bind(null,"1c89"))}},r=function(){var e=this,t=e.$createElement,o=(e._self._c,e.__map(e.storeCouponsInfo[e.storeId].availableList,(function(t,o){var n=e.__get_orig(t),r=e.$utils.formatDate(t.startTime,"yyyy.MM.dd"),a=e.$utils.formatDate(t.endTime,"yyyy.MM.dd");return{$orig:n,g0:r,g1:a}}))),n=e.__map(e.storeCouponsInfo[e.storeId].unavailableList,(function(t,o){var n=e.__get_orig(t),r=e.$utils.formatDate(t.startTime,"yyyy.MM.dd"),a=e.$utils.formatDate(t.endTime,"yyyy.MM.dd");return{$orig:n,g2:r,g3:a}}));e.$mp.data=Object.assign({},{$root:{l0:o,l1:n}})},a=[]},"3a2e":function(e,t,o){"use strict";var n=o("6d10"),r=o.n(n);r.a},"3e16":function(e,t,o){"use strict";o.r(t);var n=o("75d8"),r=o("e14f");for(var a in r)["default"].indexOf(a)<0&&function(e){o.d(t,e,(function(){return r[e]}))}(a);o("3a2e");var i,s=o("f0c5"),u=Object(s["a"])(r["default"],n["b"],n["c"],!1,null,"57de7131",null,!1,n["a"],i);t["default"]=u.exports},"4d13":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={props:["storeCouponsInfo","storeId","storeName","chooseStoreId"],data:function(){return{}},methods:{openCouponPopup:function(){this.$refs.couponPopup.open()},clearCoupon:function(){this.$emit("couponChange",this.storeId,"")},closeCouponPopup:function(){this.$refs.couponPopup.close()},couponChange:function(e){e.id!=this.chooseStoreId&&this.$emit("couponChange",this.storeId,e.id)}},mounted:function(){}};t.default=n},"5d8c":function(e,t,o){},"6d10":function(e,t,o){},"75d8":function(e,t,o){"use strict";var n;o.d(t,"b",(function(){return r})),o.d(t,"c",(function(){return a})),o.d(t,"a",(function(){return n}));var r=function(){var e=this,t=e.$createElement;e._self._c},a=[]},b1b2:function(e,t,o){"use strict";o.r(t);var n=o("4d13"),r=o.n(n);for(var a in n)["default"].indexOf(a)<0&&function(e){o.d(t,e,(function(){return n[e]}))}(a);t["default"]=r.a},bdff:function(e,t,o){"use strict";var n=o("5d8c"),r=o.n(n);r.a},dd69:function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(o("1087")),r=(a(o("5315")),a(o("033f")),a(o("6b82")));function a(e){return e&&e.__esModule?e:{default:e}}var i=function(){o.e("pages/settlement/storePromotionView").then(function(){return resolve(o("98f7"))}.bind(null,o)).catch(o.oe)},s=function(){Promise.all([o.e("common/vendor"),o.e("pages/pay/setPayPsw/index")]).then(function(){return resolve(o("b1f7"))}.bind(null,o)).catch(o.oe)},u=function(){Promise.all([o.e("common/vendor"),o.e("pages/pay/forgetPayPsw/index")]).then(function(){return resolve(o("4406"))}.bind(null,o)).catch(o.oe)},d=function(){o.e("pages/pay/passwordPopup/index").then(function(){return resolve(o("639e"))}.bind(null,o)).catch(o.oe)},c=function(){o.e("pages/pay/verificationCode/index").then(function(){return resolve(o("dcca"))}.bind(null,o)).catch(o.oe)},f={mixins:[r.default],data:function(){return{orderInfo:{},imgBaseUrls:"",orderGoldCount:{canUseGold:"",accountGold:""},platformPromotsParams:{lotteryId:"",addressId:"",orders:[]},orderSummaryParams:{},orderScoreCount:{usefulScoreNum:"",score:""},orderSummaryInfo:{},deductionFlag:{score:!1,gold:!0},submitFlag:!0}},onShow:function(){for(var e in this.fmagentInit(),this.zhuge.track("填写订单-落地页"),this.deductionFlag)this.deductionFlag[e]=!1;this.imgBaseUrls=this.$config.imgBaseUrl;var t=this.initParams();this.giftBagPageInit(t)},components:{storePromotionView:i,setPayPwd:s,forgetPayPsw:u,verificationCode:c,pswPopup:d},methods:{initParams:function(){return{itemId:this.$Route.query.goodsId,goodsNum:this.$Route.query.goodsNum,inviterCode:e.getStorageSync("routerShareNumber")?e.getStorageSync("routerShareNumber"):""}},giftBagPageInit:function(t){var o=this;e.showLoading({title:"加载中..."}),n.default.giftBagPageInit(t).then((function(t){200==t.data.code?(o.orderInfo=t.data.data,o.giftBagGoldOrder()):e.showToast({title:t.data.message,icon:"none"})}))},giftBagGoldOrder:function(){var t=this;n.default.giftBagGoldOrder(this.initParams()).then((function(o){200==o.data.code?(t.orderSummaryParams.goldAmount=o.data.data.canUseGold,t.orderGoldCount=o.data.data,t.orderGoldCount.canUseGold?t.deductionFlag.gold=!0:t.deductionFlag.gold=!1,t.giftBagScoreOrder()):e.showToast({title:o.data.message,icon:"none"})}))},giftBagScoreOrder:function(){var t=this;n.default.giftBagScoreOrder(this.initParams()).then((function(o){200==o.data.code?(t.orderScoreCount=o.data.data,t.giftBagSummaryOrder()):e.showToast({title:o.data.message,icon:"none"})}))},giftBagSummaryOrder:function(){var t=this;this.orderSummaryParams=Object.assign(this.orderSummaryParams,this.initParams()),n.default.giftBagSummaryOrder(this.orderSummaryParams).then((function(o){e.hideLoading(),200==o.data.code?t.orderSummaryInfo=o.data.data:e.showToast({title:o.data.message,icon:"none"})}))},submitOrder:function(){0==this.orderSummaryInfo.payAmount&&this.deductionFlag.score?"HIGH"==this.orderInfo.riskCheck.riskLevel?e.showToast({title:"抱歉检测到本次交易异常，为了您的账号安全，请稍后再试或联系客服处理，联系方式：400-100-8246",icon:"none"}):"MID"==this.orderInfo.riskCheck.riskLevel||this.orderInfo.riskCheck.firstAddrMobile&&!this.orderInfo.riskCheck.monthNewMember&&this.orderScoreCount.score>this.orderInfo.riskCheck.unsafeAmt?this.$refs.verificationCode.openVerificationCode():this.openPswPopup():this.giftBagSubmitOrder()},openPswPopup:function(){this.orderInfo.hasPayPwd?this.$refs.pswPopup.openPswPopup():this.$refs.setPayPwd.openNoPswPopup()},codeSubmit:function(e){this.$set(this.orderSummaryParams,"code",e),this.submit()},giftBagSubmitOrder:function(){var t=this;this.submitFlag&&(this.submitFlag=!1,n.default.giftBagSubmitOrder(this.orderSummaryParams).then((function(o){t.submitFlag=!0,200==o.data.code?(t.$refs.verificationCode.closeVerificationCode(),0==t.orderSummaryInfo.payAmount?t.$Router.replace({path:"/pages/payment/index",query:{payId:o.data.data.payId,newtype:t.$Route.query.newtype||"",increase:!0}}):t.$Router.replace({path:"/pages/pay/index",query:{payId:o.data.data.payId,newtype:t.$Route.query.newtype||"",increase:!0}})):e.showToast({title:o.data.message,icon:"none"})})))},goldChange:function(e){this.deductionFlag.gold=e.detail.value,e.detail.value?this.orderSummaryParams["goldAmount"]=this.orderGoldCount.canUseGold:this.orderSummaryParams["goldAmount"]=0,this.giftBagSummaryOrder()},scoreChange:function(e){this.deductionFlag.score=e.detail.value,e.detail.value?this.orderSummaryParams["scoreNum"]=this.orderScoreCount.usefulScoreNum:this.orderSummaryParams["scoreNum"]=0,this.giftBagSummaryOrder()},openForgetPopup:function(){this.$refs.forgetPayPsw.openForgetPopup()},setSubmitPsw:function(e){this.$set(this.orderSummaryParams,"password",e),this.submit()}}};t.default=f}).call(this,o("543d")["default"])},e14f:function(e,t,o){"use strict";o.r(t);var n=o("dd69"),r=o.n(n);for(var a in n)["default"].indexOf(a)<0&&function(e){o.d(t,e,(function(){return n[e]}))}(a);t["default"]=r.a},fa3e:function(e,t,o){"use strict";(function(e){o("6cdc");n(o("66fd"));var t=n(o("3e16"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,o("543d")["createPage"])}},[["fa3e","common/runtime","common/vendor"]]]);