(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/giftCardGoods/index"],{1509:function(e,r,t){"use strict";var a=t("4ba8"),o=t.n(a);o.a},"4ba8":function(e,r,t){},"954a":function(e,r,t){"use strict";t.r(r);var a=t("d00f"),o=t("d89e");for(var n in o)["default"].indexOf(n)<0&&function(e){t.d(r,e,(function(){return o[e]}))}(n);t("1509");var s,c=t("f0c5"),i=Object(c["a"])(o["default"],a["b"],a["c"],!1,null,"22aa5020",null,!1,a["a"],s);r["default"]=i.exports},d00f:function(e,r,t){"use strict";t.d(r,"b",(function(){return o})),t.d(r,"c",(function(){return n})),t.d(r,"a",(function(){return a}));var a={uniDrawer:function(){return t.e("components/uni-drawer/uni-drawer").then(t.bind(null,"6e16"))}},o=function(){var e=this,r=e.$createElement;e._self._c;e._isMounted||(e.e0=function(r){e.searchValue="",e.goToSearch()},e.e1=function(r){e.typeSwitch=!e.typeSwitch},e.e2=function(r){e.searchParams.orderBy="",e.searchParams.order="desc",e.seachReast()},e.e3=function(r){e.searchParams.orderBy="sales",e.searchParams.order="desc",e.seachReast()},e.e4=function(r){e.searchParams.orderBy="newProduct",e.searchParams.order="desc",e.seachReast()},e.e5=function(r){e.searchParams.orderBy="price",e.searchParams.order="desc"==e.searchParams.order?"asc":"desc",e.seachReast()})},n=[]},d89e:function(e,r,t){"use strict";t.r(r);var a=t("ebdb"),o=t.n(a);for(var n in a)["default"].indexOf(n)<0&&function(e){t.d(r,e,(function(){return a[e]}))}(n);r["default"]=o.a},e46e:function(e,r,t){"use strict";(function(e){t("6cdc");a(t("66fd"));var r=a(t("954a"));function a(e){return e&&e.__esModule?e:{default:e}}e(r.default)}).call(this,t("543d")["createPage"])},ebdb:function(e,r,t){"use strict";(function(e){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=o(t("92c6"));function o(e){return e&&e.__esModule?e:{default:e}}function n(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,a)}return t}function s(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?n(Object(t),!0).forEach((function(r){c(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function c(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var i=function(){Promise.all([t.e("common/vendor"),t.e("renovation/singleGoods/index")]).then(function(){return resolve(t("49e2"))}.bind(null,t)).catch(t.oe)},u=function(){Promise.all([t.e("common/vendor"),t.e("renovation/biserialGoods/index")]).then(function(){return resolve(t("0e99"))}.bind(null,t)).catch(t.oe)},d=function(){t.e("components/footNoMore/index").then(function(){return resolve(t("1fd4"))}.bind(null,t)).catch(t.oe)},h={data:function(){return{typeSwitch:!0,searchParams:{frontCategoryId:"",order:"desc",orderBy:"",brandId:"",priceRangeLeft:"",priceRangeRight:"",param:""},searchValue:"",pageInfo:{pageNo:1,pageSize:6},goodsInfo:{totalPage:"",records:[]},scrollTop:0,scrollOldTop:0,defaultTitleDto:{title:"礼卡可用商品"},cardName:""}},onLoad:function(){for(var e in this.searchParams)this.searchParams[e]=this.$Route.query[e]?this.$Route.query[e]:"";this.searchValue=this.$Route.query.searchValue?decodeURIComponent(this.$Route.query.searchValue):"",this.searchParams.order="desc",this.searchCustom()},methods:{searchCustom:function(r){var t=this;r||e.showLoading({title:"加载中..."}),a.default.getCardItemList(this.$Route.query.batchId,s(s({},this.searchParams),this.pageInfo)).then((function(a){if(e.hideLoading(),200==a.data.code){for(var o=0;o<a.data.data.records.length;o++)a.data.data.records[o].unpromotionMinPrice=Number(a.data.data.records[o].defaultPrice);r?(t.goodsInfo.records=t.goodsInfo.records.concat(a.data.data.records),t.goodsInfo.totalPage=a.data.data.totalPage):t.goodsInfo=a.data.data}else e.showToast({title:a.data.message,icon:"none"})}))},openUniDrawer:function(){this.$refs.uniDrawer.open()},scrolltolower:function(){this.pageInfo.pageNo>=this.goodsInfo.totalPage||(this.pageInfo.pageNo++,this.searchCustom(!0))},scroll:function(e){this.scrollOldTop=e.detail.scrollTop},cancelPriceSearch:function(){this.searchParams.priceRangeLeft="",this.searchParams.priceRangeRight="",this.seachReast()},sureSearch:function(){if(Number(this.searchParams.priceRangeLeft)>Number(this.searchParams.priceRangeRight)){var e=this.searchParams.priceRangeLeft;this.searchParams.priceRangeLeft=this.searchParams.priceRangeRight,this.searchParams.priceRangeRight=e}this.$refs.uniDrawer.close(),this.searchCustom()},seachReast:function(){var e=this;this.pageInfo.pageNo=1,this.scrollTop=this.scrollOldTop,this.$nextTick((function(){e.scrollTop=0,e.searchCustom()}))},goToSearch:function(){this.$Router.replace({path:"/pages/searchCardGoods/index",query:{batchId:this.$Route.query.batchId,cardName:this.$Route.query.cardName}})}},components:{singleGoods:i,biserialGoods:u,footNoMore:d},onShow:function(){this.zhuge.track("礼卡可用商品落地页"),this.cardName=this.$Route.query.cardName}};r.default=h}).call(this,t("543d")["default"])}},[["e46e","common/runtime","common/vendor"]]]);