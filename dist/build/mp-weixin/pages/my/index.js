(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my/index"],{"03ef":function(e,n,t){"use strict";t.r(n);var r=t("e323"),a=t("6882");for(var o in a)["default"].indexOf(o)<0&&function(e){t.d(n,e,(function(){return a[e]}))}(o);t("353c");var s,i=t("f0c5"),u=Object(i["a"])(a["default"],r["b"],r["c"],!1,null,"fcb44c66",null,!1,r["a"],s);n["default"]=u.exports},"353c":function(e,n,t){"use strict";var r=t("f214"),a=t.n(r);a.a},"59df":function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=u(t("a34a")),a=u(t("5315")),o=(u(t("8667")),u(t("92c6"))),s=u(t("e6bc")),i=u(t("4990"));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,n,t,r,a,o,s){try{var i=e[o](s),u=i.value}catch(c){return void t(c)}i.done?n(u):Promise.resolve(u).then(r,a)}function d(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function s(e){c(o,r,a,s,i,"next",e)}function i(e){c(o,r,a,s,i,"throw",e)}s(void 0)}))}}var f=function(){t.e("common/model/head").then(function(){return resolve(t("fca6"))}.bind(null,t)).catch(t.oe)},p=function(){t.e("pages/my/vipPart").then(function(){return resolve(t("2efe"))}.bind(null,t)).catch(t.oe)},l=function(){Promise.all([t.e("common/vendor"),t.e("pages/my/money")]).then(function(){return resolve(t("423c"))}.bind(null,t)).catch(t.oe)},m=function(){t.e("pages/my/tools").then(function(){return resolve(t("2f3b"))}.bind(null,t)).catch(t.oe)},g={mixins:[i.default],data:function(){return{isLogin:!1,defaultTitleDto:{title:"我的",color:"red"},orderType:1,order:[[{name:"待确认",icon:"confirmed.png",state:10,type:"confirmed",num:""},{name:"待付款",icon:"pending.png",state:20,type:"pending",num:""},{name:"生产中",icon:"production.png",state:30,type:"production",num:""},{name:"待收货",icon:"received.png",state:40,type:"received",num:""},{name:"全部订单",icon:"myOrder.png",type:"all",num:""}],[{name:"待付款",icon:"myPay.png",state:10,type:"orderUnpay",num:""},{name:"待发货",icon:"userDeliveryIcon.png",type:"orderUnshipped",num:"",state:20},{name:"待收货",icon:"myGet.png",num:"",type:"orderUunreceived",state:30},{name:"退款/售后",num:"",type:"orderRefund",icon:"myRefund.png",path:"/pages/refund/index"},{name:"全部订单",icon:"myOrder.png",type:"all",num:"",path:"/pages/order/index"}]],myAssets:[{name:"账户积分",icon:"integralV3.png",path:"/pages/integral/index",type:"point"},{name:"礼卡余额",icon:"giftCardBalanceV3.png",path:"/pages/giftCard/index",type:"cardBalance"},{name:"优惠券",icon:"couponV3.png",path:"/pages/coupon/index",type:"couponCount"},{name:"收入中心",icon:"shouruV3.png",path:"",type:"incomeMoney"},{name:"库豆",icon:"peasV3.png",path:"/pages/shopMoneyDetails/index",type:"goldTotal"}],userInfo:{plusFlag:0},imgBaseUrls:"",memberInfo:{},withdraw:{withdrawFlag:!1},partner:{}}},components:{headImg:f,vipPart:p,money:l,tools:m},onShow:function(){var n=this;if(this.zhuge.track("我的-落地页"),this.imgBaseUrls=this.$config.imgBaseUrl,e.getStorageSync("sessionId"))this.loginInfo();else{for(var t=0;t<this.order[1].length;t++)this.order[1][t].num=0;for(var r=0;r<this.myAssets.length;r++)this.myAssets[r].num=0;this.isLogin=!1,this.userInfo={}}this.$nextTick((function(){try{n.$refs.money.reasetMoney()}catch(e){}}))},onShareAppMessage:function(n){this.zhuge.track("新人专享活动分享");var t="/appletsImages/WechatIMG30.png",r="",a="";return"button"===n.from?(a="神秘邀请：你被拉入优惠商品福利专区！",t="/appletsImages/newUserShareImage.png",r="/pages/newUser/index?shareNumber="+(e.getStorageSync("shareNumber")?e.getStorageSync("shareNumber"):""),{title:a,path:r,shareImage:t}):(a="文器库商城",t=null,r="/pages/my/index?shareNumber="+(e.getStorageSync("shareNumber")?e.getStorageSync("shareNumber"):""),{title:a,path:r})},methods:{loginInfo:function(){var n=this;a.default.loginInfo().then((function(t){if(200==t.data.code){n.userInfo=t.data.data,n.isLogin=!0;for(var r=0;r<n.order[1].length;r++)n.order[1][r].num=t.data.data[n.order[1][r].type];for(var a=0;a<n.myAssets.length;a++)n.$set(n.myAssets[a],"num",t.data.data[n.myAssets[a].type]);e.setStorageSync("userInfo",JSON.stringify(n.userInfo)),n.getUserVip()}else e.showToast({title:t.data.message,icon:"none"})}))},getUserVip:function(){var e=this;return d(r.default.mark((function n(){var t,a;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e.userInfo.plusFlag||4==e.userInfo.plusFlag){n.next=6;break}return n.next=3,s.default.getUserVip();case 3:e.memberInfo=n.sent,n.next=11;break;case 6:if(4!=e.userInfo.plusFlag){n.next=11;break}return n.next=9,s.default.getPartner();case 9:for(t=n.sent,a=0;a<t.length;a++)e.userInfo.distributorTypeId==t[a].id&&(e.memberInfo=t[a]);case 11:try{e.$refs.vipPart.setType()}catch(r){}case 12:case"end":return n.stop()}}),n)})))()},goToOrder:function(n){if(!e.getStorageSync("sessionId"))return this.$Router.push({path:"/pages/login/index"}),!1;n.path?this.$Router.push({path:n.path,query:{state:n.state||""}}):1==this.orderType?this.$Router.push({path:"/pages/order/index",query:{state:n.state||""}}):this.$Router.push({path:"/pages/customizationOrder/index",query:{state:n.state||""}})},teamNumbers:function(){var e=this;o.default.teamNumbers().then((function(n){200==n.data.code&&(e.partner=n.data.data)}))}}};n.default=g}).call(this,t("543d")["default"])},6882:function(e,n,t){"use strict";t.r(n);var r=t("59df"),a=t.n(r);for(var o in r)["default"].indexOf(o)<0&&function(e){t.d(n,e,(function(){return r[e]}))}(o);n["default"]=a.a},a46a:function(e,n,t){"use strict";(function(e){t("6cdc");r(t("66fd"));var n=r(t("03ef"));function r(e){return e&&e.__esModule?e:{default:e}}e(n.default)}).call(this,t("543d")["createPage"])},e323:function(e,n,t){"use strict";var r;t.d(n,"b",(function(){return a})),t.d(n,"c",(function(){return o})),t.d(n,"a",(function(){return r}));var a=function(){var e=this,n=e.$createElement;e._self._c;e._isMounted||(e.e0=function(n){return e.$Router.push({path:"/pages/login/index"})},e.e1=function(n){return e.$Router.push({path:"/pages/userInfo/index"})},e.e2=function(n){e.orderType=1},e.e3=function(n){e.orderType=0})},o=[]},f214:function(e,n,t){}},[["a46a","common/runtime","common/vendor"]]]);